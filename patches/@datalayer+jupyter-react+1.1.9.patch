diff --git a/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js b/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js
index 9c4c450..fac3fc0 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js
@@ -26,8 +26,13 @@ const JupyterLabAppComponent = (props) => {
     const defaultMimeExtensionPromises = useMemo(() => mimeRendererPromises ?? JupyterLabAppCorePlugins().mimeExtensionPromises, [mimeRendererPromises]);
     const defaultExtensionPromises = useMemo(() => pluginPromises ?? JupyterLabAppCorePlugins().extensionPromises, [pluginPromises]);
     const ref = useRef(null);
+    const adapterRef = useRef(null);
     const [_, setAdapter] = useState();
     useEffect(() => {
+        // Guard against creating multiple adapters
+        if (adapterRef.current) {
+            return;
+        }
         if (ref && serviceManager) {
             const adapter = new JupyterLabAppAdapter({
                 PluginType,
@@ -59,6 +64,7 @@ const JupyterLabAppComponent = (props) => {
                     onPlugin(plugin);
                 }
             });
+            adapterRef.current = adapter;
             setAdapter(adapter);
         }
     }, [hostId, ref, serviceManager, theme]);
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js.map b/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js.map
index b756ff9..2708b5d 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/jupyterlab/JupyterLabApp.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterLabApp.js","sourceRoot":"","sources":["../../../src/components/jupyterlab/JupyterLabApp.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"JupyterLabApp.js","sourceRoot":"","sources":["../../../src/components/jupyterlab/JupyterLabApp.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js
index eb5b8bd..2dfce2f 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js
@@ -9,32 +9,20 @@ import { Widget } from '@lumino/widgets';
 export const Lumino = ({ id = 'lumino-id', height = '100%', children, }) => {
     const ref = useRef(null);
     useEffect(() => {
-        console.log('Lumino useEffect - ref.current:', ref.current, 'children:', children, 'children.isAttached:', children?.isAttached);
         if (ref && ref.current && children) {
             try {
                 // Only attach if not already attached
                 if (!children.isAttached) {
-                    console.log('Attaching widget to DOM');
                     Widget.attach(children, ref.current);
-                    console.log('Widget attached successfully');
-                    console.log('Widget node:', children.node);
-                    console.log('Widget node parent:', children.node.parentElement);
-                    console.log('Container children after attach:', ref.current.children.length);
-                    console.log('Widget is visible:', children.isVisible);
                     if (!children.isVisible) {
-                        console.log('Making widget visible');
                         children.show();
                     }
                     // Force the widget to update
                     children.update();
                 }
                 else {
-                    console.log('Widget already attached');
-                    console.log('Widget node:', children.node);
-                    console.log('Widget node parent:', children.node.parentElement);
                     // Ensure widget is in the DOM
                     if (!ref.current.contains(children.node)) {
-                        console.log('Widget node not in container, re-attaching');
                         Widget.attach(children, ref.current);
                     }
                 }
@@ -43,10 +31,8 @@ export const Lumino = ({ id = 'lumino-id', height = '100%', children, }) => {
                 console.warn('Exception while attaching Lumino widget.', e);
             }
             return () => {
-                console.log('Lumino cleanup - detaching widget');
                 try {
                     if (children && (children.isAttached || children.node.isConnected)) {
-                        console.log('Detaching widget from DOM');
                         Widget.detach(children);
                     }
                 }
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js.map b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js.map
index b4d7dbc..8988976 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.js.map
@@ -1 +1 @@
-{"version":3,"file":"Lumino.js","sourceRoot":"","sources":["../../../src/components/lumino/Lumino.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Lumino.js","sourceRoot":"","sources":["../../../src/components/lumino/Lumino.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AAQzC,MAAM,CAAC,MAAM,MAAM,GAAG,CAAC,EACrB,EAAE,GAAG,WAAW,EAChB,MAAM,GAAG,MAAM,EACf,QAAQ,GACI,EAAE,EAAE;IAChB,MAAM,GAAG,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IACzC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO,IAAI,QAAQ,EAAE,CAAC;YACnC,IAAI,CAAC;gBACH,sCAAsC;gBACtC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;oBACzB,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;wBACxB,QAAQ,CAAC,IAAI,EAAE,CAAC;oBAClB,CAAC;oBACD,6BAA6B;oBAC7B,QAAQ,CAAC,MAAM,EAAE,CAAC;gBACpB,CAAC;qBAAM,CAAC;oBACN,8BAA8B;oBAC9B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;wBACzC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;oBACvC,CAAC;gBACH,CAAC;YACH,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACX,OAAO,CAAC,IAAI,CAAC,0CAA0C,EAAE,CAAC,CAAC,CAAC;YAC9D,CAAC;YACD,OAAO,GAAG,EAAE;gBACV,IAAI,CAAC;oBACH,IAAI,QAAQ,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;wBACnE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;oBAC1B,CAAC;gBACH,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACX,OAAO,CAAC,IAAI,CAAC,0CAA0C,EAAE,CAAC,CAAC,CAAC;gBAC9D,CAAC;YACH,CAAC,CAAC;QACJ,CAAC;IACH,CAAC,EAAE,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;IACpB,OAAO,CACL,cAAK,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAI,CACxE,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,MAAM,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.tsx.bak b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.tsx.bak
new file mode 100644
index 0000000..4182a73
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/components/lumino/Lumino.tsx.bak
@@ -0,0 +1,82 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+import { useRef, useEffect } from 'react';
+import { Widget } from '@lumino/widgets';
+
+export type LuminoProps = {
+  id?: string;
+  height?: string | number;
+  children: Widget;
+};
+
+export const Lumino = ({
+  id = 'lumino-id',
+  height = '100%',
+  children,
+}: LuminoProps) => {
+  const ref = useRef<HTMLDivElement>(null);
+  useEffect(() => {
+    console.log(
+      'Lumino useEffect - ref.current:',
+      ref.current,
+      'children:',
+      children,
+      'children.isAttached:',
+      children?.isAttached
+    );
+    if (ref && ref.current && children) {
+      try {
+        // Only attach if not already attached
+        if (!children.isAttached) {
+          console.log('Attaching widget to DOM');
+          Widget.attach(children, ref.current);
+          console.log('Widget attached successfully');
+          console.log('Widget node:', children.node);
+          console.log('Widget node parent:', children.node.parentElement);
+          console.log(
+            'Container children after attach:',
+            ref.current.children.length
+          );
+          console.log('Widget is visible:', children.isVisible);
+          if (!children.isVisible) {
+            console.log('Making widget visible');
+            children.show();
+          }
+          // Force the widget to update
+          children.update();
+        } else {
+          console.log('Widget already attached');
+          console.log('Widget node:', children.node);
+          console.log('Widget node parent:', children.node.parentElement);
+          // Ensure widget is in the DOM
+          if (!ref.current.contains(children.node)) {
+            console.log('Widget node not in container, re-attaching');
+            Widget.attach(children, ref.current);
+          }
+        }
+      } catch (e) {
+        console.warn('Exception while attaching Lumino widget.', e);
+      }
+      return () => {
+        console.log('Lumino cleanup - detaching widget');
+        try {
+          if (children && (children.isAttached || children.node.isConnected)) {
+            console.log('Detaching widget from DOM');
+            Widget.detach(children);
+          }
+        } catch (e) {
+          console.warn('Exception while detaching Lumino widget.', e);
+        }
+      };
+    }
+  }, [ref, children]);
+  return (
+    <div id={id} ref={ref} style={{ height: height, minHeight: height }} />
+  );
+};
+
+export default Lumino;
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js
index 2039d1f..7cd2ad3 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js
@@ -54,7 +54,6 @@ export const Notebook = (props) => {
     const bootstrapAdapter = async (
     //    collaborative: ICollaborative,
     serviceManager, kernel) => {
-        console.log('bootstrapAdapter called with kernel:', kernel);
         const adapter = new NotebookAdapter({
             ...props,
             id,
@@ -62,7 +61,6 @@ export const Notebook = (props) => {
             kernel,
             serviceManager,
         });
-        console.log('Created adapter:', adapter);
         // Update the local state.
         setAdapter(adapter);
         extensions.forEach(extension => {
@@ -193,7 +191,6 @@ export const Notebook = (props) => {
                             if (oldModel && oldModel !== model) {
                                 oldModel.dispose();
                             }
-                            console.log('Notebook model updated with collaboration. Cell count:', model.cells?.length);
                         }
                         catch (error) {
                             console.error('Error updating notebook model:', error);
@@ -223,7 +220,6 @@ export const Notebook = (props) => {
                     serviceManager,
                     path: props.path, // Pass the notebook's path to the collaboration provider
                 });
-                console.log('Collaboration is setup with provider:', collaborationProvider.type);
             }
             catch (error) {
                 console.error('Failed to setup collaboration:', error);
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js.map
index 9d96a49..3be92e7 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook.js.map
@@ -1 +1 @@
-{"version":3,"file":"Notebook.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Notebook.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js
index e6c7e96..776c8ec 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js
@@ -43,12 +43,7 @@ export function Notebook2(props) {
         id,
     });
     useEffect(() => {
-        console.log('[Notebook2] useEffect - model changed:', {
-            model: !!model,
-            isLoading,
-        });
         if (model) {
-            console.log('[Notebook2] Setting isLoading to false');
             setIsLoading(false);
         }
         onNotebookModelChanged?.(model);
@@ -67,12 +62,6 @@ export function Notebook2(props) {
             serviceManager.user.userChanged.disconnect(setUserIdentity);
         };
     }, [collaborationProvider, model, serviceManager]);
-    console.log('[Notebook2] Rendering:', {
-        isLoading,
-        hasModel: !!model,
-        hasServiceManager: !!serviceManager,
-        hasInlineProviders: !!inlineProviders,
-    });
     return isLoading ? (_jsx(Loader, {}, "notebook-loader")) : (_jsxs(Box, { style: { height, width: '100%', position: 'relative' }, id: "dla-Jupyter-Notebook", children: [Toolbar && _jsx(Toolbar, { notebookId: id }), _jsxs(Box, { className: "dla-Box-Notebook", sx: {
                     height,
                     maxHeight,
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js.map
index 14f8347..76cd4d9 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.js.map
@@ -1 +1 @@
-{"version":3,"file":"Notebook2.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Notebook2.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.tsx.bak b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.tsx.bak
new file mode 100644
index 0000000..e92cfec
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2.tsx.bak
@@ -0,0 +1,282 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+import React, { useEffect, useState } from 'react';
+import { createGlobalStyle } from 'styled-components';
+import type { INotebookContent } from '@jupyterlab/nbformat';
+import type { NotebookModel } from '@jupyterlab/notebook';
+import type { IRenderMime } from '@jupyterlab/rendermime-interfaces';
+import type { ServiceManager } from '@jupyterlab/services';
+import type { CommandRegistry } from '@lumino/commands';
+import { Box } from '@datalayer/primer-addons';
+import type { OnSessionConnection } from '../../state';
+import { Loader } from '../utils';
+import { useKernelId, useNotebookModel, Notebook2Base } from './Notebook2Base';
+import type { NotebookExtension } from './NotebookExtensions';
+import type { INotebookToolbarProps } from './toolbar';
+import { ICollaborationProvider } from '../../jupyter';
+import type { IInlineCompletionProvider } from '@jupyterlab/completer';
+
+import './Notebook.css';
+
+const GlobalStyle = createGlobalStyle<any>`
+  .dla-Box-Notebook .jp-Cell .dla-CellSidebar-Container {
+    display: none;
+  }
+  .dla-Box-Notebook .jp-Cell.jp-mod-active .dla-CellSidebar-Container {
+    display: block;
+  }
+`;
+
+/**
+ * Simple notebook component properties
+ */
+export interface INotebook2Props {
+  /**
+   * Collaboration provider instance.
+   */
+  collaborationProvider?: ICollaborationProvider;
+  /**
+   * Custom command registry.
+   *
+   * Note:
+   * Providing it allows to command the component from an higher level.
+   */
+  commands?: CommandRegistry;
+  /**
+   * Notebook extensions.
+   */
+  extensions?: NotebookExtension[];
+  /**
+   * Notebook ID.
+   */
+  id: string;
+  /**
+   * Kernel ID to connect to.
+   */
+  kernelId?: string;
+  /**
+   * Notebook initial content.
+   */
+  nbformat?: INotebookContent;
+  /**
+   * Notebook file path.
+   */
+  path?: string;
+  /**
+   * Whether the notebook is read-only or not.
+   */
+  readonly?: boolean;
+  /**
+   * Additional cell output renderers.
+   */
+  renderers?: IRenderMime.IRendererFactory[];
+  /**
+   * Jupyter service manager.
+   */
+  serviceManager: ServiceManager.IManager;
+  /**
+   * Whether to start a default kernel or not.
+   */
+  startDefaultKernel?: boolean;
+  /**
+   * React toolbar component factory.
+   */
+  Toolbar?: React.JSXElementConstructor<INotebookToolbarProps>;
+  /**
+   * URL to fetch the notebook content from.
+   */
+  url?: string;
+  /**
+   * Margin in pixels on the right side of cells.
+   *
+   * This is typically needed when cell sidebar is injected as extension.
+   */
+  cellSidebarMargin?: number;
+  /**
+   * CSS height of the component.
+   */
+  height?: string;
+  /**
+   * CSS max-height of the component.
+   */
+  maxHeight?: string;
+  /**
+   * Callback on notebook model changed.
+   */
+  onNotebookModelChanged?: (model: NotebookModel | null) => void;
+  /**
+   * Callback on session connection changed.
+   */
+  onSessionConnection?: OnSessionConnection;
+  /**
+   * Custom inline completion providers.
+   *
+   * Platform-specific providers can be injected here (e.g., VS Code LLM, custom AI models).
+   */
+  inlineProviders?: IInlineCompletionProvider[];
+}
+
+/**
+ * Simple notebook component without adapter and stores.
+ *
+ * Notes:
+ * - You must provide the appropriate service manager
+ * - You can specify the kernel id to use; if it is not defined or empty and startDefaultKernel is true, a new kernel will be started.
+ */
+export function Notebook2(
+  props: React.PropsWithChildren<INotebook2Props>
+): JSX.Element {
+  const {
+    Toolbar,
+    children,
+    cellSidebarMargin = 120,
+    collaborationProvider,
+    commands,
+    extensions,
+    height = '100vh',
+    maxHeight = '100vh',
+    id,
+    inlineProviders,
+    nbformat,
+    onNotebookModelChanged,
+    onSessionConnection,
+    path,
+    readonly = false,
+    renderers,
+    serviceManager,
+    startDefaultKernel = false,
+    url,
+  } = props;
+
+  const [isLoading, setIsLoading] = useState(true);
+
+  const kernelId = useKernelId({
+    requestedKernelId: props.kernelId,
+    kernels: serviceManager.kernels,
+    startDefaultKernel,
+  });
+
+  const model = useNotebookModel({
+    collaborationProvider,
+    nbformat,
+    readonly,
+    url,
+    path,
+    serviceManager,
+    id,
+  });
+
+  useEffect(() => {
+    console.log('[Notebook2] useEffect - model changed:', {
+      model: !!model,
+      isLoading,
+    });
+    if (model) {
+      setIsLoading(false);
+    }
+    onNotebookModelChanged?.(model);
+  }, [model, onNotebookModelChanged]);
+
+  useEffect(() => {
+    // Set user identity if collaborating using Jupyter collaboration
+    const setUserIdentity = () => {
+      if (collaborationProvider && model) {
+        // Yjs details are hidden from the interface
+        (model.sharedModel as any).awareness.setLocalStateField(
+          'user',
+          serviceManager.user.identity
+        );
+      }
+    };
+    setUserIdentity();
+    serviceManager.user.userChanged.connect(setUserIdentity);
+    return () => {
+      serviceManager.user.userChanged.disconnect(setUserIdentity);
+    };
+  }, [collaborationProvider, model, serviceManager]);
+
+  console.log('[Notebook2] Rendering:', {
+    isLoading,
+    hasModel: !!model,
+    hasServiceManager: !!serviceManager,
+    hasInlineProviders: !!inlineProviders,
+  });
+
+  return isLoading ? (
+    <Loader key="notebook-loader" />
+  ) : (
+    <Box
+      style={{ height, width: '100%', position: 'relative' }}
+      id="dla-Jupyter-Notebook"
+    >
+      {Toolbar && <Toolbar notebookId={id} />}
+      <Box
+        className="dla-Box-Notebook"
+        sx={{
+          height,
+          maxHeight,
+          width: '100%',
+          overflowY: 'hidden',
+          '& .datalayer-NotebookPanel-header': {
+            minHeight: '50px',
+          },
+          '& .jp-Notebook': {
+            flex: '1 1 auto !important',
+            height: '100%',
+            overflowY: 'scroll',
+          },
+          '& .jp-NotebookPanel': {
+            //            height: '100% !important',
+            //            width: '100% !important',
+          },
+          '& .jp-Toolbar': {
+            display: 'none',
+            zIndex: 0,
+          },
+          '& .jp-Toolbar .jp-HTMLSelect.jp-DefaultStyle select': {
+            fontSize: '14px',
+          },
+          '& .jp-Toolbar > .jp-Toolbar-responsive-opener': {
+            display: 'none',
+          },
+          '& .jp-Toolbar-kernelName': {
+            display: 'none',
+          },
+          '& .jp-Cell': {
+            width: `calc(100% - ${cellSidebarMargin}px)`,
+          },
+          '& .jp-Notebook-footer': {
+            width: `calc(100% - ${cellSidebarMargin + 82}px)`,
+          },
+          '& .jp-CodeMirrorEditor': {
+            cursor: 'text !important',
+          },
+          '.dla-Box-Notebook': {
+            position: 'relative',
+          },
+        }}
+      >
+        {children}
+        <GlobalStyle />
+        {model && serviceManager && (
+          <Notebook2Base
+            commands={commands}
+            id={id}
+            extensions={extensions}
+            inlineProviders={inlineProviders}
+            kernelId={kernelId}
+            model={model}
+            path={path}
+            renderers={renderers}
+            serviceManager={serviceManager}
+            onSessionConnection={onSessionConnection}
+          />
+        )}
+      </Box>
+    </Box>
+  );
+}
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.d.ts b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.d.ts
index bbf87fc..d1f9175 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.d.ts
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.d.ts
@@ -226,6 +226,16 @@ export declare class Notebook2Adapter {
      * Run all cells in the notebook (aligned with runAllCells tool).
      */
     runAllCells(): void;
+    /**
+     * Clear all outputs from all cells in the notebook.
+     *
+     * @remarks
+     * Removes all execution outputs from all cells. This operation:
+     * - Clears outputs but preserves cell source code
+     * - Resets execution counts
+     * - Cannot be undone
+     */
+    clearAllOutputs(): void;
     /**
      * Execute code directly in the kernel without creating a cell.
      *
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js
index e105e3b..382203f 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js
@@ -183,13 +183,10 @@ export class Notebook2Adapter {
      * the notebook model is not available.
      */
     getCells() {
-        console.log('[Notebook2Adapter.getCells] Called');
         const cells = this._notebook.model?.cells;
         if (!cells) {
-            console.log('[Notebook2Adapter.getCells] No cells model, returning empty array');
             return [];
         }
-        console.log(`[Notebook2Adapter.getCells] Found ${cells.length} cells`);
         const result = [];
         for (let i = 0; i < cells.length; i++) {
             const cell = cells.get(i);
@@ -200,14 +197,9 @@ export class Notebook2Adapter {
                     source: cell.sharedModel.getSource(),
                     outputs: cell.type === 'code' ? cell.outputs?.toJSON() : undefined,
                 };
-                console.log(`[Notebook2Adapter.getCells] Cell ${i}:`, {
-                    type: cellData.type,
-                    sourceLength: cellData.source.length,
-                });
                 result.push(cellData);
             }
         }
-        console.log(`[Notebook2Adapter.getCells] Returning ${result.length} cells`);
         return result;
     }
     /**
@@ -273,14 +265,6 @@ export class Notebook2Adapter {
      */
     insertAt(cellIndex, source) {
         const cellCount = this.getCellCount();
-        console.log('[Notebook2Adapter.insertAt] Called with:', {
-            cellIndex,
-            sourceLength: source?.length || 0,
-            sourcePreview: source?.substring(0, 50),
-            currentActiveCell: this._notebook.activeCellIndex,
-            cellCount,
-            defaultCellType: this._defaultCellType,
-        });
         // Validate cell index is within bounds (matches Jupyter MCP Server)
         if (cellIndex < -1 || cellIndex > cellCount) {
             throw new Error(`Index ${cellIndex} is outside valid range [-1, ${cellCount}]. ` +
@@ -288,15 +272,9 @@ export class Notebook2Adapter {
         }
         // Normalize -1 to append position (matches Jupyter MCP Server)
         const actualIndex = cellIndex === -1 ? cellCount : cellIndex;
-        console.log('[Notebook2Adapter.insertAt] Normalized index:', {
-            originalIndex: cellIndex,
-            actualIndex,
-            cellCount,
-        });
         // Insert at the actual index
         if (actualIndex >= cellCount) {
             // Append at end
-            console.log('[Notebook2Adapter.insertAt] Appending at end');
             if (cellCount > 0) {
                 this.setActiveCell(cellCount - 1);
             }
@@ -304,14 +282,9 @@ export class Notebook2Adapter {
         }
         else {
             // Insert at specific position
-            console.log(`[Notebook2Adapter.insertAt] Inserting at index ${actualIndex}`);
             this.setActiveCell(actualIndex);
             this.insertAbove(source);
         }
-        console.log('[Notebook2Adapter.insertAt] After insertion:', {
-            cellCount: this.getCellCount(),
-            activeCell: this._notebook.activeCellIndex,
-        });
     }
     /**
      * NEW ALIGNED TOOL METHODS
@@ -379,7 +352,6 @@ export class Notebook2Adapter {
             // Sort indices in REVERSE order (highest to lowest) to prevent index shifting
             // This matches the Jupyter MCP Server behavior
             const sortedIndices = [...indices].sort((a, b) => b - a);
-            console.log(`[Notebook2Adapter.deleteCell] Deleting ${sortedIndices.length} cell(s) in reverse order:`, sortedIndices);
             // Delete each cell in reverse order
             for (const idx of sortedIndices) {
                 this.setActiveCell(idx);
@@ -564,6 +536,18 @@ export class Notebook2Adapter {
     runAllCells() {
         this._commands.execute(NotebookCommandIds.runAll);
     }
+    /**
+     * Clear all outputs from all cells in the notebook.
+     *
+     * @remarks
+     * Removes all execution outputs from all cells. This operation:
+     * - Clears outputs but preserves cell source code
+     * - Resets execution counts
+     * - Cannot be undone
+     */
+    clearAllOutputs() {
+        NotebookActions.clearAllOutputs(this._notebook);
+    }
     /**
      * Execute code directly in the kernel without creating a cell.
      *
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js.map
index d7a9117..d9c652e 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Adapter.js.map
@@ -1 +1 @@
-{"version":3,"file":"Notebook2Adapter.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2Adapter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Notebook2Adapter.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2Adapter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js
index 16070b0..a4ac60f 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js
@@ -29,7 +29,7 @@ import { WIDGET_MIMETYPE, WidgetLabRenderer, WidgetManager, } from '../../jupyte
 import { newUuid, remoteUserCursors } from '../../utils';
 import { Lumino } from '../lumino';
 import { Loader } from '../utils';
-import { addNotebookCommands } from './NotebookCommands';
+import { addNotebookCommands, NotebookPanelProvider } from './NotebookCommands';
 import { Notebook2Adapter } from './Notebook2Adapter';
 import { notebookStore2 } from './Notebook2State';
 const COMPLETER_TIMEOUT_MILLISECONDS = 1000;
@@ -64,11 +64,6 @@ function generateInlineProviderSettings(providers) {
  * This component is not connected to any React stores.
  */
 export function Notebook2Base(props) {
-    console.log('[Notebook2Base] Component rendering with props:', {
-        hasInlineProviders: !!props.inlineProviders,
-        inlineProvidersCount: props.inlineProviders?.length,
-        inlineProviders: props.inlineProviders,
-    });
     const { commands, extensions = DEFAULT_EXTENSIONS, kernelId, renderers, serviceManager, model, onSessionConnection, } = props;
     const [isLoading, setIsLoading] = useState(true);
     const [extensionComponents, setExtensionComponents] = useState(new Array());
@@ -81,12 +76,10 @@ export function Notebook2Base(props) {
         editorFactory: features.editorServices.factoryService.newInlineEditor,
     }), [features.editorServices.factoryService.newInlineEditor]);
     useEffect(() => {
-        console.log('[Notebook2Base] Setting up completer with inlineProviders:', props.inlineProviders);
         const completer = new Completer({ model: new CompleterModel() });
         // Dummy widget to initialize
         const widget = new Widget();
         const inlineProvidersSettings = generateInlineProviderSettings(props.inlineProviders);
-        console.log('[Notebook2Base] Generated settings for providers:', inlineProvidersSettings);
         const reconciliator = new ProviderReconciliator({
             context: {
                 widget,
@@ -96,12 +89,9 @@ export function Notebook2Base(props) {
             inlineProvidersSettings,
             timeout: COMPLETER_TIMEOUT_MILLISECONDS,
         });
-        console.log('[Notebook2Base] ProviderReconciliator created with inlineProviders:', props.inlineProviders);
-        console.log('[Notebook2Base] ProviderReconciliator object:', reconciliator);
         // Create InlineCompleter widget if inline providers are configured
         let inlineCompleter;
         if (props.inlineProviders && props.inlineProviders.length > 0) {
-            console.log('[Notebook2Base] Creating InlineCompleter widget');
             const trans = nullTranslator.load('jupyterlab');
             inlineCompleter = new InlineCompleter({
                 model: new InlineCompleter.Model(),
@@ -136,7 +126,6 @@ export function Notebook2Base(props) {
                     if (inlineCompleter &&
                         inlineCompleter.model &&
                         inlineCompleter.current) {
-                        console.log('[Notebook2Base] Tab pressed - accepting inline completion');
                         event.preventDefault();
                         event.stopPropagation();
                         inlineCompleter.accept();
@@ -148,7 +137,6 @@ export function Notebook2Base(props) {
                     if (inlineCompleter &&
                         inlineCompleter.model &&
                         inlineCompleter.current) {
-                        console.log('[Notebook2Base] Escape pressed - rejecting inline completion');
                         event.preventDefault();
                         event.stopPropagation();
                         inlineCompleter.model.reset();
@@ -161,7 +149,6 @@ export function Notebook2Base(props) {
             const cleanupKeyboard = () => {
                 document.removeEventListener('keydown', handleKeyDown, true);
             };
-            console.log('[Notebook2Base] InlineCompleter created, configured, attached, and keyboard handlers set up');
             // Store the cleanup function on the inlineCompleter for later cleanup
             inlineCompleter._keyboardCleanup = cleanupKeyboard;
         }
@@ -213,6 +200,8 @@ export function Notebook2Base(props) {
             setWidgetFactory(factory => (factory === thisFactory ? null : factory));
         };
     }, [contentFactory, features]);
+    // Panel provider - persists across React re-renders to avoid tracker.currentWidget becoming null
+    const panelProvider = useMemo(() => new NotebookPanelProvider(), []);
     // Tracker & commands.
     const [tracker, setTracker] = useState(null);
     useEffect(() => {
@@ -220,7 +209,7 @@ export function Notebook2Base(props) {
             ? new NotebookTracker({ namespace: id })
             : null;
         const commands = completer
-            ? addNotebookCommands(features.commands, completer, thisTracker, props.path)
+            ? addNotebookCommands(features.commands, completer, thisTracker, panelProvider, props.path)
             : null;
         setTracker(thisTracker);
         return () => {
@@ -228,7 +217,7 @@ export function Notebook2Base(props) {
             thisTracker?.dispose();
             setTracker(tracker => (tracker === thisTracker ? null : tracker));
         };
-    }, [completer, id, features.commands, props.path]);
+    }, [completer, id, features.commands, props.path, panelProvider]);
     // Context
     const [context, setContext] = useState(null);
     useEffect(() => {
@@ -271,6 +260,8 @@ export function Notebook2Base(props) {
         if (context) {
             thisPanel = widgetFactory?.createNew(context) ?? null;
             if (thisPanel) {
+                // Update panel provider with persistent references
+                panelProvider.setPanel(thisPanel, context);
                 // Create the adapter
                 thisAdapter = new Notebook2Adapter(features.commands, thisPanel, context);
                 setAdapter(thisAdapter);
@@ -314,6 +305,8 @@ export function Notebook2Base(props) {
             setAdapter(null);
         }
         return () => {
+            // Clear panel provider to avoid stale references
+            panelProvider.setPanel(null, null);
             widgetsManager?.dispose();
             if (thisAdapter) {
                 thisAdapter.dispose();
@@ -332,22 +325,16 @@ export function Notebook2Base(props) {
             setPanel(panel => (panel === thisPanel ? null : panel));
             setAdapter(adapter => (adapter === thisAdapter ? null : adapter));
         };
-    }, [context, extensions, features.commands, widgetFactory]);
+    }, [context, extensions, features.commands, widgetFactory, panelProvider]);
     // Update notebook store when adapter changes
     useEffect(() => {
         if (adapter) {
-            console.log(`[Notebook2Base]  Registering adapter for notebook: ${id}`);
-            console.log(`[Notebook2Base] Adapter has getCells:`, typeof adapter.getCells);
-            console.log(`[Notebook2Base] Adapter cell count:`, adapter.getCellCount());
             const currentNotebooks = notebookStore2.getState().notebooks;
             const updatedNotebooks = new Map(currentNotebooks);
             updatedNotebooks.set(id, { adapter });
             notebookStore2.getState().setNotebooks2(updatedNotebooks);
-            console.log(`[Notebook2Base] Store now has ${updatedNotebooks.size} notebooks`);
-            console.log(`[Notebook2Base] Notebook IDs:`, Array.from(updatedNotebooks.keys()));
         }
         else {
-            console.log(`[Notebook2Base]   No adapter yet for notebook: ${id}`);
             const currentNotebooks = notebookStore2.getState().notebooks;
             if (currentNotebooks.has(id)) {
                 const updatedNotebooks = new Map(currentNotebooks);
@@ -386,13 +373,6 @@ export function Notebook2Base(props) {
                     const inlineProvidersSettings = generateInlineProviderSettings(props.inlineProviders);
                     // Create a dummy session if none exists to enable inline completions without a kernel
                     const sessionForCompletion = changes.newValue || {};
-                    console.log('[Notebook2Base] Creating ProviderReconciliator with editor and session', {
-                        hasEditor: !!editor,
-                        hasSession: !!changes.newValue,
-                        usingDummySession: !changes.newValue,
-                        inlineProviders: props.inlineProviders,
-                        inlineProvidersSettings,
-                    });
                     const reconciliator = new ProviderReconciliator({
                         context: {
                             widget: panel,
@@ -404,11 +384,9 @@ export function Notebook2Base(props) {
                         inlineProvidersSettings,
                         timeout: COMPLETER_TIMEOUT_MILLISECONDS,
                     });
-                    console.log('[Notebook2Base] ProviderReconciliator with editor created:', reconciliator);
                     // Update the inline completer's editor if it exists
                     if (completer.inlineCompleter) {
                         completer.inlineCompleter.editor = editor;
-                        console.log('[Notebook2Base] Updated InlineCompleter editor');
                     }
                     completer.editor = editor;
                     completer.reconciliator = reconciliator;
@@ -507,7 +485,6 @@ export function useKernelId(options = {}) {
                     }
                 }
                 if (!newKernelId && startDefaultKernel && isMounted) {
-                    console.log('Starting new kernel.');
                     connection = await kernels.startNew();
                     if (isMounted) {
                         newKernelId = connection.id;
@@ -525,7 +502,6 @@ export function useKernelId(options = {}) {
             isMounted = false;
             if (connection) {
                 // A new kernel was started
-                console.log(`Shutting down kernel '${connection.id}'.`);
                 connection
                     .shutdown()
                     .catch(reason => {
@@ -552,15 +528,6 @@ export function useKernelId(options = {}) {
  */
 export function useNotebookModel(options) {
     const { collaborationProvider, nbformat, readonly = false, url, path, serviceManager, id, } = options;
-    console.log('[useNotebookModel] Hook called with options:', {
-        hasCollaborationProvider: !!collaborationProvider,
-        hasNbformat: !!nbformat,
-        readonly,
-        hasUrl: !!url,
-        path,
-        hasServiceManager: !!serviceManager,
-        id,
-    });
     // Generate the notebook model
     // There are three posibilities (by priority order):
     // - Connection to a collaborative document
@@ -568,12 +535,10 @@ export function useNotebookModel(options) {
     // - Provided URL to fetch notebook content from
     const [model, setModel] = useState(null);
     useEffect(() => {
-        console.log('[useNotebookModel] useEffect running');
         let isMounted = true;
         const disposable = new DisposableSet();
         // Handle new collaboration provider
         if (collaborationProvider && serviceManager && id) {
-            console.log('[useNotebookModel] Setting up collaboration');
             const setupCollaboration = async () => {
                 try {
                     const sharedModel = new YNotebook();
@@ -583,14 +548,12 @@ export function useNotebookModel(options) {
                         path,
                     });
                     if (isMounted) {
-                        console.log('[useNotebookModel] Creating collaboration model');
                         const model = new NotebookModel({
                             collaborationEnabled: true,
                             disableDocumentWideUndoRedo: true,
                             sharedModel,
                         });
                         model.readOnly = readonly;
-                        console.log('[useNotebookModel] Calling setModel with collaboration model');
                         setModel(model);
                         disposable.add({
                             dispose: () => {
@@ -609,22 +572,16 @@ export function useNotebookModel(options) {
             setupCollaboration();
         }
         else {
-            console.log('[useNotebookModel] No collaboration, creating standard model');
             const createModel = (nbformat) => {
-                console.log('[useNotebookModel] createModel called with nbformat:', !!nbformat);
                 try {
                     const model = new NotebookModel();
-                    console.log('[useNotebookModel] NotebookModel created');
                     if (nbformat) {
                         nbformat.cells.forEach(cell => {
                             cell.metadata['editable'] = !readonly;
                         });
-                        console.log('[useNotebookModel] About to call model.fromJSON');
                         model.fromJSON(nbformat);
-                        console.log('[useNotebookModel] model.fromJSON completed successfully');
                     }
                     model.readOnly = readonly;
-                    console.log('[useNotebookModel] Calling setModel with standard model');
                     setModel(model);
                 }
                 catch (error) {
@@ -633,7 +590,6 @@ export function useNotebookModel(options) {
                 }
             };
             if (!nbformat && url) {
-                console.log('[useNotebookModel] Loading from URL:', url);
                 loadFromUrl(url).then(nbformat => {
                     if (isMounted) {
                         createModel(nbformat);
@@ -641,7 +597,6 @@ export function useNotebookModel(options) {
                 });
             }
             else {
-                console.log('[useNotebookModel] Creating model directly (nbformat provided or no URL)');
                 createModel(nbformat);
             }
         }
@@ -658,7 +613,6 @@ export function useNotebookModel(options) {
         serviceManager,
         id,
     ]);
-    console.log('[useNotebookModel] Returning model:', !!model);
     return model;
 }
 async function loadFromUrl(url) {
@@ -875,14 +829,11 @@ function initializeContext(context, id, path, onSessionConnection, serverLess =
     // Connect signals
     context.sessionContext.sessionChanged.connect((_, args) => {
         const session = args.newValue;
-        console.log('Current Jupyter Session Connection.', session);
         onSessionConnection?.(session ?? undefined);
     });
     context.sessionContext.kernelChanged.connect((_, args) => {
         const kernelConnection = args.newValue;
-        console.log('Current Jupyter Kernel Connection.', kernelConnection);
         if (kernelConnection && !kernelConnection.handleComms) {
-            console.log('Updating the current Kernel Connection to enforce Comms support.', kernelConnection.handleComms);
             kernelConnection.handleComms = true;
         }
     });
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js.map
index 53e3643..feeea96 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.js.map
@@ -1 +1 @@
-{"version":3,"file":"Notebook2Base.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2Base.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Notebook2Base.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2Base.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.tsx.bak b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.tsx.bak
new file mode 100644
index 0000000..70e06fb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2Base.tsx.bak
@@ -0,0 +1,1375 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+import { useEffect, useMemo, useState } from 'react';
+import type { ISessionContext } from '@jupyterlab/apputils';
+import type { Cell, CodeCell, ICellModel } from '@jupyterlab/cells';
+import { type IEditorServices } from '@jupyterlab/codeeditor';
+import {
+  CodeMirrorEditorFactory,
+  CodeMirrorMimeTypeService,
+  EditorExtensionRegistry,
+  EditorLanguageRegistry,
+  EditorThemeRegistry,
+  ybinding,
+} from '@jupyterlab/codemirror';
+import {
+  Completer,
+  CompleterModel,
+  CompletionHandler,
+  InlineCompleter,
+  KernelCompleterProvider,
+  ProviderReconciliator,
+  type IInlineCompletionProvider,
+} from '@jupyterlab/completer';
+import { nullTranslator } from '@jupyterlab/translation';
+import { PathExt, type IChangedArgs } from '@jupyterlab/coreutils';
+import { Context, type DocumentRegistry } from '@jupyterlab/docregistry';
+import { rendererFactory as javascriptRendererFactory } from '@jupyterlab/javascript-extension';
+import { rendererFactory as jsonRendererFactory } from '@jupyterlab/json-extension';
+import { createMarkdownParser } from '@jupyterlab/markedparser-extension';
+import { MathJaxTypesetter } from '@jupyterlab/mathjax-extension';
+import type { INotebookContent } from '@jupyterlab/nbformat';
+import {
+  NotebookModel,
+  NotebookModelFactory,
+  NotebookPanel,
+  NotebookTracker,
+  NotebookWidgetFactory,
+  StaticNotebook,
+  type INotebookModel,
+  type Notebook,
+} from '@jupyterlab/notebook';
+import {
+  RenderMimeRegistry,
+  standardRendererFactories,
+  type IRenderMime,
+} from '@jupyterlab/rendermime';
+import type {
+  Contents,
+  Kernel,
+  ServiceManager,
+  Session,
+  SessionManager,
+} from '@jupyterlab/services';
+import type { ISessionConnection } from '@jupyterlab/services/lib/session/session';
+import { YNotebook, type ISharedNotebook, type IYText } from '@jupyter/ydoc';
+import { find } from '@lumino/algorithm';
+import { CommandRegistry } from '@lumino/commands';
+import { DisposableSet } from '@lumino/disposable';
+import { Signal } from '@lumino/signaling';
+import { Widget } from '@lumino/widgets';
+import { Box } from '@datalayer/primer-addons';
+import { Banner } from '@primer/react/experimental';
+import { EditorView } from 'codemirror';
+import {
+  ICollaborationProvider,
+  WIDGET_MIMETYPE,
+  WidgetLabRenderer,
+  WidgetManager,
+} from '../../jupyter';
+import type { OnSessionConnection } from '../../state';
+import { newUuid, remoteUserCursors } from '../../utils';
+import { Lumino } from '../lumino';
+import { Loader } from '../utils';
+import type { NotebookExtension } from './NotebookExtensions';
+import { addNotebookCommands, NotebookPanelProvider } from './NotebookCommands';
+import { Notebook2Adapter } from './Notebook2Adapter';
+import { notebookStore2 } from './Notebook2State';
+
+const COMPLETER_TIMEOUT_MILLISECONDS = 1000;
+
+const DEFAULT_EXTENSIONS = new Array<NotebookExtension>();
+
+const FALLBACK_NOTEBOOK_PATH = '.datalayer/ping.ipynb';
+
+/**
+ * Generate settings for inline completion providers.
+ * Each provider needs to be explicitly enabled with settings.
+ */
+function generateInlineProviderSettings(
+  providers: IInlineCompletionProvider[] | undefined
+): Record<string, any> {
+  const settings: Record<string, any> = {};
+  if (providers) {
+    providers.forEach(provider => {
+      const providerSchema = provider.schema?.default as any;
+      settings[provider.identifier] = {
+        enabled: true,
+        debouncerDelay: providerSchema?.debouncerDelay ?? 200,
+        timeout: providerSchema?.timeout ?? 15000,
+        autoFillInMiddle: true,
+      };
+    });
+  }
+  return settings;
+}
+
+/**
+ * Base notebook component properties
+ */
+export interface INotebook2BaseProps {
+  /**
+   * Custom command registry.
+   *
+   * Note:
+   * Providing it allows to command the component from an higher level.
+   */
+  commands?: CommandRegistry;
+  /**
+   * Notebook ID
+   */
+  id?: string;
+  /**
+   * Notebook extensions
+   */
+  extensions?: NotebookExtension[];
+  /**
+   * Kernel ID to connect to
+   */
+  kernelId?: string;
+  /**
+   * Additional cell output renderers.
+   */
+  renderers?: IRenderMime.IRendererFactory[];
+  /**
+   * Service manager
+   */
+  serviceManager?: ServiceManager.IManager;
+  /**
+   * Notebook content model
+   */
+  model: NotebookModel;
+  /**
+   * Callback on session connection changed
+   */
+  onSessionConnection?: OnSessionConnection;
+  /**
+   * Notebook path
+   *
+   * Set this only if you use Jupyter Server to fetch
+   * and save the content.
+   */
+  path?: string;
+  /**
+   * Custom inline completion providers.
+   *
+   * Platform-specific providers can be injected here (e.g., VS Code LLM, custom AI models).
+   */
+  inlineProviders?: IInlineCompletionProvider[];
+}
+
+/**
+ * Base notebook component
+ *
+ * The notebook model and kernel lifecycle is not handled by
+ * this component.
+ *
+ * Important
+ * This component is not connected to any React stores.
+ */
+export function Notebook2Base(props: INotebook2BaseProps): JSX.Element {
+  console.log('[Notebook2Base] Component rendering with props:', {
+    hasInlineProviders: !!props.inlineProviders,
+    inlineProvidersCount: props.inlineProviders?.length,
+    inlineProviders: props.inlineProviders,
+  });
+
+  const {
+    commands,
+    extensions = DEFAULT_EXTENSIONS,
+    kernelId,
+    renderers,
+    serviceManager,
+    model,
+    onSessionConnection,
+  } = props;
+
+  const [isLoading, setIsLoading] = useState(true);
+  const [extensionComponents, setExtensionComponents] = useState(
+    new Array<JSX.Element>()
+  );
+  const [completer, setCompleter] = useState<CompletionHandler | null>(null);
+  const [adapter, setAdapter] = useState<Notebook2Adapter | null>(null);
+
+  const id = useMemo(() => props.id || newUuid(), [props.id]);
+  const path = useMemo(
+    () => props.path || FALLBACK_NOTEBOOK_PATH,
+    [props.path]
+  );
+  const features = useMemo(
+    () => new CommonFeatures({ commands, renderers }),
+    [commands, renderers]
+  );
+  const contentFactory = useMemo(
+    () =>
+      new NotebookPanel.ContentFactory({
+        editorFactory: features.editorServices.factoryService.newInlineEditor,
+      }),
+    [features.editorServices.factoryService.newInlineEditor]
+  );
+
+  useEffect(() => {
+    console.log(
+      '[Notebook2Base] Setting up completer with inlineProviders:',
+      props.inlineProviders
+    );
+    const completer = new Completer({ model: new CompleterModel() });
+    // Dummy widget to initialize
+    const widget = new Widget();
+
+    const inlineProvidersSettings = generateInlineProviderSettings(
+      props.inlineProviders
+    );
+    console.log(
+      '[Notebook2Base] Generated settings for providers:',
+      inlineProvidersSettings
+    );
+
+    const reconciliator = new ProviderReconciliator({
+      context: {
+        widget,
+      },
+      providers: [new KernelCompleterProvider()],
+      inlineProviders: props.inlineProviders,
+      inlineProvidersSettings,
+      timeout: COMPLETER_TIMEOUT_MILLISECONDS,
+    });
+    console.log(
+      '[Notebook2Base] ProviderReconciliator created with inlineProviders:',
+      props.inlineProviders
+    );
+
+    // Create InlineCompleter widget if inline providers are configured
+    let inlineCompleter: InlineCompleter | undefined;
+    if (props.inlineProviders && props.inlineProviders.length > 0) {
+      const trans = nullTranslator.load('jupyterlab');
+      inlineCompleter = new InlineCompleter({
+        model: new InlineCompleter.Model(),
+        trans,
+      });
+
+      // Configure inline completer settings
+      const providerSettings: any = {};
+      props.inlineProviders?.forEach(provider => {
+        providerSettings[provider.identifier] = { enabled: true };
+      });
+
+      inlineCompleter.configure({
+        showWidget: 'always',
+        showShortcuts: true,
+        streamingAnimation: 'none',
+        suppressIfTabCompleterActive: false,
+        minLines: 1,
+        maxLines: 10,
+        editorResizeDelay: 250,
+        reserveSpaceForLongest: false,
+        providers: providerSettings,
+      });
+
+      Widget.attach(inlineCompleter, document.body);
+
+      // Set up keyboard shortcut for accepting inline completions
+      // Tab key should accept the current suggestion
+      const handleKeyDown = (event: KeyboardEvent) => {
+        if (
+          event.key === 'Tab' &&
+          !event.shiftKey &&
+          !event.ctrlKey &&
+          !event.metaKey &&
+          !event.altKey
+        ) {
+          // Check if there's an active inline completion
+          if (
+            inlineCompleter &&
+            inlineCompleter.model &&
+            inlineCompleter.current
+          ) {
+            console.log(
+              '[Notebook2Base] Tab pressed - accepting inline completion'
+            );
+            event.preventDefault();
+            event.stopPropagation();
+            inlineCompleter.accept();
+            return false;
+          }
+        }
+        // Escape to reject
+        if (event.key === 'Escape') {
+          if (
+            inlineCompleter &&
+            inlineCompleter.model &&
+            inlineCompleter.current
+          ) {
+            console.log(
+              '[Notebook2Base] Escape pressed - rejecting inline completion'
+            );
+            event.preventDefault();
+            event.stopPropagation();
+            inlineCompleter.model.reset();
+            return false;
+          }
+        }
+      };
+
+      document.addEventListener('keydown', handleKeyDown, true);
+
+      // Store cleanup function for keyboard handler
+      const cleanupKeyboard = () => {
+        document.removeEventListener('keydown', handleKeyDown, true);
+      };
+
+      console.log(
+        '[Notebook2Base] InlineCompleter created, configured, attached, and keyboard handlers set up'
+      );
+
+      // Store the cleanup function on the inlineCompleter for later cleanup
+      (inlineCompleter as any)._keyboardCleanup = cleanupKeyboard;
+    }
+
+    const handler = new CompletionHandler({
+      completer,
+      reconciliator,
+      inlineCompleter,
+    });
+    completer.hide();
+    Widget.attach(completer, document.body);
+    setCompleter(handler);
+    return () => {
+      handler.dispose();
+      completer.dispose();
+      if (inlineCompleter) {
+        // Clean up keyboard listeners
+        if ((inlineCompleter as any)._keyboardCleanup) {
+          (inlineCompleter as any)._keyboardCleanup();
+        }
+        inlineCompleter.dispose();
+      }
+      widget.dispose();
+    };
+  }, [props.inlineProviders]);
+
+  // Widget factory.
+  const [widgetFactory, setWidgetFactory] =
+    useState<NotebookWidgetFactory | null>(null);
+
+  useEffect(() => {
+    const thisFactory = new NotebookWidgetFactory({
+      name: 'Notebook',
+      label: 'Notebook',
+      modelName: 'notebook',
+      fileTypes: ['notebook'],
+      defaultFor: ['notebook'],
+      preferKernel: true,
+      autoStartDefault: false,
+      canStartKernel: false,
+      shutdownOnClose: false,
+      rendermime: features.rendermime,
+      contentFactory,
+      mimeTypeService: features.editorServices.mimeTypeService,
+      notebookConfig: {
+        ...StaticNotebook.defaultNotebookConfig,
+        recordTiming: true,
+      },
+    });
+    setWidgetFactory(thisFactory);
+    return () => {
+      thisFactory.dispose();
+      setWidgetFactory(factory => (factory === thisFactory ? null : factory));
+    };
+  }, [contentFactory, features]);
+
+  // Panel provider - persists across React re-renders to avoid tracker.currentWidget becoming null
+  const panelProvider = useMemo(() => new NotebookPanelProvider(), []);
+
+  // Tracker & commands.
+  const [tracker, setTracker] = useState<NotebookTracker | null>(null);
+  useEffect(() => {
+    const thisTracker = completer
+      ? new NotebookTracker({ namespace: id })
+      : null;
+    const commands = completer
+      ? addNotebookCommands(
+          features.commands,
+          completer,
+          thisTracker!,
+          panelProvider,
+          props.path
+        )
+      : null;
+    setTracker(thisTracker);
+    return () => {
+      commands?.dispose();
+      thisTracker?.dispose();
+      setTracker(tracker => (tracker === thisTracker ? null : tracker));
+    };
+  }, [completer, id, features.commands, props.path, panelProvider]);
+
+  // Context
+  const [context, setContext] = useState<Context<NotebookModel> | null>(null);
+  useEffect(() => {
+    const factory = new DummyModelFactory(model);
+    const thisContext = new Context<NotebookModel>({
+      factory,
+      manager: serviceManager ?? (new NoServiceManager() as any),
+      path,
+      kernelPreference: {
+        shouldStart: false,
+        canStart: false,
+        autoStartDefault: false,
+        shutdownOnDispose: false,
+      },
+    });
+    initializeContext(
+      thisContext,
+      id,
+      // Initialization must not trigger revert in case we set up the model content
+      path !== FALLBACK_NOTEBOOK_PATH ? path : undefined,
+      onSessionConnection,
+      !serviceManager
+    );
+    setContext(thisContext);
+    return () => {
+      thisContext.dispose();
+      factory.dispose();
+      setContext(context => (context === thisContext ? null : context));
+    };
+  }, [id, serviceManager, model, onSessionConnection, path]);
+
+  // Set kernel
+  useEffect(() => {
+    if (context && kernelId && !context.sessionContext.isDisposed) {
+      context.sessionContext.changeKernel({ id: kernelId }).catch(reason => {
+        console.error('Failed to change kernel model.', reason);
+      });
+    }
+  }, [context, kernelId]);
+
+  // Notebook
+  const [panel, setPanel] = useState<NotebookPanel | null>(null);
+  useEffect(() => {
+    let thisPanel: NotebookPanel | null = null;
+    let thisAdapter: Notebook2Adapter | null = null;
+    let widgetsManager: WidgetManager | null = null;
+    if (context) {
+      thisPanel = widgetFactory?.createNew(context) ?? null;
+      if (thisPanel) {
+        // Update panel provider with persistent references
+        panelProvider.setPanel(thisPanel, context);
+
+        // Create the adapter
+        thisAdapter = new Notebook2Adapter(
+          features.commands,
+          thisPanel,
+          context
+        );
+        setAdapter(thisAdapter);
+
+        setExtensionComponents(
+          extensions.map(extension => {
+            extension.init({
+              notebookId: id,
+              commands: features.commands,
+              panel: thisPanel!,
+            });
+            extension.createNew(thisPanel!, context);
+            return extension.component ?? <></>;
+          })
+        );
+
+        //-- Add ipywidgets renderer
+        const notebookRenderers = thisPanel.content.rendermime;
+        widgetsManager = new WidgetManager(context, notebookRenderers, {
+          saveState: false,
+        });
+        notebookRenderers.addFactory(
+          {
+            safe: true,
+            mimeTypes: [WIDGET_MIMETYPE],
+            defaultRank: 1,
+            createRenderer: options =>
+              new WidgetLabRenderer(options, widgetsManager!),
+          },
+          1
+        );
+        for (const cell of thisPanel.content.widgets) {
+          if (cell.model.type === 'code') {
+            for (const codecell of (cell as CodeCell).outputArea.widgets) {
+              for (const output of Array.from(codecell.children())) {
+                if (output instanceof WidgetLabRenderer) {
+                  output.manager = widgetsManager;
+                }
+              }
+            }
+          }
+        }
+
+        setIsLoading(false);
+      }
+    }
+    setPanel(thisPanel);
+    if (!thisPanel) {
+      setExtensionComponents([]);
+      setAdapter(null);
+    }
+
+    return () => {
+      // Clear panel provider to avoid stale references
+      panelProvider.setPanel(null, null);
+
+      widgetsManager?.dispose();
+      if (thisAdapter) {
+        thisAdapter.dispose();
+      }
+      if (thisPanel) {
+        if (thisPanel.content) {
+          Signal.clearData(thisPanel.content);
+        }
+        try {
+          thisPanel.dispose();
+        } catch (reason) {
+          // No-op
+        }
+      }
+      setPanel(panel => (panel === thisPanel ? null : panel));
+      setAdapter(adapter => (adapter === thisAdapter ? null : adapter));
+    };
+  }, [context, extensions, features.commands, widgetFactory, panelProvider]);
+
+  // Update notebook store when adapter changes
+  useEffect(() => {
+    if (adapter) {
+      console.log(
+        `[Notebook2Base] Adapter has getCells:`,
+        typeof adapter.getCells
+      );
+      console.log(
+        `[Notebook2Base] Adapter cell count:`,
+        adapter.getCellCount()
+      );
+      const currentNotebooks = notebookStore2.getState().notebooks;
+      const updatedNotebooks = new Map(currentNotebooks);
+      updatedNotebooks.set(id, { adapter });
+      notebookStore2.getState().setNotebooks2(updatedNotebooks);
+      console.log(
+        `[Notebook2Base] Store now has ${updatedNotebooks.size} notebooks`
+      );
+      console.log(
+        `[Notebook2Base] Notebook IDs:`,
+        Array.from(updatedNotebooks.keys())
+      );
+    } else {
+      const currentNotebooks = notebookStore2.getState().notebooks;
+      if (currentNotebooks.has(id)) {
+        const updatedNotebooks = new Map(currentNotebooks);
+        updatedNotebooks.delete(id);
+        notebookStore2.getState().setNotebooks2(updatedNotebooks);
+      }
+    }
+  }, [adapter, id]);
+
+  useEffect(() => {
+    let isMounted = true;
+    let onActiveCellChanged:
+      | ((notebook: Notebook, cell: Cell<ICellModel> | null) => void)
+      | null = null;
+    let onSessionChanged:
+      | ((
+          _: ISessionContext,
+          changes: IChangedArgs<
+            ISessionConnection | null,
+            ISessionConnection | null,
+            'session'
+          >
+        ) => void)
+      | null = null;
+    if (panel) {
+      if (tracker) {
+        if (!tracker.has(panel)) {
+          tracker.add(panel).catch(reason => {
+            console.error(`Failed to track the notebook panel '${id}'.`);
+          });
+        }
+      }
+
+      if (completer) {
+        // Setup the completer here as it requires the panel
+        onActiveCellChanged = (
+          notebook: Notebook,
+          cell: Cell<ICellModel> | null
+        ) => {
+          if (cell) {
+            cell.ready.then(() => {
+              completer.editor = cell?.editor;
+            });
+          }
+        };
+        onSessionChanged = (
+          _: ISessionContext,
+          changes: IChangedArgs<
+            ISessionConnection | null,
+            ISessionConnection | null,
+            'session'
+          >
+        ) => {
+          if (!isMounted) {
+            return;
+          }
+          const editor = panel.content.activeCell?.editor;
+          const provider = new KernelCompleterProvider();
+          const inlineProvidersSettings = generateInlineProviderSettings(
+            props.inlineProviders
+          );
+          // Create a dummy session if none exists to enable inline completions without a kernel
+          const sessionForCompletion = changes.newValue || ({} as any);
+          console.log(
+            '[Notebook2Base] Creating ProviderReconciliator with editor and session',
+            {
+              hasEditor: !!editor,
+              hasSession: !!changes.newValue,
+              usingDummySession: !changes.newValue,
+              inlineProviders: props.inlineProviders,
+              inlineProvidersSettings,
+            }
+          );
+          const reconciliator = new ProviderReconciliator({
+            context: {
+              widget: panel,
+              editor,
+              session: sessionForCompletion,
+            },
+            providers: [provider],
+            inlineProviders: props.inlineProviders,
+            inlineProvidersSettings,
+            timeout: COMPLETER_TIMEOUT_MILLISECONDS,
+          });
+          console.log(
+            '[Notebook2Base] ProviderReconciliator with editor created:',
+            reconciliator
+          );
+
+          // Update the inline completer's editor if it exists
+          if (completer.inlineCompleter) {
+            completer.inlineCompleter.editor = editor;
+          }
+
+          completer.editor = editor;
+          completer.reconciliator = reconciliator;
+        };
+        panel.context.sessionContext.sessionChanged.connect(onSessionChanged);
+        panel.context.sessionContext.ready.then(() => {
+          onSessionChanged?.(panel.context.sessionContext, {
+            name: 'session',
+            oldValue: null,
+            newValue: panel.context.sessionContext.session,
+          });
+        });
+        panel.content.activeCellChanged.connect(onActiveCellChanged);
+      }
+    }
+
+    return () => {
+      isMounted = false;
+      // Reset the completer
+      if (completer) {
+        if (onActiveCellChanged) {
+          panel?.content.activeCellChanged.disconnect(onActiveCellChanged);
+        }
+        if (onSessionChanged) {
+          panel?.context.sessionContext.sessionChanged.connect(
+            onSessionChanged
+          );
+        }
+        completer.editor = null;
+        const inlineProvidersSettings = generateInlineProviderSettings(
+          props.inlineProviders
+        );
+        completer.reconciliator = new ProviderReconciliator({
+          context: {
+            widget: new Widget(),
+          },
+          providers: [new KernelCompleterProvider()],
+          inlineProviders: props.inlineProviders,
+          inlineProvidersSettings,
+          timeout: COMPLETER_TIMEOUT_MILLISECONDS,
+        });
+      }
+    };
+  }, [completer, panel, tracker]);
+
+  useEffect(() => {
+    const onKeyDown = (event: any) => {
+      features.commands.processKeydownEvent(event);
+    };
+    // FIXME It would be better to add the listener to the Box wrapping the panel
+    // but this requires the use of the latest version of JupyterLab/Lumino that
+    // capture event at bubbling phase for keyboard shortcuts rather than at capture phase.
+    document.addEventListener('keydown', onKeyDown, true);
+    return () => {
+      document.removeEventListener('keydown', onKeyDown, true);
+    };
+  }, [features.commands]);
+
+  // Cleanup notebook from store on unmount
+  useEffect(() => {
+    return () => {
+      const currentNotebooks = notebookStore2.getState().notebooks;
+      if (currentNotebooks.has(id)) {
+        const updatedNotebooks = new Map(currentNotebooks);
+        updatedNotebooks.delete(id);
+        notebookStore2.getState().setNotebooks2(updatedNotebooks);
+      }
+    };
+  }, [id]);
+
+  return (
+    <>
+      {extensionComponents.map((extensionComponent, index) => {
+        return (
+          <Box key={`${extensionComponent}-${index}`}>{extensionComponent}</Box>
+        );
+      })}
+      {isLoading ? (
+        <Loader key="notebook-loader" />
+      ) : panel ? (
+        <Box sx={{ height: '100%' }}>
+          <Lumino id={id} key="notebook-container">
+            {panel}
+          </Lumino>
+        </Box>
+      ) : (
+        <Banner
+          key="notebook-error"
+          variant="critical"
+          description="Unable to create the notebook view."
+          hideTitle
+          title="Error"
+        />
+      )}
+    </>
+  );
+}
+
+/**
+ * Get the kernel ID to connect to.
+ *
+ * Steps:
+ * - Check the requested kernel ID exists
+ * - If no kernel found, start a new one if required
+ *
+ * Note
+ * If the hook starts the kernel, it will shut it down when unmounting.
+ */
+export function useKernelId(
+  options:
+    | {
+        /**
+         * Kernels manager
+         */
+        kernels?: Kernel.IManager;
+        /**
+         * Kernel ID to connect to
+         *
+         * If the kernel does not exist and `startDefaultKernel` is `true`,
+         * another kernel will be started.
+         */
+        requestedKernelId?: string;
+        /**
+         * Whether or not to start a default kernel.
+         *
+         * Default: false
+         */
+        startDefaultKernel?: boolean;
+      }
+    | undefined = {}
+): string | undefined {
+  const { kernels, requestedKernelId, startDefaultKernel = false } = options;
+
+  // Define the kernel to be used.
+  // - Check the provided kernel id exists
+  // - If no kernel found, start a new one if required
+  const [kernelId, setKernelId] = useState<string | undefined>(undefined);
+  useEffect(() => {
+    let isMounted = true;
+    let connection: Kernel.IKernelConnection | undefined;
+    if (kernels) {
+      (async () => {
+        let newKernelId: string | undefined;
+        await kernels.ready;
+        if (requestedKernelId) {
+          for (const model of kernels.running()) {
+            if (model.id === requestedKernelId) {
+              newKernelId = requestedKernelId;
+              break;
+            }
+          }
+        }
+
+        if (!newKernelId && startDefaultKernel && isMounted) {
+          connection = await kernels.startNew();
+          if (isMounted) {
+            newKernelId = connection.id;
+          } else {
+            connection.dispose();
+          }
+        }
+
+        if (isMounted) {
+          setKernelId(newKernelId);
+        }
+      })();
+    }
+
+    return () => {
+      isMounted = false;
+      if (connection) {
+        // A new kernel was started
+        connection
+          .shutdown()
+          .catch(reason => {
+            console.warn(
+              `Failed to shutdown kernel '${connection?.id}'.`,
+              reason
+            );
+          })
+          .finally(() => {
+            connection?.dispose();
+          });
+      }
+    };
+  }, [kernels, requestedKernelId, startDefaultKernel]);
+
+  return kernelId;
+}
+
+export type IOptions = {
+  /**
+   * Collaboration provider for the notebook.
+   */
+  collaborationProvider?: ICollaborationProvider;
+  /**
+   * Notebook content.
+   */
+  nbformat?: INotebookContent;
+  /**
+   * Whether the model is read-only or not.
+   *
+   * Default: false
+   */
+  readonly?: boolean;
+  /**
+   * URL to fetch the notebook content from.
+   */
+  url?: string;
+  /**
+   * Path to the notebook file.
+   */
+  path?: string;
+  /**
+   * Service manager.
+   */
+  serviceManager?: ServiceManager.IManager;
+  /**
+   * Notebook ID.
+   */
+  id?: string;
+};
+
+/**
+ * Hook to handle a notebook model.
+ *
+ * The notebook content may come from 3 sources:
+ * - `nbformat`: The notebook content
+ * - `url`: A URL to fetch the notebook content from
+ * - `collaborationProvider`: A collaboration provider for real-time editing
+ *
+ * @param options - Configuration options for the notebook model
+ * @returns The notebook model or null if not yet initialized
+ */
+export function useNotebookModel(options: IOptions): NotebookModel | null {
+  const {
+    collaborationProvider,
+    nbformat,
+    readonly = false,
+    url,
+    path,
+    serviceManager,
+    id,
+  } = options;
+
+  console.log('[useNotebookModel] Hook called with options:', {
+    hasCollaborationProvider: !!collaborationProvider,
+    hasNbformat: !!nbformat,
+    readonly,
+    hasUrl: !!url,
+    path,
+    hasServiceManager: !!serviceManager,
+    id,
+  });
+
+  // Generate the notebook model
+  // There are three posibilities (by priority order):
+  // - Connection to a collaborative document
+  // - Provided notebook content
+  // - Provided URL to fetch notebook content from
+  const [model, setModel] = useState<NotebookModel | null>(null);
+
+  useEffect(() => {
+    let isMounted = true;
+    const disposable = new DisposableSet();
+
+    // Handle new collaboration provider
+    if (collaborationProvider && serviceManager && id) {
+      const setupCollaboration = async () => {
+        try {
+          const sharedModel = new YNotebook();
+
+          // Connect to the collaboration provider
+          await collaborationProvider.connect(sharedModel, id, {
+            serviceManager,
+            path,
+          });
+
+          if (isMounted) {
+            const model = new NotebookModel({
+              collaborationEnabled: true,
+              disableDocumentWideUndoRedo: true,
+              sharedModel,
+            });
+            model.readOnly = readonly;
+            console.log(
+              '[useNotebookModel] Calling setModel with collaboration model'
+            );
+            setModel(model);
+
+            disposable.add({
+              dispose: () => {
+                collaborationProvider.disconnect();
+              },
+              get isDisposed() {
+                return false;
+              },
+            });
+          }
+        } catch (error) {
+          console.error('Failed to setup collaboration:', error);
+        }
+      };
+
+      setupCollaboration();
+    } else {
+      console.log(
+        '[useNotebookModel] No collaboration, creating standard model'
+      );
+      const createModel = (nbformat: INotebookContent | undefined) => {
+        console.log(
+          '[useNotebookModel] createModel called with nbformat:',
+          !!nbformat
+        );
+        try {
+          const model = new NotebookModel();
+          if (nbformat) {
+            nbformat.cells.forEach(cell => {
+              cell.metadata['editable'] = !readonly;
+            });
+            model.fromJSON(nbformat);
+            console.log(
+              '[useNotebookModel] model.fromJSON completed successfully'
+            );
+          }
+          model.readOnly = readonly;
+          console.log(
+            '[useNotebookModel] Calling setModel with standard model'
+          );
+          setModel(model);
+        } catch (error) {
+          console.error('[useNotebookModel] Error creating model:', error);
+          throw error;
+        }
+      };
+
+      if (!nbformat && url) {
+        loadFromUrl(url).then(nbformat => {
+          if (isMounted) {
+            createModel(nbformat);
+          }
+        });
+      } else {
+        console.log(
+          '[useNotebookModel] Creating model directly (nbformat provided or no URL)'
+        );
+        createModel(nbformat);
+      }
+    }
+
+    return () => {
+      isMounted = false;
+      disposable.dispose();
+    };
+  }, [
+    collaborationProvider,
+    nbformat,
+    readonly,
+    url,
+    path,
+    serviceManager,
+    id,
+  ]);
+
+  return model;
+}
+
+async function loadFromUrl(url: string) {
+  return fetch(url)
+    .then(response => {
+      return response.text();
+    })
+    .then(nb => {
+      return JSON.parse(nb);
+    });
+}
+
+/**
+ * Common immutable JupyterLab features required for the notebook panel.
+ */
+class CommonFeatures {
+  protected _commands: CommandRegistry;
+  protected _editorServices: IEditorServices;
+  protected _rendermime: RenderMimeRegistry;
+
+  constructor(
+    options: {
+      commands?: CommandRegistry;
+      renderers?: IRenderMime.IRendererFactory[];
+    } = {}
+  ) {
+    this._commands = options.commands ?? new CommandRegistry();
+
+    const languages = new EditorLanguageRegistry();
+    // Register default languages.
+    for (const language of EditorLanguageRegistry.getDefaultLanguages()) {
+      languages.addLanguage(language);
+    }
+    // Add Jupyter Markdown flavor here to support code block highlighting.
+    languages.addLanguage({
+      name: 'ipythongfm',
+      mime: 'text/x-ipythongfm',
+      load: async () => {
+        // TODO: add support for LaTeX.
+        const m = await import('@codemirror/lang-markdown');
+        return m.markdown({
+          codeLanguages: (info: string) => languages.findBest(info) as any,
+        });
+      },
+    });
+
+    const initialFactories = standardRendererFactories
+      .filter(factory => factory.mimeTypes[0] !== 'text/javascript')
+      .concat([jsonRendererFactory, javascriptRendererFactory])
+      .concat(options.renderers ?? []);
+
+    this._rendermime = new RenderMimeRegistry({
+      initialFactories,
+      latexTypesetter: new MathJaxTypesetter(),
+      markdownParser: createMarkdownParser(languages),
+    });
+
+    const mimeTypeService = new CodeMirrorMimeTypeService(languages);
+
+    const themes = new EditorThemeRegistry();
+    for (const theme of EditorThemeRegistry.getDefaultThemes()) {
+      themes.addTheme(theme);
+    }
+
+    const editorExtensions = new EditorExtensionRegistry();
+    for (const extensionFactory of EditorExtensionRegistry.getDefaultExtensions(
+      { themes }
+    )) {
+      editorExtensions.addExtension(extensionFactory);
+    }
+    editorExtensions.addExtension({
+      name: 'shared-model-binding',
+      factory: options => {
+        const sharedModel = options.model.sharedModel as IYText;
+        return EditorExtensionRegistry.createImmutableExtension(
+          ybinding({
+            ytext: sharedModel.ysource,
+            undoManager: sharedModel.undoManager ?? undefined,
+          })
+        );
+      },
+    });
+    editorExtensions.addExtension({
+      name: 'remote-user-cursors',
+      factory(options) {
+        const { awareness, ysource: ytext } = options.model.sharedModel as any;
+        return EditorExtensionRegistry.createImmutableExtension(
+          remoteUserCursors({ awareness, ytext })
+        );
+      },
+    });
+    // Fix to deal with Content Security Policy
+    const nonce = getNonce();
+    if (nonce) {
+      editorExtensions.addExtension({
+        name: 'csp-nonce',
+        factory() {
+          return EditorExtensionRegistry.createImmutableExtension(
+            EditorView.cspNonce.of(nonce)
+          );
+        },
+      });
+    }
+
+    const factoryService = new CodeMirrorEditorFactory({
+      extensions: editorExtensions,
+      languages: languages,
+    });
+    this._editorServices = {
+      factoryService,
+      mimeTypeService,
+    };
+  }
+
+  get commands(): CommandRegistry {
+    return this._commands;
+  }
+
+  get editorServices(): IEditorServices {
+    return this._editorServices;
+  }
+
+  get rendermime(): RenderMimeRegistry {
+    return this._rendermime;
+  }
+}
+
+/**
+ * Dummy notebook factory
+ *
+ * It returns the provided notebook model.
+ */
+class DummyModelFactory extends NotebookModelFactory {
+  constructor(protected model: NotebookModel) {
+    super();
+  }
+
+  createNew(
+    options?: DocumentRegistry.IModelOptions<ISharedNotebook>
+  ): NotebookModel {
+    return this.model;
+  }
+}
+
+function initializeContext(
+  context: Context,
+  id: string,
+  path?: string,
+  onSessionConnection?: OnSessionConnection,
+  serverLess: boolean = false
+) {
+  const shuntContentManager = path ? false : true;
+
+  // TODO we should implement our own thing rather this ugly Javascript patch.
+  // These are fixes on the Context and the SessionContext to have more control on the kernel launch.
+  (context.sessionContext as any)._initialize = async (): Promise<boolean> => {
+    const manager = context.sessionContext.sessionManager as SessionManager;
+    await manager.ready;
+    await manager.refreshRunning();
+    const model = find(manager.running(), model => {
+      // !! we need to set the kernelPreference id
+      return (
+        model.kernel?.id === (context.sessionContext.kernelPreference.id ?? '')
+      );
+    });
+    if (model) {
+      try {
+        const session = manager.connectTo({
+          model: {
+            ...model,
+            path: path ?? model.path,
+            name: path ?? model.name,
+          },
+          kernelConnectionOptions: {
+            handleComms: true,
+          },
+        });
+        (context!.sessionContext as any)._handleNewSession(session);
+        // Dispose the previous KernelConnection to avoid errors with Comms.
+        this._kernel?.connection?.dispose();
+      } catch (err) {
+        void (context!.sessionContext as any)._handleSessionError(err);
+        return Promise.reject(err);
+      }
+    }
+    return await (context!.sessionContext as any)._startIfNecessary();
+  };
+
+  // Custom dispose that does not dispose the model
+  (context as any).dispose = (): void => {
+    if (context.isDisposed) {
+      return;
+    }
+    (context as any)._isDisposed = true;
+    context.sessionContext.dispose();
+    (context as any)._disposed.emit(void 0);
+    Signal.clearData(this);
+  };
+
+  if (shuntContentManager) {
+    // If nbformat is provided and we don't want to interact with the Content Manager.
+    (context as any)._populate = async (): Promise<void> => {
+      (context as any)._isPopulated = true;
+      (context as any)._isReady = true;
+      (context as any)._populatedPromise.resolve(void 0);
+      // Add a checkpoint if none exists and the file is writable.
+      // Force skip this step for nbformat notebooks.
+      // await (context as any)._maybeCheckpoint(false);
+      if (context.isDisposed) {
+        return;
+      }
+      // Update the kernel preference.
+      const name =
+        (context as any)._model.defaultKernelName ||
+        context.sessionContext.kernelPreference.name;
+      (context as any).sessionContext.kernelPreference = {
+        ...context.sessionContext.kernelPreference,
+        name,
+        language: (context as any)._model.defaultKernelLanguage,
+      };
+
+      if (!serverLess) {
+        // Note: we don't wait on the session to initialize
+        // so that the user can be shown the content before
+        // any kernel has started.
+        void context.sessionContext
+          .initialize()
+          .then((shouldSelect: boolean) => {
+            if (shouldSelect) {
+              void (context as any)._dialogs.selectKernel(
+                (context!.sessionContext as any).sessionContext
+              );
+            }
+          });
+      }
+    };
+    (context as any).initialize = async (isNew: boolean): Promise<void> => {
+      (context as Context<INotebookModel>).model.dirty = false;
+      const now = new Date().toISOString();
+      const model: Contents.IModel = {
+        path: id,
+        name: id,
+        type: 'notebook',
+        content: undefined,
+        writable: true,
+        created: now,
+        last_modified: now,
+        mimetype: 'application/x-ipynb+json',
+        format: 'json',
+      };
+      (context as any)._updateContentsModel(model);
+      await (context as any)._populate();
+      (context as Context<INotebookModel>).model.sharedModel.clearUndoHistory();
+    };
+  }
+
+  // Connect signals
+  context.sessionContext.sessionChanged.connect(
+    (
+      _,
+      args: IChangedArgs<
+        Session.ISessionConnection | null,
+        Session.ISessionConnection | null,
+        'session'
+      >
+    ) => {
+      const session = args.newValue;
+      onSessionConnection?.(session ?? undefined);
+    }
+  );
+  context.sessionContext.kernelChanged.connect(
+    (
+      _,
+      args: IChangedArgs<
+        Kernel.IKernelConnection | null,
+        Kernel.IKernelConnection | null,
+        'kernel'
+      >
+    ) => {
+      const kernelConnection = args.newValue;
+      if (kernelConnection && !kernelConnection.handleComms) {
+        console.log(
+          'Updating the current Kernel Connection to enforce Comms support.',
+          kernelConnection.handleComms
+        );
+        (kernelConnection as any).handleComms = true;
+      }
+    }
+  );
+  context.sessionContext.ready.then(() => {
+    onSessionConnection?.(context?.sessionContext.session ?? undefined);
+  });
+
+  // Initialize the context
+  context.initialize(path ? false : true);
+}
+
+/**
+ * Service manager facade for missing manager.
+ */
+class NoServiceManager {
+  readonly contents = Object.freeze({
+    fileChanged: { connect: () => {} },
+    getSharedModelFactory(path: string): null {
+      return null;
+    },
+    localPath(path: string): string {
+      const parts = path.split('/');
+      const firstParts = parts[0].split(':');
+      if (
+        firstParts.length === 1 ||
+        !this._additionalDrives.has(firstParts[0])
+      ) {
+        return PathExt.removeSlash(path);
+      }
+      return PathExt.join(firstParts.slice(1).join(':'), ...parts.slice(1));
+    },
+    normalize(path: string): string {
+      const parts = path.split(':');
+      if (parts.length === 1) {
+        return PathExt.normalize(path);
+      }
+      return `${parts[0]}:${PathExt.normalize(parts.slice(1).join(':'))}`;
+    },
+  });
+
+  readonly kernelspecs = Object.freeze({
+    // Ever hanging promise.
+    ready: new Promise(() => {}),
+  });
+
+  readonly sessions = Object.freeze({
+    // Ever hanging promise.
+    ready: new Promise(() => {}),
+  });
+
+  // Always ready otherwise the spinner in the MainAreaWidget won't be discarded.
+  readonly ready = Promise.resolve();
+}
+
+/**
+ * Returns the nonce used in the page, if any.
+ *
+ * Based on https://github.com/cssinjs/jss/blob/master/packages/jss/src/DomRenderer.js
+ */
+function getNonce() {
+  const node = document.querySelector('meta[property="csp-nonce"]');
+  if (node) {
+    return node.getAttribute('content');
+  } else {
+    return null;
+  }
+}
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.d.ts b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.d.ts
index 04dfb19..89f6cd2 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.d.ts
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.d.ts
@@ -41,6 +41,7 @@ export type Notebook2State = INotebooks2State & {
         outputs?: Array<string>;
     } | undefined>;
     runAllCells: (id: string) => void;
+    clearAllOutputs: (id: string) => void;
     run: (id: string) => void;
     runAll: (id: string) => void;
     interrupt: (id: string) => void;
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js
index 78c4d3e..4768f69 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js
@@ -76,6 +76,9 @@ export const notebookStore2 = createStore((set, get) => ({
         const params = typeof id === 'object' ? id : { id };
         get().notebooks.get(params.id)?.adapter?.runAllCells();
     },
+    clearAllOutputs: (id) => {
+        get().notebooks.get(id)?.adapter?.clearAllOutputs();
+    },
     // Original methods (from legacy API)
     run: (id) => {
         get().notebooks.get(id)?.adapter?.runCell();
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js.map
index 2299fb6..a89463e 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/Notebook2State.js.map
@@ -1 +1 @@
-{"version":3,"file":"Notebook2State.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2State.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Notebook2State.js","sourceRoot":"","sources":["../../../src/components/notebook/Notebook2State.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.d.ts b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.d.ts
index 2cd83ee..f08190f 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.d.ts
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.d.ts
@@ -25,6 +25,7 @@ export declare class NotebookAdapter {
     private _notebookModelFactory?;
     private _notebookPanel?;
     private _onSessionConnection?;
+    private _panelProvider;
     private _path?;
     private _readonly;
     private _renderers;
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js
index 7c1b39d..0cc9b79 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js
@@ -20,7 +20,7 @@ import { newUuid } from '../../utils';
 import { JupyterReactContentFactory } from './content/JupyterReactContentFactory';
 import { getMarked } from './marked/marked';
 import { JupyterReactNotebookModelFactory } from './model/JupyterReactNotebookModelFactory';
-import { addNotebookCommands } from './NotebookCommands';
+import { addNotebookCommands, NotebookPanelProvider } from './NotebookCommands';
 const FALLBACK_NOTEBOOK_PATH = '.datalayer/ping.ipynb';
 export class NotebookAdapter {
     _boxPanel;
@@ -40,6 +40,7 @@ export class NotebookAdapter {
     _notebookModelFactory;
     _notebookPanel;
     _onSessionConnection;
+    _panelProvider;
     _path;
     _readonly;
     _renderers;
@@ -50,7 +51,6 @@ export class NotebookAdapter {
     _url;
     _useVSCodeTheme;
     constructor(props) {
-        console.log('Creating a new Notebook Adapter.');
         this._id = props.id ?? newUuid();
         this._kernel = props.kernel;
         this._kernelClients = props.kernelClients ?? [];
@@ -69,6 +69,7 @@ export class NotebookAdapter {
         this._boxPanel.addClass('dla-Jupyter-Notebook');
         this._boxPanel.spacing = 0;
         this._commands = new CommandRegistry();
+        this._panelProvider = new NotebookPanelProvider();
         if (props.url) {
             this.loadFromUrl(props.url).then(nbformat => {
                 this._nbformat = nbformat;
@@ -245,7 +246,6 @@ export class NotebookAdapter {
         // Setup the context listeners.
         this._context.sessionContext.sessionChanged.connect((_, args) => {
             const session = args.newValue;
-            console.log('Current Jupyter Session Connection.', session);
             if (this._onSessionConnection) {
                 if (session) {
                     this._onSessionConnection(session);
@@ -260,9 +260,7 @@ export class NotebookAdapter {
         this._context.sessionContext.kernelChanged.connect((_, args) => {
             const kernelConnection = args.newValue;
             this._kernelConnection = kernelConnection;
-            console.log('Current Jupyter Kernel Connection.', kernelConnection);
             if (kernelConnection && !kernelConnection.handleComms) {
-                console.log('Updating the current Kernel Connection to enforce Comms support.', kernelConnection.handleComms);
                 kernelConnection.handleComms = true;
             }
             /*
@@ -311,11 +309,13 @@ export class NotebookAdapter {
             // Option 2 to create the Notebook Panel.
             const notebookFactory = this._documentRegistry?.getWidgetFactory('Notebook');
             this._notebookPanel = notebookFactory?.createNew(this._context);
+            // Update panel provider with persistent references
+            this._panelProvider.setPanel(this._notebookPanel, this._context);
         }
         const completerHandler = this.setupCompleter(this._notebookPanel);
         if (!this._readonly) {
             try {
-                addNotebookCommands(this._commands, completerHandler, this._tracker, this._path);
+                addNotebookCommands(this._commands, completerHandler, this._tracker, this._panelProvider, this._path);
             }
             catch {
                 // no-op.
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js.map
index 31c97b9..bb260a0 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookAdapter.js.map
@@ -1 +1 @@
-{"version":3,"file":"NotebookAdapter.js","sourceRoot":"","sources":["../../../src/components/notebook/NotebookAdapter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"NotebookAdapter.js","sourceRoot":"","sources":["../../../src/components/notebook/NotebookAdapter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.d.ts b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.d.ts
index 53c5e8f..2bd9edf 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.d.ts
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.d.ts
@@ -1,7 +1,29 @@
 import { CommandRegistry } from '@lumino/commands';
 import { DisposableSet } from '@lumino/disposable';
 import { CompletionHandler } from '@jupyterlab/completer';
-import { NotebookTracker } from '@jupyterlab/notebook';
+import { NotebookPanel, NotebookTracker } from '@jupyterlab/notebook';
+import { Context } from '@jupyterlab/docregistry';
+import { INotebookModel } from '@jupyterlab/notebook';
+/**
+ * Provider for notebook panel and context that persists across React re-renders.
+ * This solves the issue where tracker.currentWidget becomes null after React updates.
+ */
+export declare class NotebookPanelProvider {
+    private _panel;
+    private _context;
+    /**
+     * Update the panel and context references.
+     */
+    setPanel(panel: NotebookPanel | null, context: Context<INotebookModel> | null): void;
+    /**
+     * Get the current panel.
+     */
+    getPanel(): NotebookPanel | null;
+    /**
+     * Get the current context.
+     */
+    getContext(): Context<INotebookModel> | null;
+}
 /**
  * The map of command ids used by the notebook.
  */
@@ -46,8 +68,9 @@ export declare const NotebookCommandIds: {
  * @param commands Command registry
  * @param completerHandler Completion handler
  * @param tracker Notebook tracker
+ * @param panelProvider Provider for persistent panel/context references
  * @param path Notebook path
  * @returns Commands disposer
  */
-export declare function addNotebookCommands(commands: CommandRegistry, completerHandler: CompletionHandler, tracker: NotebookTracker, path?: string): DisposableSet;
+export declare function addNotebookCommands(commands: CommandRegistry, completerHandler: CompletionHandler, tracker: NotebookTracker, panelProvider: NotebookPanelProvider, path?: string): DisposableSet;
 export default addNotebookCommands;
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js
index 434f98e..8745351 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js
@@ -9,6 +9,33 @@ import { SessionContextDialogs } from '@jupyterlab/apputils';
 import { SearchDocumentModel, SearchDocumentView, } from '@jupyterlab/documentsearch';
 import { NotebookActions, NotebookSearchProvider, } from '@jupyterlab/notebook';
 import { nullTranslator } from '@jupyterlab/translation';
+/**
+ * Provider for notebook panel and context that persists across React re-renders.
+ * This solves the issue where tracker.currentWidget becomes null after React updates.
+ */
+export class NotebookPanelProvider {
+    _panel = null;
+    _context = null;
+    /**
+     * Update the panel and context references.
+     */
+    setPanel(panel, context) {
+        this._panel = panel;
+        this._context = context;
+    }
+    /**
+     * Get the current panel.
+     */
+    getPanel() {
+        return this._panel;
+    }
+    /**
+     * Get the current context.
+     */
+    getContext() {
+        return this._context;
+    }
+}
 /**
  * The map of command ids used by the notebook.
  */
@@ -53,10 +80,11 @@ export const NotebookCommandIds = {
  * @param commands Command registry
  * @param completerHandler Completion handler
  * @param tracker Notebook tracker
+ * @param panelProvider Provider for persistent panel/context references
  * @param path Notebook path
  * @returns Commands disposer
  */
-export function addNotebookCommands(commands, completerHandler, tracker, path) {
+export function addNotebookCommands(commands, completerHandler, tracker, panelProvider, path) {
     const allCommands = new DisposableSet();
     // Add commands.
     if (path) {
@@ -189,25 +217,76 @@ export function addNotebookCommands(commands, completerHandler, tracker, path) {
     allCommands.add(commands.addCommand(NotebookCommandIds.runAndAdvance, {
         label: 'Run and Advance',
         execute: () => {
-            return tracker.currentWidget
-                ? NotebookActions.runAndAdvance(tracker.currentWidget.content, tracker.currentWidget.context.sessionContext)
-                : undefined;
+            // Use panelProvider instead of tracker.currentWidget to avoid null reference after React re-renders
+            const panel = panelProvider.getPanel();
+            const context = panelProvider.getContext();
+            if (!panel || !context) {
+                return Promise.resolve();
+            }
+            const sessionContext = context.sessionContext;
+            const kernel = sessionContext.session?.kernel;
+            // Only block if kernel is explicitly starting/restarting
+            if (kernel &&
+                (kernel.status === 'starting' ||
+                    kernel.status === 'restarting' ||
+                    kernel.status === 'autorestarting')) {
+                return Promise.resolve();
+            }
+            // If no kernel or session not ready, don't execute
+            if (!sessionContext.isReady || !kernel) {
+                return Promise.resolve();
+            }
+            return NotebookActions.runAndAdvance(panel.content, sessionContext);
         },
     }));
     allCommands.add(commands.addCommand(NotebookCommandIds.run, {
         label: 'Run',
         execute: () => {
-            return tracker.currentWidget
-                ? NotebookActions.run(tracker.currentWidget.content, tracker.currentWidget.context.sessionContext)
-                : undefined;
+            // Use panelProvider instead of tracker.currentWidget to avoid null reference after React re-renders
+            const panel = panelProvider.getPanel();
+            const context = panelProvider.getContext();
+            if (!panel || !context) {
+                return Promise.resolve();
+            }
+            const sessionContext = context.sessionContext;
+            const kernel = sessionContext.session?.kernel;
+            // Only block if kernel is explicitly starting/restarting
+            if (kernel &&
+                (kernel.status === 'starting' ||
+                    kernel.status === 'restarting' ||
+                    kernel.status === 'autorestarting')) {
+                return Promise.resolve();
+            }
+            // If no kernel or session not ready, don't execute
+            if (!sessionContext.isReady || !kernel) {
+                return Promise.resolve();
+            }
+            return NotebookActions.run(panel.content, sessionContext);
         },
     }));
     allCommands.add(commands.addCommand(NotebookCommandIds.runAll, {
         label: 'Run all',
         execute: () => {
-            return tracker.currentWidget
-                ? NotebookActions.runAll(tracker.currentWidget.content, tracker.currentWidget.context.sessionContext)
-                : undefined;
+            // Use panelProvider instead of tracker.currentWidget to avoid null reference after React re-renders
+            const panel = panelProvider.getPanel();
+            const context = panelProvider.getContext();
+            if (!panel || !context) {
+                return Promise.resolve();
+            }
+            const sessionContext = context.sessionContext;
+            const kernel = sessionContext.session?.kernel;
+            // Only block if kernel is explicitly starting/restarting
+            if (kernel &&
+                (kernel.status === 'starting' ||
+                    kernel.status === 'restarting' ||
+                    kernel.status === 'autorestarting')) {
+                return Promise.resolve();
+            }
+            // If no kernel or session not ready, don't execute
+            if (!sessionContext.isReady || !kernel) {
+                return Promise.resolve();
+            }
+            return NotebookActions.runAll(panel.content, sessionContext);
         },
     }));
     allCommands.add(commands.addCommand(NotebookCommandIds.deleteCells, {
diff --git a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js.map b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js.map
index 4f6f750..9c3df52 100644
--- a/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/components/notebook/NotebookCommands.js.map
@@ -1 +1 @@
-{"version":3,"file":"NotebookCommands.js","sourceRoot":"","sources":["../../../src/components/notebook/NotebookCommands.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"NotebookCommands.js","sourceRoot":"","sources":["../../../src/components/notebook/NotebookCommands.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/collaboration/ICollaborationProvider.js.map b/node_modules/@datalayer/jupyter-react/lib/jupyter/collaboration/ICollaborationProvider.js.map
index 1e9fdc8..3bfc37d 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/collaboration/ICollaborationProvider.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/collaboration/ICollaborationProvider.js.map
@@ -1 +1 @@
-{"version":3,"file":"ICollaborationProvider.js","sourceRoot":"","sources":["../../../src/jupyter/collaboration/ICollaborationProvider.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ICollaborationProvider.js","sourceRoot":"","sources":["../../../src/jupyter/collaboration/ICollaborationProvider.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js
index adc30c3..09fa56b 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js
@@ -27,8 +27,22 @@ export class ClassicWidgetManager extends HTMLManager {
         super(options);
         // Explicitly set the comm target name for widget communication
         this.comm_target_name = 'jupyter.widget';
+        // Setup RequireJS on window (loaded from CDN)
+        // Note: Using CDN approach due to template literal corruption issues with bundled version
+        // See REQUIREJS_TROUBLESHOOTING.md for details
+        if (typeof window !== 'undefined' && !window.requirejs) {
+            // Load RequireJS from CDN
+            const script = document.createElement('script');
+            script.src =
+                'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.8/require.min.js';
+            script.async = false;
+            document.head.appendChild(script);
+            // Add CDN marker for libembed-amd compatibility
+            const cdnOnlyScript = document.createElement('script');
+            cdnOnlyScript.setAttribute('data-jupyter-widgets-cdn-only', 'true');
+            document.body.appendChild(cdnOnlyScript);
+        }
         const initializeManager = () => {
-            console.warn('ClassicWidgetManager: Initializing widget manager');
             window.define('@jupyter-widgets/base', base);
             window.define('@jupyter-widgets/controls', controls);
             this._registry = new SemVerCache();
@@ -46,33 +60,18 @@ export class ClassicWidgetManager extends HTMLManager {
                 version: controls.JUPYTER_CONTROLS_VERSION,
                 exports: () => import('@jupyter-widgets/controls'),
             });
-            console.warn('ClassicWidgetManager: Widget manager initialized, resolving ready promise');
             this._ready.resolve(true);
         };
-        // Check if RequireJS is already available
-        if (window.require && window.define) {
-            console.warn('ClassicWidgetManager: RequireJS already available, initializing immediately');
-            initializeManager();
-        }
-        else {
-            console.warn('ClassicWidgetManager: Loading RequireJS');
-            const requireJsScript = document.createElement('script');
-            const cdnOnlyScript = document.createElement('script');
-            cdnOnlyScript.setAttribute('data-jupyter-widgets-cdn-only', 'true');
-            document.body.appendChild(cdnOnlyScript);
-            requireJsScript.src =
-                'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js';
-            document.body.appendChild(requireJsScript);
-            requireJsScript.onload = () => {
-                console.warn('ClassicWidgetManager: RequireJS loaded, initializing');
-                initializeManager();
-            };
-            requireJsScript.onerror = error => {
-                console.error('ClassicWidgetManager: Failed to load RequireJS', error);
-                // Try to initialize anyway
+        // Wait for RequireJS to be available before initializing
+        const waitForRequireJS = () => {
+            if (window.define) {
                 initializeManager();
-            };
-        }
+            }
+            else {
+                setTimeout(waitForRequireJS, 10);
+            }
+        };
+        waitForRequireJS();
     }
     get ready() {
         return this._ready;
@@ -102,9 +101,7 @@ export class ClassicWidgetManager extends HTMLManager {
                 console.error('ClassicWidgetManager: Registry not initialized when registering with kernel.');
                 return;
             }
-            console.log(`ClassicWidgetManager: Registering comm target with kernel for ${this.comm_target_name}`);
             this._commRegistration = kernelConnection.registerCommTarget(this.comm_target_name, this._handleCommOpen);
-            console.log('ClassicWidgetManager: Successfully registered comm target.');
         }
         else {
             // Clear kernel when disconnecting
@@ -113,11 +110,8 @@ export class ClassicWidgetManager extends HTMLManager {
     }
     async _handleCommOpen(comm, message) {
         try {
-            console.log('ClassicWidgetManager: Handling comm open for', message.content.target_name, 'with comm_id', message.content.comm_id);
             const classicComm = new shims.services.Comm(comm);
-            console.log('ClassicWidgetManager: Created classic comm wrapper');
             await this.handle_comm_open(classicComm, message);
-            console.log('ClassicWidgetManager: Successfully handled comm open');
         }
         catch (error) {
             console.error('ClassicWidgetManager: Error in _handleCommOpen:', error);
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js.map b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js.map
index 18493d0..117bde6 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/classic/manager.js.map
@@ -1 +1 @@
-{"version":3,"file":"manager.js","sourceRoot":"","sources":["../../../../src/jupyter/ipywidgets/classic/manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"manager.js","sourceRoot":"","sources":["../../../../src/jupyter/ipywidgets/classic/manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js
index 496548c..5fe0271 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js
@@ -25,28 +25,44 @@ export class LabWidgetManager extends ManagerBase {
     constructor(rendermime) {
         super();
         this._rendermime = rendermime;
-        const requireJsScript = document.createElement('script');
-        const cdnOnlyScript = document.createElement('script');
-        cdnOnlyScript.setAttribute('data-jupyter-widgets-cdn-only', 'true');
-        document.body.appendChild(cdnOnlyScript);
-        requireJsScript.src =
-            'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js';
-        document.body.appendChild(requireJsScript);
-        requireJsScript.onload = () => {
-            window.define('@jupyter-widgets/base', base);
-            window.define('@jupyter-widgets/controls', controls);
-            this._registry = new SemVerCache();
-            this.register({
-                name: '@jupyter-widgets/base',
-                version: base.JUPYTER_WIDGETS_VERSION,
-                exports: () => import('@jupyter-widgets/base'),
-            });
-            this.register({
-                name: '@jupyter-widgets/controls',
-                version: controls.JUPYTER_CONTROLS_VERSION,
-                exports: () => import('@jupyter-widgets/controls'),
-            });
+        // Setup RequireJS on window (loaded from CDN)
+        // Note: Using CDN approach due to template literal corruption issues with bundled version
+        // See REQUIREJS_TROUBLESHOOTING.md for details
+        if (typeof window !== 'undefined' && !window.requirejs) {
+            // Load RequireJS from CDN
+            const script = document.createElement('script');
+            script.src =
+                'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.8/require.min.js';
+            script.async = false;
+            document.head.appendChild(script);
+            // Add CDN marker for libembed-amd compatibility
+            const cdnOnlyScript = document.createElement('script');
+            cdnOnlyScript.setAttribute('data-jupyter-widgets-cdn-only', 'true');
+            document.body.appendChild(cdnOnlyScript);
+        }
+        // Setup widget modules (wait for requirejs to be available)
+        const initWidgets = () => {
+            if (window.define) {
+                window.define('@jupyter-widgets/base', base);
+                window.define('@jupyter-widgets/controls', controls);
+                this._registry = new SemVerCache();
+                this.register({
+                    name: '@jupyter-widgets/base',
+                    version: base.JUPYTER_WIDGETS_VERSION,
+                    exports: () => import('@jupyter-widgets/base'),
+                });
+                this.register({
+                    name: '@jupyter-widgets/controls',
+                    version: controls.JUPYTER_CONTROLS_VERSION,
+                    exports: () => import('@jupyter-widgets/controls'),
+                });
+            }
+            else {
+                // Retry if requirejs not yet available
+                setTimeout(initWidgets, 10);
+            }
         };
+        initWidgets();
     }
     /**
      * Default callback handler to emit unhandled kernel messages.
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js.map b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js.map
index 35ba69d..1270b5c 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/lab/manager.js.map
@@ -1 +1 @@
-{"version":3,"file":"manager.js","sourceRoot":"","sources":["../../../../src/jupyter/ipywidgets/lab/manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"manager.js","sourceRoot":"","sources":["../../../../src/jupyter/ipywidgets/lab/manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js
index e9a0ef5..20be140 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js
@@ -25,7 +25,7 @@ interface IViewState {
   model_id: string;
 }
 */
-const ajv = new Ajv();
+const ajv = new Ajv({ strictTypes: false });
 const model_validate = ajv.compile(widget_state_schema);
 const view_validate = ajv.compile(widget_view_schema);
 /**
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js.map b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js.map
index aad7091..cd48ca4 100644
--- a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/libembed.js.map
@@ -1 +1 @@
-{"version":3,"file":"libembed.js","sourceRoot":"","sources":["../../../src/jupyter/ipywidgets/libembed.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"libembed.js","sourceRoot":"","sources":["../../../src/jupyter/ipywidgets/libembed.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.d.ts b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.d.ts
new file mode 100644
index 0000000..0278cd9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.d.ts
@@ -0,0 +1,2 @@
+export declare const requirejsCode = "/** vim: et:ts=4:sw=4:sts=4\n * @license RequireJS 2.3.8 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE\n */\n//Not using strict: uneven strict support in browsers, #392, and causes\n//problems with requirejs.exec()/transpiler plugins that may not be strict.\n/*jslint regexp: true, nomen: true, sloppy: true */\n/*global window, navigator, document, importScripts, setTimeout, opera */\n\nvar requirejs, require, define;\n(function (global, setTimeout) {\n    var req, s, head, baseElement, dataMain, src,\n        interactiveScript, currentlyAddingScript, mainScript, subPath,\n        version = '2.3.8',\n        commentRegExp = //*[sS]*?*/|([^:\"'=]|^)//.*$/mg,\n        cjsRequireRegExp = /[^.]s*requires*(s*[\"']([^'\"s]+)[\"']s*)/g,\n        jsSuffixRegExp = /.js$/,\n        currDirRegExp = /^.//,\n        op = Object.prototype,\n        ostring = op.toString,\n        hasOwn = op.hasOwnProperty,\n        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),\n        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',\n        //PS3 indicates loaded and complete, but need to wait for complete\n        //specifically. Sequence is 'loading', 'loaded', execution,\n        // then 'complete'. The UA check is unfortunate, but not sure how\n        //to feature test w/o causing perf issues.\n        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?\n                      /^complete$/ : /^(complete|loaded)$/,\n        defContextName = '_',\n        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.\n        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',\n        contexts = {},\n        cfg = {},\n        globalDefQueue = [],\n        useInteractive = false;\n\n    //Could match something like ')//comment', do not lose the prefix to comment.\n    function commentReplace(match, singlePrefix) {\n        return singlePrefix || '';\n    }\n\n    function isFunction(it) {\n        return ostring.call(it) === '[object Function]';\n    }\n\n    function isArray(it) {\n        return ostring.call(it) === '[object Array]';\n    }\n\n    /**\n     * Helper function for iterating over an array. If the func returns\n     * a true value, it will break out of the loop.\n     */\n    function each(ary, func) {\n        if (ary) {\n            var i;\n            for (i = 0; i < ary.length; i += 1) {\n                if (ary[i] && func(ary[i], i, ary)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Helper function for iterating over an array backwards. If the func\n     * returns a true value, it will break out of the loop.\n     */\n    function eachReverse(ary, func) {\n        if (ary) {\n            var i;\n            for (i = ary.length - 1; i > -1; i -= 1) {\n                if (ary[i] && func(ary[i], i, ary)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    function getOwn(obj, prop) {\n        return hasProp(obj, prop) && obj[prop];\n    }\n\n    /**\n     * Cycles over properties in an object and calls a function for each\n     * property value. If the function returns a truthy value, then the\n     * iteration is stopped.\n     */\n    function eachProp(obj, func) {\n        var prop;\n        for (prop in obj) {\n            if (hasProp(obj, prop) && prop !== '__proto__' && prop !== 'constructor') {\n                if (func(obj[prop], prop)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Simple function to mix in properties from source into target,\n     * but only if target does not already have a property of the same name.\n     */\n    function mixin(target, source, force, deepStringMixin) {\n        if (source) {\n            eachProp(source, function (value, prop) {\n                if (force || !hasProp(target, prop)) {\n                    if (deepStringMixin && typeof value === 'object' && value &&\n                        !isArray(value) && !isFunction(value) &&\n                        !(value instanceof RegExp)) {\n\n                        if (!target[prop]) {\n                            target[prop] = {};\n                        }\n                        mixin(target[prop], value, force, deepStringMixin);\n                    } else {\n                        target[prop] = value;\n                    }\n                }\n            });\n        }\n        return target;\n    }\n\n    //Similar to Function.prototype.bind, but the 'this' object is specified\n    //first, since it is easier to read/figure out what 'this' will be.\n    function bind(obj, fn) {\n        return function () {\n            return fn.apply(obj, arguments);\n        };\n    }\n\n    function scripts() {\n        return document.getElementsByTagName('script');\n    }\n\n    function defaultOnError(err) {\n        throw err;\n    }\n\n    //Allow getting a global that is expressed in\n    //dot notation, like 'a.b.c'.\n    function getGlobal(value) {\n        if (!value) {\n            return value;\n        }\n        var g = global;\n        each(value.split('.'), function (part) {\n            g = g[part];\n        });\n        return g;\n    }\n\n    /**\n     * Constructs an error with a pointer to an URL with more information.\n     * @param {String} id the error ID that maps to an ID on a web page.\n     * @param {String} message human readable error.\n     * @param {Error} [err] the original error, if there is one.\n     *\n     * @returns {Error}\n     */\n    function makeError(id, msg, err, requireModules) {\n        var e = new Error(msg + '\nhttps://requirejs.org/docs/errors.html#' + id);\n        e.requireType = id;\n        e.requireModules = requireModules;\n        if (err) {\n            e.originalError = err;\n        }\n        return e;\n    }\n\n    if (typeof define !== 'undefined') {\n        //If a define is already in play via another AMD loader,\n        //do not overwrite.\n        return;\n    }\n\n    if (typeof requirejs !== 'undefined') {\n        if (isFunction(requirejs)) {\n            //Do not overwrite an existing requirejs instance.\n            return;\n        }\n        cfg = requirejs;\n        requirejs = undefined;\n    }\n\n    //Allow for a require config object\n    if (typeof require !== 'undefined' && !isFunction(require)) {\n        //assume it is a config object.\n        cfg = require;\n        require = undefined;\n    }\n\n    function newContext(contextName) {\n        var inCheckLoaded, Module, context, handlers,\n            checkLoadedTimeoutId,\n            config = {\n                //Defaults. Do not set a default for map\n                //config to speed up normalize(), which\n                //will run faster if there is no default.\n                waitSeconds: 7,\n                baseUrl: './',\n                paths: {},\n                bundles: {},\n                pkgs: {},\n                shim: {},\n                config: {}\n            },\n            registry = {},\n            //registry of just enabled modules, to speed\n            //cycle breaking code when lots of modules\n            //are registered, but not activated.\n            enabledRegistry = {},\n            undefEvents = {},\n            defQueue = [],\n            defined = {},\n            urlFetched = {},\n            bundlesMap = {},\n            requireCounter = 1,\n            unnormalizedCounter = 1;\n\n        /**\n         * Trims the . and .. from an array of path segments.\n         * It will keep a leading path segment if a .. will become\n         * the first path segment, to help with module name lookups,\n         * which act like paths, but can be remapped. But the end result,\n         * all paths that use this function should look normalized.\n         * NOTE: this method MODIFIES the input array.\n         * @param {Array} ary the array of path segments.\n         */\n        function trimDots(ary) {\n            var i, part;\n            for (i = 0; i < ary.length; i++) {\n                part = ary[i];\n                if (part === '.') {\n                    ary.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        ary.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n        }\n\n        /**\n         * Given a relative module name, like ./something, normalize it to\n         * a real name that can be mapped to a path.\n         * @param {String} name the relative name\n         * @param {String} baseName a real name that the name arg is relative\n         * to.\n         * @param {Boolean} applyMap apply the map config to the value. Should\n         * only be done if this normalization is for a dependency ID.\n         * @returns {String} normalized name\n         */\n        function normalize(name, baseName, applyMap) {\n            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,\n                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,\n                baseParts = (baseName && baseName.split('/')),\n                map = config.map,\n                starMap = map && map['*'];\n\n            //Adjust any relative paths.\n            if (name) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // If wanting node ID compatibility, strip .js from end\n                // of IDs. Have to do this here, and not in nameToUrl\n                // because node allows either .js or non .js to map\n                // to same file.\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                // Starts with a '.' so need the baseName\n                if (name[0].charAt(0) === '.' && baseParts) {\n                    //Convert baseName to array, and lop off the last part,\n                    //so that . matches that 'directory' and not name of the baseName's\n                    //module. For instance, baseName of 'one/two/three', maps to\n                    //'one/two/three.js', but we want the directory, 'one/two' for\n                    //this normalization.\n                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                    name = normalizedBaseParts.concat(name);\n                }\n\n                trimDots(name);\n                name = name.join('/');\n            }\n\n            //Apply map config if available.\n            if (applyMap && map && (baseParts || starMap)) {\n                nameParts = name.split('/');\n\n                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {\n                    nameSegment = nameParts.slice(0, i).join('/');\n\n                    if (baseParts) {\n                        //Find the longest baseName segment match in the config.\n                        //So, do joins on the biggest to smallest lengths of baseParts.\n                        for (j = baseParts.length; j > 0; j -= 1) {\n                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));\n\n                            //baseName segment has config, find if it has one for\n                            //this name.\n                            if (mapValue) {\n                                mapValue = getOwn(mapValue, nameSegment);\n                                if (mapValue) {\n                                    //Match, update name to the new value.\n                                    foundMap = mapValue;\n                                    foundI = i;\n                                    break outerLoop;\n                                }\n                            }\n                        }\n                    }\n\n                    //Check for a star map match, but just hold on to it,\n                    //if there is a shorter segment match later in a matching\n                    //config, then favor over this star map.\n                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {\n                        foundStarMap = getOwn(starMap, nameSegment);\n                        starI = i;\n                    }\n                }\n\n                if (!foundMap && foundStarMap) {\n                    foundMap = foundStarMap;\n                    foundI = starI;\n                }\n\n                if (foundMap) {\n                    nameParts.splice(0, foundI, foundMap);\n                    name = nameParts.join('/');\n                }\n            }\n\n            // If the name points to a package's name, use\n            // the package main instead.\n            pkgMain = getOwn(config.pkgs, name);\n\n            return pkgMain ? pkgMain : name;\n        }\n\n        function removeScript(name) {\n            if (isBrowser) {\n                each(scripts(), function (scriptNode) {\n                    if (scriptNode.getAttribute('data-requiremodule') === name &&\n                            scriptNode.getAttribute('data-requirecontext') === context.contextName) {\n                        scriptNode.parentNode.removeChild(scriptNode);\n                        return true;\n                    }\n                });\n            }\n        }\n\n        function hasPathFallback(id) {\n            var pathConfig = getOwn(config.paths, id);\n            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {\n                //Pop off the first array value, since it failed, and\n                //retry\n                pathConfig.shift();\n                context.require.undef(id);\n\n                //Custom require that does not do map translation, since\n                //ID is \"absolute\", already mapped/resolved.\n                context.makeRequire(null, {\n                    skipMap: true\n                })([id]);\n\n                return true;\n            }\n        }\n\n        //Turns a plugin!resource to [plugin, resource]\n        //with the plugin being undefined if the name\n        //did not have a plugin prefix.\n        function splitPrefix(name) {\n            var prefix,\n                index = name ? name.indexOf('!') : -1;\n            if (index > -1) {\n                prefix = name.substring(0, index);\n                name = name.substring(index + 1, name.length);\n            }\n            return [prefix, name];\n        }\n\n        /**\n         * Creates a module mapping that includes plugin prefix, module\n         * name, and path. If parentModuleMap is provided it will\n         * also normalize the name via require.normalize()\n         *\n         * @param {String} name the module name\n         * @param {String} [parentModuleMap] parent module map\n         * for the module name, used to resolve relative names.\n         * @param {Boolean} isNormalized: is the ID already normalized.\n         * This is true if this call is done for a define() module ID.\n         * @param {Boolean} applyMap: apply the map config to the ID.\n         * Should only be true if this map is for a dependency.\n         *\n         * @returns {Object}\n         */\n        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {\n            var url, pluginModule, suffix, nameParts,\n                prefix = null,\n                parentName = parentModuleMap ? parentModuleMap.name : null,\n                originalName = name,\n                isDefine = true,\n                normalizedName = '';\n\n            //If no name, then it means it is a require call, generate an\n            //internal name.\n            if (!name) {\n                isDefine = false;\n                name = '_@r' + (requireCounter += 1);\n            }\n\n            nameParts = splitPrefix(name);\n            prefix = nameParts[0];\n            name = nameParts[1];\n\n            if (prefix) {\n                prefix = normalize(prefix, parentName, applyMap);\n                pluginModule = getOwn(defined, prefix);\n            }\n\n            //Account for relative paths if there is a base name.\n            if (name) {\n                if (prefix) {\n                    if (isNormalized) {\n                        normalizedName = name;\n                    } else if (pluginModule && pluginModule.normalize) {\n                        //Plugin is loaded, use its normalize method.\n                        normalizedName = pluginModule.normalize(name, function (name) {\n                            return normalize(name, parentName, applyMap);\n                        });\n                    } else {\n                        // If nested plugin references, then do not try to\n                        // normalize, as it will not normalize correctly. This\n                        // places a restriction on resourceIds, and the longer\n                        // term solution is not to normalize until plugins are\n                        // loaded and all normalizations to allow for async\n                        // loading of a loader plugin. But for now, fixes the\n                        // common uses. Details in #1131\n                        normalizedName = name.indexOf('!') === -1 ?\n                                         normalize(name, parentName, applyMap) :\n                                         name;\n                    }\n                } else {\n                    //A regular module.\n                    normalizedName = normalize(name, parentName, applyMap);\n\n                    //Normalized name may be a plugin ID due to map config\n                    //application in normalize. The map config values must\n                    //already be normalized, so do not need to redo that part.\n                    nameParts = splitPrefix(normalizedName);\n                    prefix = nameParts[0];\n                    normalizedName = nameParts[1];\n                    isNormalized = true;\n\n                    url = context.nameToUrl(normalizedName);\n                }\n            }\n\n            //If the id is a plugin id that cannot be determined if it needs\n            //normalization, stamp it with a unique ID so two matching relative\n            //ids that may conflict can be separate.\n            suffix = prefix && !pluginModule && !isNormalized ?\n                     '_unnormalized' + (unnormalizedCounter += 1) :\n                     '';\n\n            return {\n                prefix: prefix,\n                name: normalizedName,\n                parentMap: parentModuleMap,\n                unnormalized: !!suffix,\n                url: url,\n                originalName: originalName,\n                isDefine: isDefine,\n                id: (prefix ?\n                        prefix + '!' + normalizedName :\n                        normalizedName) + suffix\n            };\n        }\n\n        function getModule(depMap) {\n            var id = depMap.id,\n                mod = getOwn(registry, id);\n\n            if (!mod) {\n                mod = registry[id] = new context.Module(depMap);\n            }\n\n            return mod;\n        }\n\n        function on(depMap, name, fn) {\n            var id = depMap.id,\n                mod = getOwn(registry, id);\n\n            if (hasProp(defined, id) &&\n                    (!mod || mod.defineEmitComplete)) {\n                if (name === 'defined') {\n                    fn(defined[id]);\n                }\n            } else {\n                mod = getModule(depMap);\n                if (mod.error && name === 'error') {\n                    fn(mod.error);\n                } else {\n                    mod.on(name, fn);\n                }\n            }\n        }\n\n        function onError(err, errback) {\n            var ids = err.requireModules,\n                notified = false;\n\n            if (errback) {\n                errback(err);\n            } else {\n                each(ids, function (id) {\n                    var mod = getOwn(registry, id);\n                    if (mod) {\n                        //Set error on module, so it skips timeout checks.\n                        mod.error = err;\n                        if (mod.events.error) {\n                            notified = true;\n                            mod.emit('error', err);\n                        }\n                    }\n                });\n\n                if (!notified) {\n                    req.onError(err);\n                }\n            }\n        }\n\n        /**\n         * Internal method to transfer globalQueue items to this context's\n         * defQueue.\n         */\n        function takeGlobalQueue() {\n            //Push all the globalDefQueue items into the context's defQueue\n            if (globalDefQueue.length) {\n                each(globalDefQueue, function(queueItem) {\n                    var id = queueItem[0];\n                    if (typeof id === 'string') {\n                        context.defQueueMap[id] = true;\n                    }\n                    defQueue.push(queueItem);\n                });\n                globalDefQueue = [];\n            }\n        }\n\n        handlers = {\n            'require': function (mod) {\n                if (mod.require) {\n                    return mod.require;\n                } else {\n                    return (mod.require = context.makeRequire(mod.map));\n                }\n            },\n            'exports': function (mod) {\n                mod.usingExports = true;\n                if (mod.map.isDefine) {\n                    if (mod.exports) {\n                        return (defined[mod.map.id] = mod.exports);\n                    } else {\n                        return (mod.exports = defined[mod.map.id] = {});\n                    }\n                }\n            },\n            'module': function (mod) {\n                if (mod.module) {\n                    return mod.module;\n                } else {\n                    return (mod.module = {\n                        id: mod.map.id,\n                        uri: mod.map.url,\n                        config: function () {\n                            return getOwn(config.config, mod.map.id) || {};\n                        },\n                        exports: mod.exports || (mod.exports = {})\n                    });\n                }\n            }\n        };\n\n        function cleanRegistry(id) {\n            //Clean up machinery used for waiting modules.\n            delete registry[id];\n            delete enabledRegistry[id];\n        }\n\n        function breakCycle(mod, traced, processed) {\n            var id = mod.map.id;\n\n            if (mod.error) {\n                mod.emit('error', mod.error);\n            } else {\n                traced[id] = true;\n                each(mod.depMaps, function (depMap, i) {\n                    var depId = depMap.id,\n                        dep = getOwn(registry, depId);\n\n                    //Only force things that have not completed\n                    //being defined, so still in the registry,\n                    //and only if it has not been matched up\n                    //in the module already.\n                    if (dep && !mod.depMatched[i] && !processed[depId]) {\n                        if (getOwn(traced, depId)) {\n                            mod.defineDep(i, defined[depId]);\n                            mod.check(); //pass false?\n                        } else {\n                            breakCycle(dep, traced, processed);\n                        }\n                    }\n                });\n                processed[id] = true;\n            }\n        }\n\n        function checkLoaded() {\n            var err, usingPathFallback,\n                waitInterval = config.waitSeconds * 1000,\n                //It is possible to disable the wait interval by using waitSeconds of 0.\n                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),\n                noLoads = [],\n                reqCalls = [],\n                stillLoading = false,\n                needCycleCheck = true;\n\n            //Do not bother if this call was a result of a cycle break.\n            if (inCheckLoaded) {\n                return;\n            }\n\n            inCheckLoaded = true;\n\n            //Figure out the state of all the modules.\n            eachProp(enabledRegistry, function (mod) {\n                var map = mod.map,\n                    modId = map.id;\n\n                //Skip things that are not enabled or in error state.\n                if (!mod.enabled) {\n                    return;\n                }\n\n                if (!map.isDefine) {\n                    reqCalls.push(mod);\n                }\n\n                if (!mod.error) {\n                    //If the module should be executed, and it has not\n                    //been inited and time is up, remember it.\n                    if (!mod.inited && expired) {\n                        if (hasPathFallback(modId)) {\n                            usingPathFallback = true;\n                            stillLoading = true;\n                        } else {\n                            noLoads.push(modId);\n                            removeScript(modId);\n                        }\n                    } else if (!mod.inited && mod.fetched && map.isDefine) {\n                        stillLoading = true;\n                        if (!map.prefix) {\n                            //No reason to keep looking for unfinished\n                            //loading. If the only stillLoading is a\n                            //plugin resource though, keep going,\n                            //because it may be that a plugin resource\n                            //is waiting on a non-plugin cycle.\n                            return (needCycleCheck = false);\n                        }\n                    }\n                }\n            });\n\n            if (expired && noLoads.length) {\n                //If wait time expired, throw error of unloaded modules.\n                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);\n                err.contextName = context.contextName;\n                return onError(err);\n            }\n\n            //Not expired, check for a cycle.\n            if (needCycleCheck) {\n                each(reqCalls, function (mod) {\n                    breakCycle(mod, {}, {});\n                });\n            }\n\n            //If still waiting on loads, and the waiting load is something\n            //other than a plugin resource, or there are still outstanding\n            //scripts, then just try back later.\n            if ((!expired || usingPathFallback) && stillLoading) {\n                //Something is still waiting to load. Wait for it, but only\n                //if a timeout is not already in effect.\n                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {\n                    checkLoadedTimeoutId = setTimeout(function () {\n                        checkLoadedTimeoutId = 0;\n                        checkLoaded();\n                    }, 50);\n                }\n            }\n\n            inCheckLoaded = false;\n        }\n\n        Module = function (map) {\n            this.events = getOwn(undefEvents, map.id) || {};\n            this.map = map;\n            this.shim = getOwn(config.shim, map.id);\n            this.depExports = [];\n            this.depMaps = [];\n            this.depMatched = [];\n            this.pluginMaps = {};\n            this.depCount = 0;\n\n            /* this.exports this.factory\n               this.depMaps = [],\n               this.enabled, this.fetched\n            */\n        };\n\n        Module.prototype = {\n            init: function (depMaps, factory, errback, options) {\n                options = options || {};\n\n                //Do not do more inits if already done. Can happen if there\n                //are multiple define calls for the same module. That is not\n                //a normal, common case, but it is also not unexpected.\n                if (this.inited) {\n                    return;\n                }\n\n                this.factory = factory;\n\n                if (errback) {\n                    //Register for errors on this module.\n                    this.on('error', errback);\n                } else if (this.events.error) {\n                    //If no errback already, but there are error listeners\n                    //on this module, set up an errback to pass to the deps.\n                    errback = bind(this, function (err) {\n                        this.emit('error', err);\n                    });\n                }\n\n                //Do a copy of the dependency array, so that\n                //source inputs are not modified. For example\n                //\"shim\" deps are passed in here directly, and\n                //doing a direct modification of the depMaps array\n                //would affect that config.\n                this.depMaps = depMaps && depMaps.slice(0);\n\n                this.errback = errback;\n\n                //Indicate this module has be initialized\n                this.inited = true;\n\n                this.ignore = options.ignore;\n\n                //Could have option to init this module in enabled mode,\n                //or could have been previously marked as enabled. However,\n                //the dependencies are not known until init is called. So\n                //if enabled previously, now trigger dependencies as enabled.\n                if (options.enabled || this.enabled) {\n                    //Enable this module and dependencies.\n                    //Will call this.check()\n                    this.enable();\n                } else {\n                    this.check();\n                }\n            },\n\n            defineDep: function (i, depExports) {\n                //Because of cycles, defined callback for a given\n                //export can be called more than once.\n                if (!this.depMatched[i]) {\n                    this.depMatched[i] = true;\n                    this.depCount -= 1;\n                    this.depExports[i] = depExports;\n                }\n            },\n\n            fetch: function () {\n                if (this.fetched) {\n                    return;\n                }\n                this.fetched = true;\n\n                context.startTime = (new Date()).getTime();\n\n                var map = this.map;\n\n                //If the manager is for a plugin managed resource,\n                //ask the plugin to load it now.\n                if (this.shim) {\n                    context.makeRequire(this.map, {\n                        enableBuildCallback: true\n                    })(this.shim.deps || [], bind(this, function () {\n                        return map.prefix ? this.callPlugin() : this.load();\n                    }));\n                } else {\n                    //Regular dependency.\n                    return map.prefix ? this.callPlugin() : this.load();\n                }\n            },\n\n            load: function () {\n                var url = this.map.url;\n\n                //Regular dependency.\n                if (!urlFetched[url]) {\n                    urlFetched[url] = true;\n                    context.load(this.map.id, url);\n                }\n            },\n\n            /**\n             * Checks if the module is ready to define itself, and if so,\n             * define it.\n             */\n            check: function () {\n                if (!this.enabled || this.enabling) {\n                    return;\n                }\n\n                var err, cjsModule,\n                    id = this.map.id,\n                    depExports = this.depExports,\n                    exports = this.exports,\n                    factory = this.factory;\n\n                if (!this.inited) {\n                    // Only fetch if not already in the defQueue.\n                    if (!hasProp(context.defQueueMap, id)) {\n                        this.fetch();\n                    }\n                } else if (this.error) {\n                    this.emit('error', this.error);\n                } else if (!this.defining) {\n                    //The factory could trigger another require call\n                    //that would result in checking this module to\n                    //define itself again. If already in the process\n                    //of doing that, skip this work.\n                    this.defining = true;\n\n                    if (this.depCount < 1 && !this.defined) {\n                        if (isFunction(factory)) {\n                            //If there is an error listener, favor passing\n                            //to that instead of throwing an error. However,\n                            //only do it for define()'d  modules. require\n                            //errbacks should not be called for failures in\n                            //their callbacks (#699). However if a global\n                            //onError is set, use that.\n                            if ((this.events.error && this.map.isDefine) ||\n                                req.onError !== defaultOnError) {\n                                try {\n                                    exports = context.execCb(id, factory, depExports, exports);\n                                } catch (e) {\n                                    err = e;\n                                }\n                            } else {\n                                exports = context.execCb(id, factory, depExports, exports);\n                            }\n\n                            // Favor return value over exports. If node/cjs in play,\n                            // then will not have a return value anyway. Favor\n                            // module.exports assignment over exports object.\n                            if (this.map.isDefine && exports === undefined) {\n                                cjsModule = this.module;\n                                if (cjsModule) {\n                                    exports = cjsModule.exports;\n                                } else if (this.usingExports) {\n                                    //exports already set the defined value.\n                                    exports = this.exports;\n                                }\n                            }\n\n                            if (err) {\n                                err.requireMap = this.map;\n                                err.requireModules = this.map.isDefine ? [this.map.id] : null;\n                                err.requireType = this.map.isDefine ? 'define' : 'require';\n                                return onError((this.error = err));\n                            }\n\n                        } else {\n                            //Just a literal value\n                            exports = factory;\n                        }\n\n                        this.exports = exports;\n\n                        if (this.map.isDefine && !this.ignore) {\n                            defined[id] = exports;\n\n                            if (req.onResourceLoad) {\n                                var resLoadMaps = [];\n                                each(this.depMaps, function (depMap) {\n                                    resLoadMaps.push(depMap.normalizedMap || depMap);\n                                });\n                                req.onResourceLoad(context, this.map, resLoadMaps);\n                            }\n                        }\n\n                        //Clean up\n                        cleanRegistry(id);\n\n                        this.defined = true;\n                    }\n\n                    //Finished the define stage. Allow calling check again\n                    //to allow define notifications below in the case of a\n                    //cycle.\n                    this.defining = false;\n\n                    if (this.defined && !this.defineEmitted) {\n                        this.defineEmitted = true;\n                        this.emit('defined', this.exports);\n                        this.defineEmitComplete = true;\n                    }\n\n                }\n            },\n\n            callPlugin: function () {\n                var map = this.map,\n                    id = map.id,\n                    //Map already normalized the prefix.\n                    pluginMap = makeModuleMap(map.prefix);\n\n                //Mark this as a dependency for this plugin, so it\n                //can be traced for cycles.\n                this.depMaps.push(pluginMap);\n\n                on(pluginMap, 'defined', bind(this, function (plugin) {\n                    var load, normalizedMap, normalizedMod,\n                        bundleId = getOwn(bundlesMap, this.map.id),\n                        name = this.map.name,\n                        parentName = this.map.parentMap ? this.map.parentMap.name : null,\n                        localRequire = context.makeRequire(map.parentMap, {\n                            enableBuildCallback: true\n                        });\n\n                    //If current map is not normalized, wait for that\n                    //normalized name to load instead of continuing.\n                    if (this.map.unnormalized) {\n                        //Normalize the ID if the plugin allows it.\n                        if (plugin.normalize) {\n                            name = plugin.normalize(name, function (name) {\n                                return normalize(name, parentName, true);\n                            }) || '';\n                        }\n\n                        //prefix and name should already be normalized, no need\n                        //for applying map config again either.\n                        normalizedMap = makeModuleMap(map.prefix + '!' + name,\n                                                      this.map.parentMap,\n                                                      true);\n                        on(normalizedMap,\n                            'defined', bind(this, function (value) {\n                                this.map.normalizedMap = normalizedMap;\n                                this.init([], function () { return value; }, null, {\n                                    enabled: true,\n                                    ignore: true\n                                });\n                            }));\n\n                        normalizedMod = getOwn(registry, normalizedMap.id);\n                        if (normalizedMod) {\n                            //Mark this as a dependency for this plugin, so it\n                            //can be traced for cycles.\n                            this.depMaps.push(normalizedMap);\n\n                            if (this.events.error) {\n                                normalizedMod.on('error', bind(this, function (err) {\n                                    this.emit('error', err);\n                                }));\n                            }\n                            normalizedMod.enable();\n                        }\n\n                        return;\n                    }\n\n                    //If a paths config, then just load that file instead to\n                    //resolve the plugin, as it is built into that paths layer.\n                    if (bundleId) {\n                        this.map.url = context.nameToUrl(bundleId);\n                        this.load();\n                        return;\n                    }\n\n                    load = bind(this, function (value) {\n                        this.init([], function () { return value; }, null, {\n                            enabled: true\n                        });\n                    });\n\n                    load.error = bind(this, function (err) {\n                        this.inited = true;\n                        this.error = err;\n                        err.requireModules = [id];\n\n                        //Remove temp unnormalized modules for this module,\n                        //since they will never be resolved otherwise now.\n                        eachProp(registry, function (mod) {\n                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {\n                                cleanRegistry(mod.map.id);\n                            }\n                        });\n\n                        onError(err);\n                    });\n\n                    //Allow plugins to load other code without having to know the\n                    //context or how to 'complete' the load.\n                    load.fromText = bind(this, function (text, textAlt) {\n                        /*jslint evil: true */\n                        var moduleName = map.name,\n                            moduleMap = makeModuleMap(moduleName),\n                            hasInteractive = useInteractive;\n\n                        //As of 2.1.0, support just passing the text, to reinforce\n                        //fromText only being called once per resource. Still\n                        //support old style of passing moduleName but discard\n                        //that moduleName in favor of the internal ref.\n                        if (textAlt) {\n                            text = textAlt;\n                        }\n\n                        //Turn off interactive script matching for IE for any define\n                        //calls in the text, then turn it back on at the end.\n                        if (hasInteractive) {\n                            useInteractive = false;\n                        }\n\n                        //Prime the system by creating a module instance for\n                        //it.\n                        getModule(moduleMap);\n\n                        //Transfer any config to this other module.\n                        if (hasProp(config.config, id)) {\n                            config.config[moduleName] = config.config[id];\n                        }\n\n                        try {\n                            req.exec(text);\n                        } catch (e) {\n                            return onError(makeError('fromtexteval',\n                                             'fromText eval for ' + id +\n                                            ' failed: ' + e,\n                                             e,\n                                             [id]));\n                        }\n\n                        if (hasInteractive) {\n                            useInteractive = true;\n                        }\n\n                        //Mark this as a dependency for the plugin\n                        //resource\n                        this.depMaps.push(moduleMap);\n\n                        //Support anonymous modules.\n                        context.completeLoad(moduleName);\n\n                        //Bind the value of that module to the value for this\n                        //resource ID.\n                        localRequire([moduleName], load);\n                    });\n\n                    //Use parentName here since the plugin's name is not reliable,\n                    //could be some weird string with no path that actually wants to\n                    //reference the parentName's path.\n                    plugin.load(map.name, localRequire, load, config);\n                }));\n\n                context.enable(pluginMap, this);\n                this.pluginMaps[pluginMap.id] = pluginMap;\n            },\n\n            enable: function () {\n                enabledRegistry[this.map.id] = this;\n                this.enabled = true;\n\n                //Set flag mentioning that the module is enabling,\n                //so that immediate calls to the defined callbacks\n                //for dependencies do not trigger inadvertent load\n                //with the depCount still being zero.\n                this.enabling = true;\n\n                //Enable each dependency\n                each(this.depMaps, bind(this, function (depMap, i) {\n                    var id, mod, handler;\n\n                    if (typeof depMap === 'string') {\n                        //Dependency needs to be converted to a depMap\n                        //and wired up to this module.\n                        depMap = makeModuleMap(depMap,\n                                               (this.map.isDefine ? this.map : this.map.parentMap),\n                                               false,\n                                               !this.skipMap);\n                        this.depMaps[i] = depMap;\n\n                        handler = getOwn(handlers, depMap.id);\n\n                        if (handler) {\n                            this.depExports[i] = handler(this);\n                            return;\n                        }\n\n                        this.depCount += 1;\n\n                        on(depMap, 'defined', bind(this, function (depExports) {\n                            if (this.undefed) {\n                                return;\n                            }\n                            this.defineDep(i, depExports);\n                            this.check();\n                        }));\n\n                        if (this.errback) {\n                            on(depMap, 'error', bind(this, this.errback));\n                        } else if (this.events.error) {\n                            // No direct errback on this module, but something\n                            // else is listening for errors, so be sure to\n                            // propagate the error correctly.\n                            on(depMap, 'error', bind(this, function(err) {\n                                this.emit('error', err);\n                            }));\n                        }\n                    }\n\n                    id = depMap.id;\n                    mod = registry[id];\n\n                    //Skip special modules like 'require', 'exports', 'module'\n                    //Also, don't call enable if it is already enabled,\n                    //important in circular dependency cases.\n                    if (!hasProp(handlers, id) && mod && !mod.enabled) {\n                        context.enable(depMap, this);\n                    }\n                }));\n\n                //Enable each plugin that is used in\n                //a dependency\n                eachProp(this.pluginMaps, bind(this, function (pluginMap) {\n                    var mod = getOwn(registry, pluginMap.id);\n                    if (mod && !mod.enabled) {\n                        context.enable(pluginMap, this);\n                    }\n                }));\n\n                this.enabling = false;\n\n                this.check();\n            },\n\n            on: function (name, cb) {\n                var cbs = this.events[name];\n                if (!cbs) {\n                    cbs = this.events[name] = [];\n                }\n                cbs.push(cb);\n            },\n\n            emit: function (name, evt) {\n                each(this.events[name], function (cb) {\n                    cb(evt);\n                });\n                if (name === 'error') {\n                    //Now that the error handler was triggered, remove\n                    //the listeners, since this broken Module instance\n                    //can stay around for a while in the registry.\n                    delete this.events[name];\n                }\n            }\n        };\n\n        function callGetModule(args) {\n            //Skip modules already defined.\n            if (!hasProp(defined, args[0])) {\n                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);\n            }\n        }\n\n        function removeListener(node, func, name, ieName) {\n            //Favor detachEvent because of IE9\n            //issue, see attachEvent/addEventListener comment elsewhere\n            //in this file.\n            if (node.detachEvent && !isOpera) {\n                //Probably IE. If not it will throw an error, which will be\n                //useful to know.\n                if (ieName) {\n                    node.detachEvent(ieName, func);\n                }\n            } else {\n                node.removeEventListener(name, func, false);\n            }\n        }\n\n        /**\n         * Given an event from a script node, get the requirejs info from it,\n         * and then removes the event listeners on the node.\n         * @param {Event} evt\n         * @returns {Object}\n         */\n        function getScriptData(evt) {\n            //Using currentTarget instead of target for Firefox 2.0's sake. Not\n            //all old browsers will be supported, but this one was easy enough\n            //to support and still makes sense.\n            var node = evt.currentTarget || evt.srcElement;\n\n            //Remove the listeners once here.\n            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');\n            removeListener(node, context.onScriptError, 'error');\n\n            return {\n                node: node,\n                id: node && node.getAttribute('data-requiremodule')\n            };\n        }\n\n        function intakeDefines() {\n            var args;\n\n            //Any defined modules in the global queue, intake them now.\n            takeGlobalQueue();\n\n            //Make sure any remaining defQueue items get properly processed.\n            while (defQueue.length) {\n                args = defQueue.shift();\n                if (args[0] === null) {\n                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' +\n                        args[args.length - 1]));\n                } else {\n                    //args are id, deps, factory. Should be normalized by the\n                    //define() function.\n                    callGetModule(args);\n                }\n            }\n            context.defQueueMap = {};\n        }\n\n        context = {\n            config: config,\n            contextName: contextName,\n            registry: registry,\n            defined: defined,\n            urlFetched: urlFetched,\n            defQueue: defQueue,\n            defQueueMap: {},\n            Module: Module,\n            makeModuleMap: makeModuleMap,\n            nextTick: req.nextTick,\n            onError: onError,\n\n            /**\n             * Set a configuration for the context.\n             * @param {Object} cfg config object to integrate.\n             */\n            configure: function (cfg) {\n                //Make sure the baseUrl ends in a slash.\n                if (cfg.baseUrl) {\n                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {\n                        cfg.baseUrl += '/';\n                    }\n                }\n\n                // Convert old style urlArgs string to a function.\n                if (typeof cfg.urlArgs === 'string') {\n                    var urlArgs = cfg.urlArgs;\n                    cfg.urlArgs = function(id, url) {\n                        return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;\n                    };\n                }\n\n                //Save off the paths since they require special processing,\n                //they are additive.\n                var shim = config.shim,\n                    objs = {\n                        paths: true,\n                        bundles: true,\n                        config: true,\n                        map: true\n                    };\n\n                eachProp(cfg, function (value, prop) {\n                    if (objs[prop]) {\n                        if (!config[prop]) {\n                            config[prop] = {};\n                        }\n                        mixin(config[prop], value, true, true);\n                    } else {\n                        config[prop] = value;\n                    }\n                });\n\n                //Reverse map the bundles\n                if (cfg.bundles) {\n                    eachProp(cfg.bundles, function (value, prop) {\n                        each(value, function (v) {\n                            if (v !== prop) {\n                                bundlesMap[v] = prop;\n                            }\n                        });\n                    });\n                }\n\n                //Merge shim\n                if (cfg.shim) {\n                    eachProp(cfg.shim, function (value, id) {\n                        //Normalize the structure\n                        if (isArray(value)) {\n                            value = {\n                                deps: value\n                            };\n                        }\n                        if ((value.exports || value.init) && !value.exportsFn) {\n                            value.exportsFn = context.makeShimExports(value);\n                        }\n                        shim[id] = value;\n                    });\n                    config.shim = shim;\n                }\n\n                //Adjust packages if necessary.\n                if (cfg.packages) {\n                    each(cfg.packages, function (pkgObj) {\n                        var location, name;\n\n                        pkgObj = typeof pkgObj === 'string' ? {name: pkgObj} : pkgObj;\n\n                        name = pkgObj.name;\n                        location = pkgObj.location;\n                        if (location) {\n                            config.paths[name] = pkgObj.location;\n                        }\n\n                        //Save pointer to main module ID for pkg name.\n                        //Remove leading dot in main, so main paths are normalized,\n                        //and remove any trailing .js, since different package\n                        //envs have different conventions: some use a module name,\n                        //some use a file name.\n                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')\n                                     .replace(currDirRegExp, '')\n                                     .replace(jsSuffixRegExp, '');\n                    });\n                }\n\n                //If there are any \"waiting to execute\" modules in the registry,\n                //update the maps for them, since their info, like URLs to load,\n                //may have changed.\n                eachProp(registry, function (mod, id) {\n                    //If module already has init called, since it is too\n                    //late to modify them, and ignore unnormalized ones\n                    //since they are transient.\n                    if (!mod.inited && !mod.map.unnormalized) {\n                        mod.map = makeModuleMap(id, null, true);\n                    }\n                });\n\n                //If a deps array or a config callback is specified, then call\n                //require with those args. This is useful when require is defined as a\n                //config object before require.js is loaded.\n                if (cfg.deps || cfg.callback) {\n                    context.require(cfg.deps || [], cfg.callback);\n                }\n            },\n\n            makeShimExports: function (value) {\n                function fn() {\n                    var ret;\n                    if (value.init) {\n                        ret = value.init.apply(global, arguments);\n                    }\n                    return ret || (value.exports && getGlobal(value.exports));\n                }\n                return fn;\n            },\n\n            makeRequire: function (relMap, options) {\n                options = options || {};\n\n                function localRequire(deps, callback, errback) {\n                    var id, map, requireMod;\n\n                    if (options.enableBuildCallback && callback && isFunction(callback)) {\n                        callback.__requireJsBuild = true;\n                    }\n\n                    if (typeof deps === 'string') {\n                        if (isFunction(callback)) {\n                            //Invalid call\n                            return onError(makeError('requireargs', 'Invalid require call'), errback);\n                        }\n\n                        //If require|exports|module are requested, get the\n                        //value for them from the special handlers. Caveat:\n                        //this only works while module is being defined.\n                        if (relMap && hasProp(handlers, deps)) {\n                            return handlers[deps](registry[relMap.id]);\n                        }\n\n                        //Synchronous access to one module. If require.get is\n                        //available (as in the Node adapter), prefer that.\n                        if (req.get) {\n                            return req.get(context, deps, relMap, localRequire);\n                        }\n\n                        //Normalize module name, if it contains . or ..\n                        map = makeModuleMap(deps, relMap, false, true);\n                        id = map.id;\n\n                        if (!hasProp(defined, id)) {\n                            return onError(makeError('notloaded', 'Module name \"' +\n                                        id +\n                                        '\" has not been loaded yet for context: ' +\n                                        contextName +\n                                        (relMap ? '' : '. Use require([])')));\n                        }\n                        return defined[id];\n                    }\n\n                    //Grab defines waiting in the global queue.\n                    intakeDefines();\n\n                    //Mark all the dependencies as needing to be loaded.\n                    context.nextTick(function () {\n                        //Some defines could have been added since the\n                        //require call, collect them.\n                        intakeDefines();\n\n                        requireMod = getModule(makeModuleMap(null, relMap));\n\n                        //Store if map config should be applied to this require\n                        //call for dependencies.\n                        requireMod.skipMap = options.skipMap;\n\n                        requireMod.init(deps, callback, errback, {\n                            enabled: true\n                        });\n\n                        checkLoaded();\n                    });\n\n                    return localRequire;\n                }\n\n                mixin(localRequire, {\n                    isBrowser: isBrowser,\n\n                    /**\n                     * Converts a module name + .extension into an URL path.\n                     * *Requires* the use of a module name. It does not support using\n                     * plain URLs like nameToUrl.\n                     */\n                    toUrl: function (moduleNamePlusExt) {\n                        var ext,\n                            index = moduleNamePlusExt.lastIndexOf('.'),\n                            segment = moduleNamePlusExt.split('/')[0],\n                            isRelative = segment === '.' || segment === '..';\n\n                        //Have a file extension alias, and it is not the\n                        //dots from a relative path.\n                        if (index !== -1 && (!isRelative || index > 1)) {\n                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);\n                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);\n                        }\n\n                        return context.nameToUrl(normalize(moduleNamePlusExt,\n                                                relMap && relMap.id, true), ext,  true);\n                    },\n\n                    defined: function (id) {\n                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);\n                    },\n\n                    specified: function (id) {\n                        id = makeModuleMap(id, relMap, false, true).id;\n                        return hasProp(defined, id) || hasProp(registry, id);\n                    }\n                });\n\n                //Only allow undef on top level require calls\n                if (!relMap) {\n                    localRequire.undef = function (id) {\n                        //Bind any waiting define() calls to this context,\n                        //fix for #408\n                        takeGlobalQueue();\n\n                        var map = makeModuleMap(id, relMap, true),\n                            mod = getOwn(registry, id);\n\n                        mod.undefed = true;\n                        removeScript(id);\n\n                        delete defined[id];\n                        delete urlFetched[map.url];\n                        delete undefEvents[id];\n\n                        //Clean queued defines too. Go backwards\n                        //in array so that the splices do not\n                        //mess up the iteration.\n                        eachReverse(defQueue, function(args, i) {\n                            if (args[0] === id) {\n                                defQueue.splice(i, 1);\n                            }\n                        });\n                        delete context.defQueueMap[id];\n\n                        if (mod) {\n                            //Hold on to listeners in case the\n                            //module will be attempted to be reloaded\n                            //using a different config.\n                            if (mod.events.defined) {\n                                undefEvents[id] = mod.events;\n                            }\n\n                            cleanRegistry(id);\n                        }\n                    };\n                }\n\n                return localRequire;\n            },\n\n            /**\n             * Called to enable a module if it is still in the registry\n             * awaiting enablement. A second arg, parent, the parent module,\n             * is passed in for context, when this method is overridden by\n             * the optimizer. Not shown here to keep code compact.\n             */\n            enable: function (depMap) {\n                var mod = getOwn(registry, depMap.id);\n                if (mod) {\n                    getModule(depMap).enable();\n                }\n            },\n\n            /**\n             * Internal method used by environment adapters to complete a load event.\n             * A load event could be a script load or just a load pass from a synchronous\n             * load call.\n             * @param {String} moduleName the name of the module to potentially complete.\n             */\n            completeLoad: function (moduleName) {\n                var found, args, mod,\n                    shim = getOwn(config.shim, moduleName) || {},\n                    shExports = shim.exports;\n\n                takeGlobalQueue();\n\n                while (defQueue.length) {\n                    args = defQueue.shift();\n                    if (args[0] === null) {\n                        args[0] = moduleName;\n                        //If already found an anonymous module and bound it\n                        //to this name, then this is some other anon module\n                        //waiting for its completeLoad to fire.\n                        if (found) {\n                            break;\n                        }\n                        found = true;\n                    } else if (args[0] === moduleName) {\n                        //Found matching define call for this script!\n                        found = true;\n                    }\n\n                    callGetModule(args);\n                }\n                context.defQueueMap = {};\n\n                //Do this after the cycle of callGetModule in case the result\n                //of those calls/init calls changes the registry.\n                mod = getOwn(registry, moduleName);\n\n                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {\n                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {\n                        if (hasPathFallback(moduleName)) {\n                            return;\n                        } else {\n                            return onError(makeError('nodefine',\n                                             'No define call for ' + moduleName,\n                                             null,\n                                             [moduleName]));\n                        }\n                    } else {\n                        //A script that does not call define(), so just simulate\n                        //the call for it.\n                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);\n                    }\n                }\n\n                checkLoaded();\n            },\n\n            /**\n             * Converts a module name to a file path. Supports cases where\n             * moduleName may actually be just an URL.\n             * Note that it **does not** call normalize on the moduleName,\n             * it is assumed to have already been normalized. This is an\n             * internal API, not a public one. Use toUrl for the public API.\n             */\n            nameToUrl: function (moduleName, ext, skipExt) {\n                var paths, syms, i, parentModule, url,\n                    parentPath, bundleId,\n                    pkgMain = getOwn(config.pkgs, moduleName);\n\n                if (pkgMain) {\n                    moduleName = pkgMain;\n                }\n\n                bundleId = getOwn(bundlesMap, moduleName);\n\n                if (bundleId) {\n                    return context.nameToUrl(bundleId, ext, skipExt);\n                }\n\n                //If a colon is in the URL, it indicates a protocol is used and it is just\n                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)\n                //or ends with .js, then assume the user meant to use an url and not a module id.\n                //The slash is important for protocol-less URLs as well as full paths.\n                if (req.jsExtRegExp.test(moduleName)) {\n                    //Just a plain path, not module name lookup, so just return it.\n                    //Add extension if it is included. This is a bit wonky, only non-.js things pass\n                    //an extension, this method probably needs to be reworked.\n                    url = moduleName + (ext || '');\n                } else {\n                    //A module that needs to be converted to a path.\n                    paths = config.paths;\n\n                    syms = moduleName.split('/');\n                    //For each module name segment, see if there is a path\n                    //registered for it. Start with most specific name\n                    //and work up from it.\n                    for (i = syms.length; i > 0; i -= 1) {\n                        parentModule = syms.slice(0, i).join('/');\n\n                        parentPath = getOwn(paths, parentModule);\n                        if (parentPath) {\n                            //If an array, it means there are a few choices,\n                            //Choose the one that is desired\n                            if (isArray(parentPath)) {\n                                parentPath = parentPath[0];\n                            }\n                            syms.splice(0, i, parentPath);\n                            break;\n                        }\n                    }\n\n                    //Join the path parts together, then figure out if baseUrl is needed.\n                    url = syms.join('/');\n                    url += (ext || (/^data:|^blob:|?/.test(url) || skipExt ? '' : '.js'));\n                    url = (url.charAt(0) === '/' || url.match(/^[w+.-]+:/) ? '' : config.baseUrl) + url;\n                }\n\n                return config.urlArgs && !/^blob:/.test(url) ?\n                       url + config.urlArgs(moduleName, url) : url;\n            },\n\n            //Delegates to req.load. Broken out as a separate function to\n            //allow overriding in the optimizer.\n            load: function (id, url) {\n                req.load(context, id, url);\n            },\n\n            /**\n             * Executes a module callback function. Broken out as a separate function\n             * solely to allow the build system to sequence the files in the built\n             * layer in the right sequence.\n             *\n             * @private\n             */\n            execCb: function (name, callback, args, exports) {\n                return callback.apply(exports, args);\n            },\n\n            /**\n             * callback for script loads, used to check status of loading.\n             *\n             * @param {Event} evt the event from the browser for the script\n             * that was loaded.\n             */\n            onScriptLoad: function (evt) {\n                //Using currentTarget instead of target for Firefox 2.0's sake. Not\n                //all old browsers will be supported, but this one was easy enough\n                //to support and still makes sense.\n                if (evt.type === 'load' ||\n                        (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\n                    //Reset interactive script so a script node is not held onto for\n                    //to long.\n                    interactiveScript = null;\n\n                    //Pull out the name of the module and the context.\n                    var data = getScriptData(evt);\n                    context.completeLoad(data.id);\n                }\n            },\n\n            /**\n             * Callback for script errors.\n             */\n            onScriptError: function (evt) {\n                var data = getScriptData(evt);\n                if (!hasPathFallback(data.id)) {\n                    var parents = [];\n                    eachProp(registry, function(value, key) {\n                        if (key.indexOf('_@r') !== 0) {\n                            each(value.depMaps, function(depMap) {\n                                if (depMap.id === data.id) {\n                                    parents.push(key);\n                                    return true;\n                                }\n                            });\n                        }\n                    });\n                    return onError(makeError('scripterror', 'Script error for \"' + data.id +\n                                             (parents.length ?\n                                             '\", needed by: ' + parents.join(', ') :\n                                             '\"'), evt, [data.id]));\n                }\n            }\n        };\n\n        context.require = context.makeRequire();\n        return context;\n    }\n\n    /**\n     * Main entry point.\n     *\n     * If the only argument to require is a string, then the module that\n     * is represented by that string is fetched for the appropriate context.\n     *\n     * If the first argument is an array, then it will be treated as an array\n     * of dependency string names to fetch. An optional function callback can\n     * be specified to execute when all of those dependencies are available.\n     *\n     * Make a local req variable to help Caja compliance (it assumes things\n     * on a require that are not standardized), and to give a short\n     * name for minification/local scope use.\n     */\n    req = requirejs = function (deps, callback, errback, optional) {\n\n        //Find the right context, use default\n        var context, config,\n            contextName = defContextName;\n\n        // Determine if have config object in the call.\n        if (!isArray(deps) && typeof deps !== 'string') {\n            // deps is a config object\n            config = deps;\n            if (isArray(callback)) {\n                // Adjust args if there are dependencies\n                deps = callback;\n                callback = errback;\n                errback = optional;\n            } else {\n                deps = [];\n            }\n        }\n\n        if (config && config.context) {\n            contextName = config.context;\n        }\n\n        context = getOwn(contexts, contextName);\n        if (!context) {\n            context = contexts[contextName] = req.s.newContext(contextName);\n        }\n\n        if (config) {\n            context.configure(config);\n        }\n\n        return context.require(deps, callback, errback);\n    };\n\n    /**\n     * Support require.config() to make it easier to cooperate with other\n     * AMD loaders on globally agreed names.\n     */\n    req.config = function (config) {\n        return req(config);\n    };\n\n    /**\n     * Execute something after the current tick\n     * of the event loop. Override for other envs\n     * that have a better solution than setTimeout.\n     * @param  {Function} fn function to execute later.\n     */\n    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {\n        setTimeout(fn, 4);\n    } : function (fn) { fn(); };\n\n    /**\n     * Export require as a global, but only if it does not already exist.\n     */\n    if (!require) {\n        require = req;\n    }\n\n    req.version = version;\n\n    //Used to filter out dependencies that are already paths.\n    req.jsExtRegExp = /^/|:|?|.js$/;\n    req.isBrowser = isBrowser;\n    s = req.s = {\n        contexts: contexts,\n        newContext: newContext\n    };\n\n    //Create default context.\n    req({});\n\n    //Exports some context-sensitive methods on global require.\n    each([\n        'toUrl',\n        'undef',\n        'defined',\n        'specified'\n    ], function (prop) {\n        //Reference from contexts instead of early binding to default context,\n        //so that during builds, the latest instance of the default context\n        //with its config gets used.\n        req[prop] = function () {\n            var ctx = contexts[defContextName];\n            return ctx.require[prop].apply(ctx, arguments);\n        };\n    });\n\n    if (isBrowser) {\n        head = s.head = document.getElementsByTagName('head')[0];\n        //If BASE tag is in play, using appendChild is a problem for IE6.\n        //When that browser dies, this can be removed. Details in this jQuery bug:\n        //http://dev.jquery.com/ticket/2709\n        baseElement = document.getElementsByTagName('base')[0];\n        if (baseElement) {\n            head = s.head = baseElement.parentNode;\n        }\n    }\n\n    /**\n     * Any errors that require explicitly generates will be passed to this\n     * function. Intercept/override it if you want custom error handling.\n     * @param {Error} err the error object.\n     */\n    req.onError = defaultOnError;\n\n    /**\n     * Creates the node for the load command. Only used in browser envs.\n     */\n    req.createNode = function (config, moduleName, url) {\n        var node = config.xhtml ?\n                document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :\n                document.createElement('script');\n        node.type = config.scriptType || 'text/javascript';\n        node.charset = 'utf-8';\n        node.async = true;\n        return node;\n    };\n\n    /**\n     * Does the request to load a module for the browser case.\n     * Make this a separate function to allow other environments\n     * to override it.\n     *\n     * @param {Object} context the require context to find state.\n     * @param {String} moduleName the name of the module.\n     * @param {Object} url the URL to the module.\n     */\n    req.load = function (context, moduleName, url) {\n        var config = (context && context.config) || {},\n            node;\n        if (isBrowser) {\n            //In the browser so use a script tag\n            node = req.createNode(config, moduleName, url);\n\n            node.setAttribute('data-requirecontext', context.contextName);\n            node.setAttribute('data-requiremodule', moduleName);\n\n            //Set up load listener. Test attachEvent first because IE9 has\n            //a subtle issue in its addEventListener and script onload firings\n            //that do not match the behavior of all other browsers with\n            //addEventListener support, which fire the onload event for a\n            //script right after the script execution. See:\n            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution\n            //UNFORTUNATELY Opera implements attachEvent but does not follow the script\n            //script execution mode.\n            if (node.attachEvent &&\n                    //Check if node.attachEvent is artificially added by custom script or\n                    //natively supported by browser\n                    //read https://github.com/requirejs/requirejs/issues/187\n                    //if we can NOT find [native code] then it must NOT natively supported.\n                    //in IE8, node.attachEvent does not have toString()\n                    //Note the test for \"[native code\" with no closing brace, see:\n                    //https://github.com/requirejs/requirejs/issues/273\n                    !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\n                    !isOpera) {\n                //Probably IE. IE (at least 6-8) do not fire\n                //script onload right after executing the script, so\n                //we cannot tie the anonymous define call to a name.\n                //However, IE reports the script as being in 'interactive'\n                //readyState at the time of the define call.\n                useInteractive = true;\n\n                node.attachEvent('onreadystatechange', context.onScriptLoad);\n                //It would be great to add an error handler here to catch\n                //404s in IE9+. However, onreadystatechange will fire before\n                //the error handler, so that does not help. If addEventListener\n                //is used, then IE will fire error before load, but we cannot\n                //use that pathway given the connect.microsoft.com issue\n                //mentioned above about not doing the 'script execute,\n                //then fire the script load event listener before execute\n                //next script' that other browsers do.\n                //Best hope: IE10 fixes the issues,\n                //and then destroys all installs of IE 6-9.\n                //node.attachEvent('onerror', context.onScriptError);\n            } else {\n                node.addEventListener('load', context.onScriptLoad, false);\n                node.addEventListener('error', context.onScriptError, false);\n            }\n            node.src = url;\n\n            //Calling onNodeCreated after all properties on the node have been\n            //set, but before it is placed in the DOM.\n            if (config.onNodeCreated) {\n                config.onNodeCreated(node, config, moduleName, url);\n            }\n\n            //For some cache cases in IE 6-8, the script executes before the end\n            //of the appendChild execution, so to tie an anonymous define\n            //call to the module name (which is stored on the node), hold on\n            //to a reference to this node, but clear after the DOM insertion.\n            currentlyAddingScript = node;\n            if (baseElement) {\n                head.insertBefore(node, baseElement);\n            } else {\n                head.appendChild(node);\n            }\n            currentlyAddingScript = null;\n\n            return node;\n        } else if (isWebWorker) {\n            try {\n                //In a web worker, use importScripts. This is not a very\n                //efficient use of importScripts, importScripts will block until\n                //its script is downloaded and evaluated. However, if web workers\n                //are in play, the expectation is that a build has been done so\n                //that only one script needs to be loaded anyway. This may need\n                //to be reevaluated if other use cases become common.\n\n                // Post a task to the event loop to work around a bug in WebKit\n                // where the worker gets garbage-collected after calling\n                // importScripts(): https://webkit.org/b/153317\n                setTimeout(function() {}, 0);\n                importScripts(url);\n\n                //Account for anonymous modules\n                context.completeLoad(moduleName);\n            } catch (e) {\n                context.onError(makeError('importscripts',\n                                'importScripts failed for ' +\n                                    moduleName + ' at ' + url,\n                                e,\n                                [moduleName]));\n            }\n        }\n    };\n\n    function getInteractiveScript() {\n        if (interactiveScript && interactiveScript.readyState === 'interactive') {\n            return interactiveScript;\n        }\n\n        eachReverse(scripts(), function (script) {\n            if (script.readyState === 'interactive') {\n                return (interactiveScript = script);\n            }\n        });\n        return interactiveScript;\n    }\n\n    //Look for a data-main script attribute, which could also adjust the baseUrl.\n    if (isBrowser && !cfg.skipDataMain) {\n        //Figure out baseUrl. Get it from the script tag with require.js in it.\n        eachReverse(scripts(), function (script) {\n            //Set the 'head' where we can append children by\n            //using the script's parent.\n            if (!head) {\n                head = script.parentNode;\n            }\n\n            //Look for a data-main attribute to set main script for the page\n            //to load. If it is there, the path to data main becomes the\n            //baseUrl, if it is not already set.\n            dataMain = script.getAttribute('data-main');\n            if (dataMain) {\n                //Preserve dataMain in case it is a path (i.e. contains '?')\n                mainScript = dataMain;\n\n                //Set final baseUrl if there is not already an explicit one,\n                //but only do so if the data-main value is not a loader plugin\n                //module ID.\n                if (!cfg.baseUrl && mainScript.indexOf('!') === -1) {\n                    //Pull off the directory of data-main for use as the\n                    //baseUrl.\n                    src = mainScript.split('/');\n                    mainScript = src.pop();\n                    subPath = src.length ? src.join('/')  + '/' : './';\n\n                    cfg.baseUrl = subPath;\n                }\n\n                //Strip off any trailing .js since mainScript is now\n                //like a module name.\n                mainScript = mainScript.replace(jsSuffixRegExp, '');\n\n                //If mainScript is still a path, fall back to dataMain\n                if (req.jsExtRegExp.test(mainScript)) {\n                    mainScript = dataMain;\n                }\n\n                //Put the data-main script in the files to load.\n                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];\n\n                return true;\n            }\n        });\n    }\n\n    /**\n     * The function that handles definitions of modules. Differs from\n     * require() in that a string for the module should be the first argument,\n     * and the function to execute after dependencies are loaded should\n     * return a value to define the module corresponding to the first argument's\n     * name.\n     */\n    define = function (name, deps, callback) {\n        var node, context;\n\n        //Allow for anonymous modules\n        if (typeof name !== 'string') {\n            //Adjust args appropriately\n            callback = deps;\n            deps = name;\n            name = null;\n        }\n\n        //This module may not have dependencies\n        if (!isArray(deps)) {\n            callback = deps;\n            deps = null;\n        }\n\n        //If no name, and callback is a function, then figure out if it a\n        //CommonJS thing with dependencies.\n        if (!deps && isFunction(callback)) {\n            deps = [];\n            //Remove comments from the callback string,\n            //look for require calls, and pull them into the dependencies,\n            //but only if there are function args.\n            if (callback.length) {\n                callback\n                    .toString()\n                    .replace(commentRegExp, commentReplace)\n                    .replace(cjsRequireRegExp, function (match, dep) {\n                        deps.push(dep);\n                    });\n\n                //May be a CommonJS thing even without require calls, but still\n                //could use exports, and module. Avoid doing exports and module\n                //work though if it just needs require.\n                //REQUIRES the function to expect the CommonJS variables in the\n                //order listed below.\n                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);\n            }\n        }\n\n        //If in IE 6-8 and hit an anonymous define() call, do the interactive\n        //work.\n        if (useInteractive) {\n            node = currentlyAddingScript || getInteractiveScript();\n            if (node) {\n                if (!name) {\n                    name = node.getAttribute('data-requiremodule');\n                }\n                context = contexts[node.getAttribute('data-requirecontext')];\n            }\n        }\n\n        //Always save off evaluating the def call until the script onload handler.\n        //This allows multiple modules to be in a file without prematurely\n        //tracing dependencies, and allows for anonymous module support,\n        //where the module name is not known until the script onload event\n        //occurs. If no context, use the global queue, and get it processed\n        //in the onscript load callback.\n        if (context) {\n            context.defQueue.push([name, deps, callback]);\n            context.defQueueMap[name] = true;\n        } else {\n            globalDefQueue.push([name, deps, callback]);\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n\n    /**\n     * Executes the text. Normally just uses eval, but can be modified\n     * to use a better, environment-specific call. Only used for transpiling\n     * loader plugins, not for plain JS modules.\n     * @param {String} text the text to execute/evaluate.\n     */\n    req.exec = function (text) {\n        /*jslint evil: true */\n        return eval(text);\n    };\n\n    //Set up with config info.\n    req(cfg);\n}(typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this, (typeof setTimeout === 'undefined' ? undefined : setTimeout)));";
+export default requirejsCode;
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js
new file mode 100644
index 0000000..ec1e615
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js
@@ -0,0 +1,2149 @@
+// Auto-generated from require.js
+export const requirejsCode = `/** vim: et:ts=4:sw=4:sts=4
+ * @license RequireJS 2.3.8 Copyright jQuery Foundation and other contributors.
+ * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
+ */
+//Not using strict: uneven strict support in browsers, #392, and causes
+//problems with requirejs.exec()/transpiler plugins that may not be strict.
+/*jslint regexp: true, nomen: true, sloppy: true */
+/*global window, navigator, document, importScripts, setTimeout, opera */
+
+var requirejs, require, define;
+(function (global, setTimeout) {
+    var req, s, head, baseElement, dataMain, src,
+        interactiveScript, currentlyAddingScript, mainScript, subPath,
+        version = '2.3.8',
+        commentRegExp = /\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*\$/mg,
+        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
+        jsSuffixRegExp = /\.js\$/,
+        currDirRegExp = /^\.\//,
+        op = Object.prototype,
+        ostring = op.toString,
+        hasOwn = op.hasOwnProperty,
+        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),
+        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',
+        //PS3 indicates loaded and complete, but need to wait for complete
+        //specifically. Sequence is 'loading', 'loaded', execution,
+        // then 'complete'. The UA check is unfortunate, but not sure how
+        //to feature test w/o causing perf issues.
+        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?
+                      /^complete\$/ : /^(complete|loaded)\$/,
+        defContextName = '_',
+        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.
+        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',
+        contexts = {},
+        cfg = {},
+        globalDefQueue = [],
+        useInteractive = false;
+
+    //Could match something like ')//comment', do not lose the prefix to comment.
+    function commentReplace(match, singlePrefix) {
+        return singlePrefix || '';
+    }
+
+    function isFunction(it) {
+        return ostring.call(it) === '[object Function]';
+    }
+
+    function isArray(it) {
+        return ostring.call(it) === '[object Array]';
+    }
+
+    /**
+     * Helper function for iterating over an array. If the func returns
+     * a true value, it will break out of the loop.
+     */
+    function each(ary, func) {
+        if (ary) {
+            var i;
+            for (i = 0; i < ary.length; i += 1) {
+                if (ary[i] && func(ary[i], i, ary)) {
+                    break;
+                }
+            }
+        }
+    }
+
+    /**
+     * Helper function for iterating over an array backwards. If the func
+     * returns a true value, it will break out of the loop.
+     */
+    function eachReverse(ary, func) {
+        if (ary) {
+            var i;
+            for (i = ary.length - 1; i > -1; i -= 1) {
+                if (ary[i] && func(ary[i], i, ary)) {
+                    break;
+                }
+            }
+        }
+    }
+
+    function hasProp(obj, prop) {
+        return hasOwn.call(obj, prop);
+    }
+
+    function getOwn(obj, prop) {
+        return hasProp(obj, prop) && obj[prop];
+    }
+
+    /**
+     * Cycles over properties in an object and calls a function for each
+     * property value. If the function returns a truthy value, then the
+     * iteration is stopped.
+     */
+    function eachProp(obj, func) {
+        var prop;
+        for (prop in obj) {
+            if (hasProp(obj, prop) && prop !== '__proto__' && prop !== 'constructor') {
+                if (func(obj[prop], prop)) {
+                    break;
+                }
+            }
+        }
+    }
+
+    /**
+     * Simple function to mix in properties from source into target,
+     * but only if target does not already have a property of the same name.
+     */
+    function mixin(target, source, force, deepStringMixin) {
+        if (source) {
+            eachProp(source, function (value, prop) {
+                if (force || !hasProp(target, prop)) {
+                    if (deepStringMixin && typeof value === 'object' && value &&
+                        !isArray(value) && !isFunction(value) &&
+                        !(value instanceof RegExp)) {
+
+                        if (!target[prop]) {
+                            target[prop] = {};
+                        }
+                        mixin(target[prop], value, force, deepStringMixin);
+                    } else {
+                        target[prop] = value;
+                    }
+                }
+            });
+        }
+        return target;
+    }
+
+    //Similar to Function.prototype.bind, but the 'this' object is specified
+    //first, since it is easier to read/figure out what 'this' will be.
+    function bind(obj, fn) {
+        return function () {
+            return fn.apply(obj, arguments);
+        };
+    }
+
+    function scripts() {
+        return document.getElementsByTagName('script');
+    }
+
+    function defaultOnError(err) {
+        throw err;
+    }
+
+    //Allow getting a global that is expressed in
+    //dot notation, like 'a.b.c'.
+    function getGlobal(value) {
+        if (!value) {
+            return value;
+        }
+        var g = global;
+        each(value.split('.'), function (part) {
+            g = g[part];
+        });
+        return g;
+    }
+
+    /**
+     * Constructs an error with a pointer to an URL with more information.
+     * @param {String} id the error ID that maps to an ID on a web page.
+     * @param {String} message human readable error.
+     * @param {Error} [err] the original error, if there is one.
+     *
+     * @returns {Error}
+     */
+    function makeError(id, msg, err, requireModules) {
+        var e = new Error(msg + '
+https://requirejs.org/docs/errors.html#' + id);
+        e.requireType = id;
+        e.requireModules = requireModules;
+        if (err) {
+            e.originalError = err;
+        }
+        return e;
+    }
+
+    if (typeof define !== 'undefined') {
+        //If a define is already in play via another AMD loader,
+        //do not overwrite.
+        return;
+    }
+
+    if (typeof requirejs !== 'undefined') {
+        if (isFunction(requirejs)) {
+            //Do not overwrite an existing requirejs instance.
+            return;
+        }
+        cfg = requirejs;
+        requirejs = undefined;
+    }
+
+    //Allow for a require config object
+    if (typeof require !== 'undefined' && !isFunction(require)) {
+        //assume it is a config object.
+        cfg = require;
+        require = undefined;
+    }
+
+    function newContext(contextName) {
+        var inCheckLoaded, Module, context, handlers,
+            checkLoadedTimeoutId,
+            config = {
+                //Defaults. Do not set a default for map
+                //config to speed up normalize(), which
+                //will run faster if there is no default.
+                waitSeconds: 7,
+                baseUrl: './',
+                paths: {},
+                bundles: {},
+                pkgs: {},
+                shim: {},
+                config: {}
+            },
+            registry = {},
+            //registry of just enabled modules, to speed
+            //cycle breaking code when lots of modules
+            //are registered, but not activated.
+            enabledRegistry = {},
+            undefEvents = {},
+            defQueue = [],
+            defined = {},
+            urlFetched = {},
+            bundlesMap = {},
+            requireCounter = 1,
+            unnormalizedCounter = 1;
+
+        /**
+         * Trims the . and .. from an array of path segments.
+         * It will keep a leading path segment if a .. will become
+         * the first path segment, to help with module name lookups,
+         * which act like paths, but can be remapped. But the end result,
+         * all paths that use this function should look normalized.
+         * NOTE: this method MODIFIES the input array.
+         * @param {Array} ary the array of path segments.
+         */
+        function trimDots(ary) {
+            var i, part;
+            for (i = 0; i < ary.length; i++) {
+                part = ary[i];
+                if (part === '.') {
+                    ary.splice(i, 1);
+                    i -= 1;
+                } else if (part === '..') {
+                    // If at the start, or previous value is still ..,
+                    // keep them so that when converted to a path it may
+                    // still work when converted to a path, even though
+                    // as an ID it is less than ideal. In larger point
+                    // releases, may be better to just kick out an error.
+                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {
+                        continue;
+                    } else if (i > 0) {
+                        ary.splice(i - 1, 2);
+                        i -= 2;
+                    }
+                }
+            }
+        }
+
+        /**
+         * Given a relative module name, like ./something, normalize it to
+         * a real name that can be mapped to a path.
+         * @param {String} name the relative name
+         * @param {String} baseName a real name that the name arg is relative
+         * to.
+         * @param {Boolean} applyMap apply the map config to the value. Should
+         * only be done if this normalization is for a dependency ID.
+         * @returns {String} normalized name
+         */
+        function normalize(name, baseName, applyMap) {
+            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,
+                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,
+                baseParts = (baseName && baseName.split('/')),
+                map = config.map,
+                starMap = map && map['*'];
+
+            //Adjust any relative paths.
+            if (name) {
+                name = name.split('/');
+                lastIndex = name.length - 1;
+
+                // If wanting node ID compatibility, strip .js from end
+                // of IDs. Have to do this here, and not in nameToUrl
+                // because node allows either .js or non .js to map
+                // to same file.
+                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {
+                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');
+                }
+
+                // Starts with a '.' so need the baseName
+                if (name[0].charAt(0) === '.' && baseParts) {
+                    //Convert baseName to array, and lop off the last part,
+                    //so that . matches that 'directory' and not name of the baseName's
+                    //module. For instance, baseName of 'one/two/three', maps to
+                    //'one/two/three.js', but we want the directory, 'one/two' for
+                    //this normalization.
+                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);
+                    name = normalizedBaseParts.concat(name);
+                }
+
+                trimDots(name);
+                name = name.join('/');
+            }
+
+            //Apply map config if available.
+            if (applyMap && map && (baseParts || starMap)) {
+                nameParts = name.split('/');
+
+                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {
+                    nameSegment = nameParts.slice(0, i).join('/');
+
+                    if (baseParts) {
+                        //Find the longest baseName segment match in the config.
+                        //So, do joins on the biggest to smallest lengths of baseParts.
+                        for (j = baseParts.length; j > 0; j -= 1) {
+                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));
+
+                            //baseName segment has config, find if it has one for
+                            //this name.
+                            if (mapValue) {
+                                mapValue = getOwn(mapValue, nameSegment);
+                                if (mapValue) {
+                                    //Match, update name to the new value.
+                                    foundMap = mapValue;
+                                    foundI = i;
+                                    break outerLoop;
+                                }
+                            }
+                        }
+                    }
+
+                    //Check for a star map match, but just hold on to it,
+                    //if there is a shorter segment match later in a matching
+                    //config, then favor over this star map.
+                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {
+                        foundStarMap = getOwn(starMap, nameSegment);
+                        starI = i;
+                    }
+                }
+
+                if (!foundMap && foundStarMap) {
+                    foundMap = foundStarMap;
+                    foundI = starI;
+                }
+
+                if (foundMap) {
+                    nameParts.splice(0, foundI, foundMap);
+                    name = nameParts.join('/');
+                }
+            }
+
+            // If the name points to a package's name, use
+            // the package main instead.
+            pkgMain = getOwn(config.pkgs, name);
+
+            return pkgMain ? pkgMain : name;
+        }
+
+        function removeScript(name) {
+            if (isBrowser) {
+                each(scripts(), function (scriptNode) {
+                    if (scriptNode.getAttribute('data-requiremodule') === name &&
+                            scriptNode.getAttribute('data-requirecontext') === context.contextName) {
+                        scriptNode.parentNode.removeChild(scriptNode);
+                        return true;
+                    }
+                });
+            }
+        }
+
+        function hasPathFallback(id) {
+            var pathConfig = getOwn(config.paths, id);
+            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {
+                //Pop off the first array value, since it failed, and
+                //retry
+                pathConfig.shift();
+                context.require.undef(id);
+
+                //Custom require that does not do map translation, since
+                //ID is "absolute", already mapped/resolved.
+                context.makeRequire(null, {
+                    skipMap: true
+                })([id]);
+
+                return true;
+            }
+        }
+
+        //Turns a plugin!resource to [plugin, resource]
+        //with the plugin being undefined if the name
+        //did not have a plugin prefix.
+        function splitPrefix(name) {
+            var prefix,
+                index = name ? name.indexOf('!') : -1;
+            if (index > -1) {
+                prefix = name.substring(0, index);
+                name = name.substring(index + 1, name.length);
+            }
+            return [prefix, name];
+        }
+
+        /**
+         * Creates a module mapping that includes plugin prefix, module
+         * name, and path. If parentModuleMap is provided it will
+         * also normalize the name via require.normalize()
+         *
+         * @param {String} name the module name
+         * @param {String} [parentModuleMap] parent module map
+         * for the module name, used to resolve relative names.
+         * @param {Boolean} isNormalized: is the ID already normalized.
+         * This is true if this call is done for a define() module ID.
+         * @param {Boolean} applyMap: apply the map config to the ID.
+         * Should only be true if this map is for a dependency.
+         *
+         * @returns {Object}
+         */
+        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {
+            var url, pluginModule, suffix, nameParts,
+                prefix = null,
+                parentName = parentModuleMap ? parentModuleMap.name : null,
+                originalName = name,
+                isDefine = true,
+                normalizedName = '';
+
+            //If no name, then it means it is a require call, generate an
+            //internal name.
+            if (!name) {
+                isDefine = false;
+                name = '_@r' + (requireCounter += 1);
+            }
+
+            nameParts = splitPrefix(name);
+            prefix = nameParts[0];
+            name = nameParts[1];
+
+            if (prefix) {
+                prefix = normalize(prefix, parentName, applyMap);
+                pluginModule = getOwn(defined, prefix);
+            }
+
+            //Account for relative paths if there is a base name.
+            if (name) {
+                if (prefix) {
+                    if (isNormalized) {
+                        normalizedName = name;
+                    } else if (pluginModule && pluginModule.normalize) {
+                        //Plugin is loaded, use its normalize method.
+                        normalizedName = pluginModule.normalize(name, function (name) {
+                            return normalize(name, parentName, applyMap);
+                        });
+                    } else {
+                        // If nested plugin references, then do not try to
+                        // normalize, as it will not normalize correctly. This
+                        // places a restriction on resourceIds, and the longer
+                        // term solution is not to normalize until plugins are
+                        // loaded and all normalizations to allow for async
+                        // loading of a loader plugin. But for now, fixes the
+                        // common uses. Details in #1131
+                        normalizedName = name.indexOf('!') === -1 ?
+                                         normalize(name, parentName, applyMap) :
+                                         name;
+                    }
+                } else {
+                    //A regular module.
+                    normalizedName = normalize(name, parentName, applyMap);
+
+                    //Normalized name may be a plugin ID due to map config
+                    //application in normalize. The map config values must
+                    //already be normalized, so do not need to redo that part.
+                    nameParts = splitPrefix(normalizedName);
+                    prefix = nameParts[0];
+                    normalizedName = nameParts[1];
+                    isNormalized = true;
+
+                    url = context.nameToUrl(normalizedName);
+                }
+            }
+
+            //If the id is a plugin id that cannot be determined if it needs
+            //normalization, stamp it with a unique ID so two matching relative
+            //ids that may conflict can be separate.
+            suffix = prefix && !pluginModule && !isNormalized ?
+                     '_unnormalized' + (unnormalizedCounter += 1) :
+                     '';
+
+            return {
+                prefix: prefix,
+                name: normalizedName,
+                parentMap: parentModuleMap,
+                unnormalized: !!suffix,
+                url: url,
+                originalName: originalName,
+                isDefine: isDefine,
+                id: (prefix ?
+                        prefix + '!' + normalizedName :
+                        normalizedName) + suffix
+            };
+        }
+
+        function getModule(depMap) {
+            var id = depMap.id,
+                mod = getOwn(registry, id);
+
+            if (!mod) {
+                mod = registry[id] = new context.Module(depMap);
+            }
+
+            return mod;
+        }
+
+        function on(depMap, name, fn) {
+            var id = depMap.id,
+                mod = getOwn(registry, id);
+
+            if (hasProp(defined, id) &&
+                    (!mod || mod.defineEmitComplete)) {
+                if (name === 'defined') {
+                    fn(defined[id]);
+                }
+            } else {
+                mod = getModule(depMap);
+                if (mod.error && name === 'error') {
+                    fn(mod.error);
+                } else {
+                    mod.on(name, fn);
+                }
+            }
+        }
+
+        function onError(err, errback) {
+            var ids = err.requireModules,
+                notified = false;
+
+            if (errback) {
+                errback(err);
+            } else {
+                each(ids, function (id) {
+                    var mod = getOwn(registry, id);
+                    if (mod) {
+                        //Set error on module, so it skips timeout checks.
+                        mod.error = err;
+                        if (mod.events.error) {
+                            notified = true;
+                            mod.emit('error', err);
+                        }
+                    }
+                });
+
+                if (!notified) {
+                    req.onError(err);
+                }
+            }
+        }
+
+        /**
+         * Internal method to transfer globalQueue items to this context's
+         * defQueue.
+         */
+        function takeGlobalQueue() {
+            //Push all the globalDefQueue items into the context's defQueue
+            if (globalDefQueue.length) {
+                each(globalDefQueue, function(queueItem) {
+                    var id = queueItem[0];
+                    if (typeof id === 'string') {
+                        context.defQueueMap[id] = true;
+                    }
+                    defQueue.push(queueItem);
+                });
+                globalDefQueue = [];
+            }
+        }
+
+        handlers = {
+            'require': function (mod) {
+                if (mod.require) {
+                    return mod.require;
+                } else {
+                    return (mod.require = context.makeRequire(mod.map));
+                }
+            },
+            'exports': function (mod) {
+                mod.usingExports = true;
+                if (mod.map.isDefine) {
+                    if (mod.exports) {
+                        return (defined[mod.map.id] = mod.exports);
+                    } else {
+                        return (mod.exports = defined[mod.map.id] = {});
+                    }
+                }
+            },
+            'module': function (mod) {
+                if (mod.module) {
+                    return mod.module;
+                } else {
+                    return (mod.module = {
+                        id: mod.map.id,
+                        uri: mod.map.url,
+                        config: function () {
+                            return getOwn(config.config, mod.map.id) || {};
+                        },
+                        exports: mod.exports || (mod.exports = {})
+                    });
+                }
+            }
+        };
+
+        function cleanRegistry(id) {
+            //Clean up machinery used for waiting modules.
+            delete registry[id];
+            delete enabledRegistry[id];
+        }
+
+        function breakCycle(mod, traced, processed) {
+            var id = mod.map.id;
+
+            if (mod.error) {
+                mod.emit('error', mod.error);
+            } else {
+                traced[id] = true;
+                each(mod.depMaps, function (depMap, i) {
+                    var depId = depMap.id,
+                        dep = getOwn(registry, depId);
+
+                    //Only force things that have not completed
+                    //being defined, so still in the registry,
+                    //and only if it has not been matched up
+                    //in the module already.
+                    if (dep && !mod.depMatched[i] && !processed[depId]) {
+                        if (getOwn(traced, depId)) {
+                            mod.defineDep(i, defined[depId]);
+                            mod.check(); //pass false?
+                        } else {
+                            breakCycle(dep, traced, processed);
+                        }
+                    }
+                });
+                processed[id] = true;
+            }
+        }
+
+        function checkLoaded() {
+            var err, usingPathFallback,
+                waitInterval = config.waitSeconds * 1000,
+                //It is possible to disable the wait interval by using waitSeconds of 0.
+                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),
+                noLoads = [],
+                reqCalls = [],
+                stillLoading = false,
+                needCycleCheck = true;
+
+            //Do not bother if this call was a result of a cycle break.
+            if (inCheckLoaded) {
+                return;
+            }
+
+            inCheckLoaded = true;
+
+            //Figure out the state of all the modules.
+            eachProp(enabledRegistry, function (mod) {
+                var map = mod.map,
+                    modId = map.id;
+
+                //Skip things that are not enabled or in error state.
+                if (!mod.enabled) {
+                    return;
+                }
+
+                if (!map.isDefine) {
+                    reqCalls.push(mod);
+                }
+
+                if (!mod.error) {
+                    //If the module should be executed, and it has not
+                    //been inited and time is up, remember it.
+                    if (!mod.inited && expired) {
+                        if (hasPathFallback(modId)) {
+                            usingPathFallback = true;
+                            stillLoading = true;
+                        } else {
+                            noLoads.push(modId);
+                            removeScript(modId);
+                        }
+                    } else if (!mod.inited && mod.fetched && map.isDefine) {
+                        stillLoading = true;
+                        if (!map.prefix) {
+                            //No reason to keep looking for unfinished
+                            //loading. If the only stillLoading is a
+                            //plugin resource though, keep going,
+                            //because it may be that a plugin resource
+                            //is waiting on a non-plugin cycle.
+                            return (needCycleCheck = false);
+                        }
+                    }
+                }
+            });
+
+            if (expired && noLoads.length) {
+                //If wait time expired, throw error of unloaded modules.
+                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);
+                err.contextName = context.contextName;
+                return onError(err);
+            }
+
+            //Not expired, check for a cycle.
+            if (needCycleCheck) {
+                each(reqCalls, function (mod) {
+                    breakCycle(mod, {}, {});
+                });
+            }
+
+            //If still waiting on loads, and the waiting load is something
+            //other than a plugin resource, or there are still outstanding
+            //scripts, then just try back later.
+            if ((!expired || usingPathFallback) && stillLoading) {
+                //Something is still waiting to load. Wait for it, but only
+                //if a timeout is not already in effect.
+                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {
+                    checkLoadedTimeoutId = setTimeout(function () {
+                        checkLoadedTimeoutId = 0;
+                        checkLoaded();
+                    }, 50);
+                }
+            }
+
+            inCheckLoaded = false;
+        }
+
+        Module = function (map) {
+            this.events = getOwn(undefEvents, map.id) || {};
+            this.map = map;
+            this.shim = getOwn(config.shim, map.id);
+            this.depExports = [];
+            this.depMaps = [];
+            this.depMatched = [];
+            this.pluginMaps = {};
+            this.depCount = 0;
+
+            /* this.exports this.factory
+               this.depMaps = [],
+               this.enabled, this.fetched
+            */
+        };
+
+        Module.prototype = {
+            init: function (depMaps, factory, errback, options) {
+                options = options || {};
+
+                //Do not do more inits if already done. Can happen if there
+                //are multiple define calls for the same module. That is not
+                //a normal, common case, but it is also not unexpected.
+                if (this.inited) {
+                    return;
+                }
+
+                this.factory = factory;
+
+                if (errback) {
+                    //Register for errors on this module.
+                    this.on('error', errback);
+                } else if (this.events.error) {
+                    //If no errback already, but there are error listeners
+                    //on this module, set up an errback to pass to the deps.
+                    errback = bind(this, function (err) {
+                        this.emit('error', err);
+                    });
+                }
+
+                //Do a copy of the dependency array, so that
+                //source inputs are not modified. For example
+                //"shim" deps are passed in here directly, and
+                //doing a direct modification of the depMaps array
+                //would affect that config.
+                this.depMaps = depMaps && depMaps.slice(0);
+
+                this.errback = errback;
+
+                //Indicate this module has be initialized
+                this.inited = true;
+
+                this.ignore = options.ignore;
+
+                //Could have option to init this module in enabled mode,
+                //or could have been previously marked as enabled. However,
+                //the dependencies are not known until init is called. So
+                //if enabled previously, now trigger dependencies as enabled.
+                if (options.enabled || this.enabled) {
+                    //Enable this module and dependencies.
+                    //Will call this.check()
+                    this.enable();
+                } else {
+                    this.check();
+                }
+            },
+
+            defineDep: function (i, depExports) {
+                //Because of cycles, defined callback for a given
+                //export can be called more than once.
+                if (!this.depMatched[i]) {
+                    this.depMatched[i] = true;
+                    this.depCount -= 1;
+                    this.depExports[i] = depExports;
+                }
+            },
+
+            fetch: function () {
+                if (this.fetched) {
+                    return;
+                }
+                this.fetched = true;
+
+                context.startTime = (new Date()).getTime();
+
+                var map = this.map;
+
+                //If the manager is for a plugin managed resource,
+                //ask the plugin to load it now.
+                if (this.shim) {
+                    context.makeRequire(this.map, {
+                        enableBuildCallback: true
+                    })(this.shim.deps || [], bind(this, function () {
+                        return map.prefix ? this.callPlugin() : this.load();
+                    }));
+                } else {
+                    //Regular dependency.
+                    return map.prefix ? this.callPlugin() : this.load();
+                }
+            },
+
+            load: function () {
+                var url = this.map.url;
+
+                //Regular dependency.
+                if (!urlFetched[url]) {
+                    urlFetched[url] = true;
+                    context.load(this.map.id, url);
+                }
+            },
+
+            /**
+             * Checks if the module is ready to define itself, and if so,
+             * define it.
+             */
+            check: function () {
+                if (!this.enabled || this.enabling) {
+                    return;
+                }
+
+                var err, cjsModule,
+                    id = this.map.id,
+                    depExports = this.depExports,
+                    exports = this.exports,
+                    factory = this.factory;
+
+                if (!this.inited) {
+                    // Only fetch if not already in the defQueue.
+                    if (!hasProp(context.defQueueMap, id)) {
+                        this.fetch();
+                    }
+                } else if (this.error) {
+                    this.emit('error', this.error);
+                } else if (!this.defining) {
+                    //The factory could trigger another require call
+                    //that would result in checking this module to
+                    //define itself again. If already in the process
+                    //of doing that, skip this work.
+                    this.defining = true;
+
+                    if (this.depCount < 1 && !this.defined) {
+                        if (isFunction(factory)) {
+                            //If there is an error listener, favor passing
+                            //to that instead of throwing an error. However,
+                            //only do it for define()'d  modules. require
+                            //errbacks should not be called for failures in
+                            //their callbacks (#699). However if a global
+                            //onError is set, use that.
+                            if ((this.events.error && this.map.isDefine) ||
+                                req.onError !== defaultOnError) {
+                                try {
+                                    exports = context.execCb(id, factory, depExports, exports);
+                                } catch (e) {
+                                    err = e;
+                                }
+                            } else {
+                                exports = context.execCb(id, factory, depExports, exports);
+                            }
+
+                            // Favor return value over exports. If node/cjs in play,
+                            // then will not have a return value anyway. Favor
+                            // module.exports assignment over exports object.
+                            if (this.map.isDefine && exports === undefined) {
+                                cjsModule = this.module;
+                                if (cjsModule) {
+                                    exports = cjsModule.exports;
+                                } else if (this.usingExports) {
+                                    //exports already set the defined value.
+                                    exports = this.exports;
+                                }
+                            }
+
+                            if (err) {
+                                err.requireMap = this.map;
+                                err.requireModules = this.map.isDefine ? [this.map.id] : null;
+                                err.requireType = this.map.isDefine ? 'define' : 'require';
+                                return onError((this.error = err));
+                            }
+
+                        } else {
+                            //Just a literal value
+                            exports = factory;
+                        }
+
+                        this.exports = exports;
+
+                        if (this.map.isDefine && !this.ignore) {
+                            defined[id] = exports;
+
+                            if (req.onResourceLoad) {
+                                var resLoadMaps = [];
+                                each(this.depMaps, function (depMap) {
+                                    resLoadMaps.push(depMap.normalizedMap || depMap);
+                                });
+                                req.onResourceLoad(context, this.map, resLoadMaps);
+                            }
+                        }
+
+                        //Clean up
+                        cleanRegistry(id);
+
+                        this.defined = true;
+                    }
+
+                    //Finished the define stage. Allow calling check again
+                    //to allow define notifications below in the case of a
+                    //cycle.
+                    this.defining = false;
+
+                    if (this.defined && !this.defineEmitted) {
+                        this.defineEmitted = true;
+                        this.emit('defined', this.exports);
+                        this.defineEmitComplete = true;
+                    }
+
+                }
+            },
+
+            callPlugin: function () {
+                var map = this.map,
+                    id = map.id,
+                    //Map already normalized the prefix.
+                    pluginMap = makeModuleMap(map.prefix);
+
+                //Mark this as a dependency for this plugin, so it
+                //can be traced for cycles.
+                this.depMaps.push(pluginMap);
+
+                on(pluginMap, 'defined', bind(this, function (plugin) {
+                    var load, normalizedMap, normalizedMod,
+                        bundleId = getOwn(bundlesMap, this.map.id),
+                        name = this.map.name,
+                        parentName = this.map.parentMap ? this.map.parentMap.name : null,
+                        localRequire = context.makeRequire(map.parentMap, {
+                            enableBuildCallback: true
+                        });
+
+                    //If current map is not normalized, wait for that
+                    //normalized name to load instead of continuing.
+                    if (this.map.unnormalized) {
+                        //Normalize the ID if the plugin allows it.
+                        if (plugin.normalize) {
+                            name = plugin.normalize(name, function (name) {
+                                return normalize(name, parentName, true);
+                            }) || '';
+                        }
+
+                        //prefix and name should already be normalized, no need
+                        //for applying map config again either.
+                        normalizedMap = makeModuleMap(map.prefix + '!' + name,
+                                                      this.map.parentMap,
+                                                      true);
+                        on(normalizedMap,
+                            'defined', bind(this, function (value) {
+                                this.map.normalizedMap = normalizedMap;
+                                this.init([], function () { return value; }, null, {
+                                    enabled: true,
+                                    ignore: true
+                                });
+                            }));
+
+                        normalizedMod = getOwn(registry, normalizedMap.id);
+                        if (normalizedMod) {
+                            //Mark this as a dependency for this plugin, so it
+                            //can be traced for cycles.
+                            this.depMaps.push(normalizedMap);
+
+                            if (this.events.error) {
+                                normalizedMod.on('error', bind(this, function (err) {
+                                    this.emit('error', err);
+                                }));
+                            }
+                            normalizedMod.enable();
+                        }
+
+                        return;
+                    }
+
+                    //If a paths config, then just load that file instead to
+                    //resolve the plugin, as it is built into that paths layer.
+                    if (bundleId) {
+                        this.map.url = context.nameToUrl(bundleId);
+                        this.load();
+                        return;
+                    }
+
+                    load = bind(this, function (value) {
+                        this.init([], function () { return value; }, null, {
+                            enabled: true
+                        });
+                    });
+
+                    load.error = bind(this, function (err) {
+                        this.inited = true;
+                        this.error = err;
+                        err.requireModules = [id];
+
+                        //Remove temp unnormalized modules for this module,
+                        //since they will never be resolved otherwise now.
+                        eachProp(registry, function (mod) {
+                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {
+                                cleanRegistry(mod.map.id);
+                            }
+                        });
+
+                        onError(err);
+                    });
+
+                    //Allow plugins to load other code without having to know the
+                    //context or how to 'complete' the load.
+                    load.fromText = bind(this, function (text, textAlt) {
+                        /*jslint evil: true */
+                        var moduleName = map.name,
+                            moduleMap = makeModuleMap(moduleName),
+                            hasInteractive = useInteractive;
+
+                        //As of 2.1.0, support just passing the text, to reinforce
+                        //fromText only being called once per resource. Still
+                        //support old style of passing moduleName but discard
+                        //that moduleName in favor of the internal ref.
+                        if (textAlt) {
+                            text = textAlt;
+                        }
+
+                        //Turn off interactive script matching for IE for any define
+                        //calls in the text, then turn it back on at the end.
+                        if (hasInteractive) {
+                            useInteractive = false;
+                        }
+
+                        //Prime the system by creating a module instance for
+                        //it.
+                        getModule(moduleMap);
+
+                        //Transfer any config to this other module.
+                        if (hasProp(config.config, id)) {
+                            config.config[moduleName] = config.config[id];
+                        }
+
+                        try {
+                            req.exec(text);
+                        } catch (e) {
+                            return onError(makeError('fromtexteval',
+                                             'fromText eval for ' + id +
+                                            ' failed: ' + e,
+                                             e,
+                                             [id]));
+                        }
+
+                        if (hasInteractive) {
+                            useInteractive = true;
+                        }
+
+                        //Mark this as a dependency for the plugin
+                        //resource
+                        this.depMaps.push(moduleMap);
+
+                        //Support anonymous modules.
+                        context.completeLoad(moduleName);
+
+                        //Bind the value of that module to the value for this
+                        //resource ID.
+                        localRequire([moduleName], load);
+                    });
+
+                    //Use parentName here since the plugin's name is not reliable,
+                    //could be some weird string with no path that actually wants to
+                    //reference the parentName's path.
+                    plugin.load(map.name, localRequire, load, config);
+                }));
+
+                context.enable(pluginMap, this);
+                this.pluginMaps[pluginMap.id] = pluginMap;
+            },
+
+            enable: function () {
+                enabledRegistry[this.map.id] = this;
+                this.enabled = true;
+
+                //Set flag mentioning that the module is enabling,
+                //so that immediate calls to the defined callbacks
+                //for dependencies do not trigger inadvertent load
+                //with the depCount still being zero.
+                this.enabling = true;
+
+                //Enable each dependency
+                each(this.depMaps, bind(this, function (depMap, i) {
+                    var id, mod, handler;
+
+                    if (typeof depMap === 'string') {
+                        //Dependency needs to be converted to a depMap
+                        //and wired up to this module.
+                        depMap = makeModuleMap(depMap,
+                                               (this.map.isDefine ? this.map : this.map.parentMap),
+                                               false,
+                                               !this.skipMap);
+                        this.depMaps[i] = depMap;
+
+                        handler = getOwn(handlers, depMap.id);
+
+                        if (handler) {
+                            this.depExports[i] = handler(this);
+                            return;
+                        }
+
+                        this.depCount += 1;
+
+                        on(depMap, 'defined', bind(this, function (depExports) {
+                            if (this.undefed) {
+                                return;
+                            }
+                            this.defineDep(i, depExports);
+                            this.check();
+                        }));
+
+                        if (this.errback) {
+                            on(depMap, 'error', bind(this, this.errback));
+                        } else if (this.events.error) {
+                            // No direct errback on this module, but something
+                            // else is listening for errors, so be sure to
+                            // propagate the error correctly.
+                            on(depMap, 'error', bind(this, function(err) {
+                                this.emit('error', err);
+                            }));
+                        }
+                    }
+
+                    id = depMap.id;
+                    mod = registry[id];
+
+                    //Skip special modules like 'require', 'exports', 'module'
+                    //Also, don't call enable if it is already enabled,
+                    //important in circular dependency cases.
+                    if (!hasProp(handlers, id) && mod && !mod.enabled) {
+                        context.enable(depMap, this);
+                    }
+                }));
+
+                //Enable each plugin that is used in
+                //a dependency
+                eachProp(this.pluginMaps, bind(this, function (pluginMap) {
+                    var mod = getOwn(registry, pluginMap.id);
+                    if (mod && !mod.enabled) {
+                        context.enable(pluginMap, this);
+                    }
+                }));
+
+                this.enabling = false;
+
+                this.check();
+            },
+
+            on: function (name, cb) {
+                var cbs = this.events[name];
+                if (!cbs) {
+                    cbs = this.events[name] = [];
+                }
+                cbs.push(cb);
+            },
+
+            emit: function (name, evt) {
+                each(this.events[name], function (cb) {
+                    cb(evt);
+                });
+                if (name === 'error') {
+                    //Now that the error handler was triggered, remove
+                    //the listeners, since this broken Module instance
+                    //can stay around for a while in the registry.
+                    delete this.events[name];
+                }
+            }
+        };
+
+        function callGetModule(args) {
+            //Skip modules already defined.
+            if (!hasProp(defined, args[0])) {
+                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);
+            }
+        }
+
+        function removeListener(node, func, name, ieName) {
+            //Favor detachEvent because of IE9
+            //issue, see attachEvent/addEventListener comment elsewhere
+            //in this file.
+            if (node.detachEvent && !isOpera) {
+                //Probably IE. If not it will throw an error, which will be
+                //useful to know.
+                if (ieName) {
+                    node.detachEvent(ieName, func);
+                }
+            } else {
+                node.removeEventListener(name, func, false);
+            }
+        }
+
+        /**
+         * Given an event from a script node, get the requirejs info from it,
+         * and then removes the event listeners on the node.
+         * @param {Event} evt
+         * @returns {Object}
+         */
+        function getScriptData(evt) {
+            //Using currentTarget instead of target for Firefox 2.0's sake. Not
+            //all old browsers will be supported, but this one was easy enough
+            //to support and still makes sense.
+            var node = evt.currentTarget || evt.srcElement;
+
+            //Remove the listeners once here.
+            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');
+            removeListener(node, context.onScriptError, 'error');
+
+            return {
+                node: node,
+                id: node && node.getAttribute('data-requiremodule')
+            };
+        }
+
+        function intakeDefines() {
+            var args;
+
+            //Any defined modules in the global queue, intake them now.
+            takeGlobalQueue();
+
+            //Make sure any remaining defQueue items get properly processed.
+            while (defQueue.length) {
+                args = defQueue.shift();
+                if (args[0] === null) {
+                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' +
+                        args[args.length - 1]));
+                } else {
+                    //args are id, deps, factory. Should be normalized by the
+                    //define() function.
+                    callGetModule(args);
+                }
+            }
+            context.defQueueMap = {};
+        }
+
+        context = {
+            config: config,
+            contextName: contextName,
+            registry: registry,
+            defined: defined,
+            urlFetched: urlFetched,
+            defQueue: defQueue,
+            defQueueMap: {},
+            Module: Module,
+            makeModuleMap: makeModuleMap,
+            nextTick: req.nextTick,
+            onError: onError,
+
+            /**
+             * Set a configuration for the context.
+             * @param {Object} cfg config object to integrate.
+             */
+            configure: function (cfg) {
+                //Make sure the baseUrl ends in a slash.
+                if (cfg.baseUrl) {
+                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {
+                        cfg.baseUrl += '/';
+                    }
+                }
+
+                // Convert old style urlArgs string to a function.
+                if (typeof cfg.urlArgs === 'string') {
+                    var urlArgs = cfg.urlArgs;
+                    cfg.urlArgs = function(id, url) {
+                        return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;
+                    };
+                }
+
+                //Save off the paths since they require special processing,
+                //they are additive.
+                var shim = config.shim,
+                    objs = {
+                        paths: true,
+                        bundles: true,
+                        config: true,
+                        map: true
+                    };
+
+                eachProp(cfg, function (value, prop) {
+                    if (objs[prop]) {
+                        if (!config[prop]) {
+                            config[prop] = {};
+                        }
+                        mixin(config[prop], value, true, true);
+                    } else {
+                        config[prop] = value;
+                    }
+                });
+
+                //Reverse map the bundles
+                if (cfg.bundles) {
+                    eachProp(cfg.bundles, function (value, prop) {
+                        each(value, function (v) {
+                            if (v !== prop) {
+                                bundlesMap[v] = prop;
+                            }
+                        });
+                    });
+                }
+
+                //Merge shim
+                if (cfg.shim) {
+                    eachProp(cfg.shim, function (value, id) {
+                        //Normalize the structure
+                        if (isArray(value)) {
+                            value = {
+                                deps: value
+                            };
+                        }
+                        if ((value.exports || value.init) && !value.exportsFn) {
+                            value.exportsFn = context.makeShimExports(value);
+                        }
+                        shim[id] = value;
+                    });
+                    config.shim = shim;
+                }
+
+                //Adjust packages if necessary.
+                if (cfg.packages) {
+                    each(cfg.packages, function (pkgObj) {
+                        var location, name;
+
+                        pkgObj = typeof pkgObj === 'string' ? {name: pkgObj} : pkgObj;
+
+                        name = pkgObj.name;
+                        location = pkgObj.location;
+                        if (location) {
+                            config.paths[name] = pkgObj.location;
+                        }
+
+                        //Save pointer to main module ID for pkg name.
+                        //Remove leading dot in main, so main paths are normalized,
+                        //and remove any trailing .js, since different package
+                        //envs have different conventions: some use a module name,
+                        //some use a file name.
+                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')
+                                     .replace(currDirRegExp, '')
+                                     .replace(jsSuffixRegExp, '');
+                    });
+                }
+
+                //If there are any "waiting to execute" modules in the registry,
+                //update the maps for them, since their info, like URLs to load,
+                //may have changed.
+                eachProp(registry, function (mod, id) {
+                    //If module already has init called, since it is too
+                    //late to modify them, and ignore unnormalized ones
+                    //since they are transient.
+                    if (!mod.inited && !mod.map.unnormalized) {
+                        mod.map = makeModuleMap(id, null, true);
+                    }
+                });
+
+                //If a deps array or a config callback is specified, then call
+                //require with those args. This is useful when require is defined as a
+                //config object before require.js is loaded.
+                if (cfg.deps || cfg.callback) {
+                    context.require(cfg.deps || [], cfg.callback);
+                }
+            },
+
+            makeShimExports: function (value) {
+                function fn() {
+                    var ret;
+                    if (value.init) {
+                        ret = value.init.apply(global, arguments);
+                    }
+                    return ret || (value.exports && getGlobal(value.exports));
+                }
+                return fn;
+            },
+
+            makeRequire: function (relMap, options) {
+                options = options || {};
+
+                function localRequire(deps, callback, errback) {
+                    var id, map, requireMod;
+
+                    if (options.enableBuildCallback && callback && isFunction(callback)) {
+                        callback.__requireJsBuild = true;
+                    }
+
+                    if (typeof deps === 'string') {
+                        if (isFunction(callback)) {
+                            //Invalid call
+                            return onError(makeError('requireargs', 'Invalid require call'), errback);
+                        }
+
+                        //If require|exports|module are requested, get the
+                        //value for them from the special handlers. Caveat:
+                        //this only works while module is being defined.
+                        if (relMap && hasProp(handlers, deps)) {
+                            return handlers[deps](registry[relMap.id]);
+                        }
+
+                        //Synchronous access to one module. If require.get is
+                        //available (as in the Node adapter), prefer that.
+                        if (req.get) {
+                            return req.get(context, deps, relMap, localRequire);
+                        }
+
+                        //Normalize module name, if it contains . or ..
+                        map = makeModuleMap(deps, relMap, false, true);
+                        id = map.id;
+
+                        if (!hasProp(defined, id)) {
+                            return onError(makeError('notloaded', 'Module name "' +
+                                        id +
+                                        '" has not been loaded yet for context: ' +
+                                        contextName +
+                                        (relMap ? '' : '. Use require([])')));
+                        }
+                        return defined[id];
+                    }
+
+                    //Grab defines waiting in the global queue.
+                    intakeDefines();
+
+                    //Mark all the dependencies as needing to be loaded.
+                    context.nextTick(function () {
+                        //Some defines could have been added since the
+                        //require call, collect them.
+                        intakeDefines();
+
+                        requireMod = getModule(makeModuleMap(null, relMap));
+
+                        //Store if map config should be applied to this require
+                        //call for dependencies.
+                        requireMod.skipMap = options.skipMap;
+
+                        requireMod.init(deps, callback, errback, {
+                            enabled: true
+                        });
+
+                        checkLoaded();
+                    });
+
+                    return localRequire;
+                }
+
+                mixin(localRequire, {
+                    isBrowser: isBrowser,
+
+                    /**
+                     * Converts a module name + .extension into an URL path.
+                     * *Requires* the use of a module name. It does not support using
+                     * plain URLs like nameToUrl.
+                     */
+                    toUrl: function (moduleNamePlusExt) {
+                        var ext,
+                            index = moduleNamePlusExt.lastIndexOf('.'),
+                            segment = moduleNamePlusExt.split('/')[0],
+                            isRelative = segment === '.' || segment === '..';
+
+                        //Have a file extension alias, and it is not the
+                        //dots from a relative path.
+                        if (index !== -1 && (!isRelative || index > 1)) {
+                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);
+                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);
+                        }
+
+                        return context.nameToUrl(normalize(moduleNamePlusExt,
+                                                relMap && relMap.id, true), ext,  true);
+                    },
+
+                    defined: function (id) {
+                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);
+                    },
+
+                    specified: function (id) {
+                        id = makeModuleMap(id, relMap, false, true).id;
+                        return hasProp(defined, id) || hasProp(registry, id);
+                    }
+                });
+
+                //Only allow undef on top level require calls
+                if (!relMap) {
+                    localRequire.undef = function (id) {
+                        //Bind any waiting define() calls to this context,
+                        //fix for #408
+                        takeGlobalQueue();
+
+                        var map = makeModuleMap(id, relMap, true),
+                            mod = getOwn(registry, id);
+
+                        mod.undefed = true;
+                        removeScript(id);
+
+                        delete defined[id];
+                        delete urlFetched[map.url];
+                        delete undefEvents[id];
+
+                        //Clean queued defines too. Go backwards
+                        //in array so that the splices do not
+                        //mess up the iteration.
+                        eachReverse(defQueue, function(args, i) {
+                            if (args[0] === id) {
+                                defQueue.splice(i, 1);
+                            }
+                        });
+                        delete context.defQueueMap[id];
+
+                        if (mod) {
+                            //Hold on to listeners in case the
+                            //module will be attempted to be reloaded
+                            //using a different config.
+                            if (mod.events.defined) {
+                                undefEvents[id] = mod.events;
+                            }
+
+                            cleanRegistry(id);
+                        }
+                    };
+                }
+
+                return localRequire;
+            },
+
+            /**
+             * Called to enable a module if it is still in the registry
+             * awaiting enablement. A second arg, parent, the parent module,
+             * is passed in for context, when this method is overridden by
+             * the optimizer. Not shown here to keep code compact.
+             */
+            enable: function (depMap) {
+                var mod = getOwn(registry, depMap.id);
+                if (mod) {
+                    getModule(depMap).enable();
+                }
+            },
+
+            /**
+             * Internal method used by environment adapters to complete a load event.
+             * A load event could be a script load or just a load pass from a synchronous
+             * load call.
+             * @param {String} moduleName the name of the module to potentially complete.
+             */
+            completeLoad: function (moduleName) {
+                var found, args, mod,
+                    shim = getOwn(config.shim, moduleName) || {},
+                    shExports = shim.exports;
+
+                takeGlobalQueue();
+
+                while (defQueue.length) {
+                    args = defQueue.shift();
+                    if (args[0] === null) {
+                        args[0] = moduleName;
+                        //If already found an anonymous module and bound it
+                        //to this name, then this is some other anon module
+                        //waiting for its completeLoad to fire.
+                        if (found) {
+                            break;
+                        }
+                        found = true;
+                    } else if (args[0] === moduleName) {
+                        //Found matching define call for this script!
+                        found = true;
+                    }
+
+                    callGetModule(args);
+                }
+                context.defQueueMap = {};
+
+                //Do this after the cycle of callGetModule in case the result
+                //of those calls/init calls changes the registry.
+                mod = getOwn(registry, moduleName);
+
+                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {
+                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {
+                        if (hasPathFallback(moduleName)) {
+                            return;
+                        } else {
+                            return onError(makeError('nodefine',
+                                             'No define call for ' + moduleName,
+                                             null,
+                                             [moduleName]));
+                        }
+                    } else {
+                        //A script that does not call define(), so just simulate
+                        //the call for it.
+                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);
+                    }
+                }
+
+                checkLoaded();
+            },
+
+            /**
+             * Converts a module name to a file path. Supports cases where
+             * moduleName may actually be just an URL.
+             * Note that it **does not** call normalize on the moduleName,
+             * it is assumed to have already been normalized. This is an
+             * internal API, not a public one. Use toUrl for the public API.
+             */
+            nameToUrl: function (moduleName, ext, skipExt) {
+                var paths, syms, i, parentModule, url,
+                    parentPath, bundleId,
+                    pkgMain = getOwn(config.pkgs, moduleName);
+
+                if (pkgMain) {
+                    moduleName = pkgMain;
+                }
+
+                bundleId = getOwn(bundlesMap, moduleName);
+
+                if (bundleId) {
+                    return context.nameToUrl(bundleId, ext, skipExt);
+                }
+
+                //If a colon is in the URL, it indicates a protocol is used and it is just
+                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)
+                //or ends with .js, then assume the user meant to use an url and not a module id.
+                //The slash is important for protocol-less URLs as well as full paths.
+                if (req.jsExtRegExp.test(moduleName)) {
+                    //Just a plain path, not module name lookup, so just return it.
+                    //Add extension if it is included. This is a bit wonky, only non-.js things pass
+                    //an extension, this method probably needs to be reworked.
+                    url = moduleName + (ext || '');
+                } else {
+                    //A module that needs to be converted to a path.
+                    paths = config.paths;
+
+                    syms = moduleName.split('/');
+                    //For each module name segment, see if there is a path
+                    //registered for it. Start with most specific name
+                    //and work up from it.
+                    for (i = syms.length; i > 0; i -= 1) {
+                        parentModule = syms.slice(0, i).join('/');
+
+                        parentPath = getOwn(paths, parentModule);
+                        if (parentPath) {
+                            //If an array, it means there are a few choices,
+                            //Choose the one that is desired
+                            if (isArray(parentPath)) {
+                                parentPath = parentPath[0];
+                            }
+                            syms.splice(0, i, parentPath);
+                            break;
+                        }
+                    }
+
+                    //Join the path parts together, then figure out if baseUrl is needed.
+                    url = syms.join('/');
+                    url += (ext || (/^data\:|^blob\:|\?/.test(url) || skipExt ? '' : '.js'));
+                    url = (url.charAt(0) === '/' || url.match(/^[\w\+\.\-]+:/) ? '' : config.baseUrl) + url;
+                }
+
+                return config.urlArgs && !/^blob\:/.test(url) ?
+                       url + config.urlArgs(moduleName, url) : url;
+            },
+
+            //Delegates to req.load. Broken out as a separate function to
+            //allow overriding in the optimizer.
+            load: function (id, url) {
+                req.load(context, id, url);
+            },
+
+            /**
+             * Executes a module callback function. Broken out as a separate function
+             * solely to allow the build system to sequence the files in the built
+             * layer in the right sequence.
+             *
+             * @private
+             */
+            execCb: function (name, callback, args, exports) {
+                return callback.apply(exports, args);
+            },
+
+            /**
+             * callback for script loads, used to check status of loading.
+             *
+             * @param {Event} evt the event from the browser for the script
+             * that was loaded.
+             */
+            onScriptLoad: function (evt) {
+                //Using currentTarget instead of target for Firefox 2.0's sake. Not
+                //all old browsers will be supported, but this one was easy enough
+                //to support and still makes sense.
+                if (evt.type === 'load' ||
+                        (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {
+                    //Reset interactive script so a script node is not held onto for
+                    //to long.
+                    interactiveScript = null;
+
+                    //Pull out the name of the module and the context.
+                    var data = getScriptData(evt);
+                    context.completeLoad(data.id);
+                }
+            },
+
+            /**
+             * Callback for script errors.
+             */
+            onScriptError: function (evt) {
+                var data = getScriptData(evt);
+                if (!hasPathFallback(data.id)) {
+                    var parents = [];
+                    eachProp(registry, function(value, key) {
+                        if (key.indexOf('_@r') !== 0) {
+                            each(value.depMaps, function(depMap) {
+                                if (depMap.id === data.id) {
+                                    parents.push(key);
+                                    return true;
+                                }
+                            });
+                        }
+                    });
+                    return onError(makeError('scripterror', 'Script error for "' + data.id +
+                                             (parents.length ?
+                                             '", needed by: ' + parents.join(', ') :
+                                             '"'), evt, [data.id]));
+                }
+            }
+        };
+
+        context.require = context.makeRequire();
+        return context;
+    }
+
+    /**
+     * Main entry point.
+     *
+     * If the only argument to require is a string, then the module that
+     * is represented by that string is fetched for the appropriate context.
+     *
+     * If the first argument is an array, then it will be treated as an array
+     * of dependency string names to fetch. An optional function callback can
+     * be specified to execute when all of those dependencies are available.
+     *
+     * Make a local req variable to help Caja compliance (it assumes things
+     * on a require that are not standardized), and to give a short
+     * name for minification/local scope use.
+     */
+    req = requirejs = function (deps, callback, errback, optional) {
+
+        //Find the right context, use default
+        var context, config,
+            contextName = defContextName;
+
+        // Determine if have config object in the call.
+        if (!isArray(deps) && typeof deps !== 'string') {
+            // deps is a config object
+            config = deps;
+            if (isArray(callback)) {
+                // Adjust args if there are dependencies
+                deps = callback;
+                callback = errback;
+                errback = optional;
+            } else {
+                deps = [];
+            }
+        }
+
+        if (config && config.context) {
+            contextName = config.context;
+        }
+
+        context = getOwn(contexts, contextName);
+        if (!context) {
+            context = contexts[contextName] = req.s.newContext(contextName);
+        }
+
+        if (config) {
+            context.configure(config);
+        }
+
+        return context.require(deps, callback, errback);
+    };
+
+    /**
+     * Support require.config() to make it easier to cooperate with other
+     * AMD loaders on globally agreed names.
+     */
+    req.config = function (config) {
+        return req(config);
+    };
+
+    /**
+     * Execute something after the current tick
+     * of the event loop. Override for other envs
+     * that have a better solution than setTimeout.
+     * @param  {Function} fn function to execute later.
+     */
+    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {
+        setTimeout(fn, 4);
+    } : function (fn) { fn(); };
+
+    /**
+     * Export require as a global, but only if it does not already exist.
+     */
+    if (!require) {
+        require = req;
+    }
+
+    req.version = version;
+
+    //Used to filter out dependencies that are already paths.
+    req.jsExtRegExp = /^\/|:|\?|\.js\$/;
+    req.isBrowser = isBrowser;
+    s = req.s = {
+        contexts: contexts,
+        newContext: newContext
+    };
+
+    //Create default context.
+    req({});
+
+    //Exports some context-sensitive methods on global require.
+    each([
+        'toUrl',
+        'undef',
+        'defined',
+        'specified'
+    ], function (prop) {
+        //Reference from contexts instead of early binding to default context,
+        //so that during builds, the latest instance of the default context
+        //with its config gets used.
+        req[prop] = function () {
+            var ctx = contexts[defContextName];
+            return ctx.require[prop].apply(ctx, arguments);
+        };
+    });
+
+    if (isBrowser) {
+        head = s.head = document.getElementsByTagName('head')[0];
+        //If BASE tag is in play, using appendChild is a problem for IE6.
+        //When that browser dies, this can be removed. Details in this jQuery bug:
+        //http://dev.jquery.com/ticket/2709
+        baseElement = document.getElementsByTagName('base')[0];
+        if (baseElement) {
+            head = s.head = baseElement.parentNode;
+        }
+    }
+
+    /**
+     * Any errors that require explicitly generates will be passed to this
+     * function. Intercept/override it if you want custom error handling.
+     * @param {Error} err the error object.
+     */
+    req.onError = defaultOnError;
+
+    /**
+     * Creates the node for the load command. Only used in browser envs.
+     */
+    req.createNode = function (config, moduleName, url) {
+        var node = config.xhtml ?
+                document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :
+                document.createElement('script');
+        node.type = config.scriptType || 'text/javascript';
+        node.charset = 'utf-8';
+        node.async = true;
+        return node;
+    };
+
+    /**
+     * Does the request to load a module for the browser case.
+     * Make this a separate function to allow other environments
+     * to override it.
+     *
+     * @param {Object} context the require context to find state.
+     * @param {String} moduleName the name of the module.
+     * @param {Object} url the URL to the module.
+     */
+    req.load = function (context, moduleName, url) {
+        var config = (context && context.config) || {},
+            node;
+        if (isBrowser) {
+            //In the browser so use a script tag
+            node = req.createNode(config, moduleName, url);
+
+            node.setAttribute('data-requirecontext', context.contextName);
+            node.setAttribute('data-requiremodule', moduleName);
+
+            //Set up load listener. Test attachEvent first because IE9 has
+            //a subtle issue in its addEventListener and script onload firings
+            //that do not match the behavior of all other browsers with
+            //addEventListener support, which fire the onload event for a
+            //script right after the script execution. See:
+            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution
+            //UNFORTUNATELY Opera implements attachEvent but does not follow the script
+            //script execution mode.
+            if (node.attachEvent &&
+                    //Check if node.attachEvent is artificially added by custom script or
+                    //natively supported by browser
+                    //read https://github.com/requirejs/requirejs/issues/187
+                    //if we can NOT find [native code] then it must NOT natively supported.
+                    //in IE8, node.attachEvent does not have toString()
+                    //Note the test for "[native code" with no closing brace, see:
+                    //https://github.com/requirejs/requirejs/issues/273
+                    !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&
+                    !isOpera) {
+                //Probably IE. IE (at least 6-8) do not fire
+                //script onload right after executing the script, so
+                //we cannot tie the anonymous define call to a name.
+                //However, IE reports the script as being in 'interactive'
+                //readyState at the time of the define call.
+                useInteractive = true;
+
+                node.attachEvent('onreadystatechange', context.onScriptLoad);
+                //It would be great to add an error handler here to catch
+                //404s in IE9+. However, onreadystatechange will fire before
+                //the error handler, so that does not help. If addEventListener
+                //is used, then IE will fire error before load, but we cannot
+                //use that pathway given the connect.microsoft.com issue
+                //mentioned above about not doing the 'script execute,
+                //then fire the script load event listener before execute
+                //next script' that other browsers do.
+                //Best hope: IE10 fixes the issues,
+                //and then destroys all installs of IE 6-9.
+                //node.attachEvent('onerror', context.onScriptError);
+            } else {
+                node.addEventListener('load', context.onScriptLoad, false);
+                node.addEventListener('error', context.onScriptError, false);
+            }
+            node.src = url;
+
+            //Calling onNodeCreated after all properties on the node have been
+            //set, but before it is placed in the DOM.
+            if (config.onNodeCreated) {
+                config.onNodeCreated(node, config, moduleName, url);
+            }
+
+            //For some cache cases in IE 6-8, the script executes before the end
+            //of the appendChild execution, so to tie an anonymous define
+            //call to the module name (which is stored on the node), hold on
+            //to a reference to this node, but clear after the DOM insertion.
+            currentlyAddingScript = node;
+            if (baseElement) {
+                head.insertBefore(node, baseElement);
+            } else {
+                head.appendChild(node);
+            }
+            currentlyAddingScript = null;
+
+            return node;
+        } else if (isWebWorker) {
+            try {
+                //In a web worker, use importScripts. This is not a very
+                //efficient use of importScripts, importScripts will block until
+                //its script is downloaded and evaluated. However, if web workers
+                //are in play, the expectation is that a build has been done so
+                //that only one script needs to be loaded anyway. This may need
+                //to be reevaluated if other use cases become common.
+
+                // Post a task to the event loop to work around a bug in WebKit
+                // where the worker gets garbage-collected after calling
+                // importScripts(): https://webkit.org/b/153317
+                setTimeout(function() {}, 0);
+                importScripts(url);
+
+                //Account for anonymous modules
+                context.completeLoad(moduleName);
+            } catch (e) {
+                context.onError(makeError('importscripts',
+                                'importScripts failed for ' +
+                                    moduleName + ' at ' + url,
+                                e,
+                                [moduleName]));
+            }
+        }
+    };
+
+    function getInteractiveScript() {
+        if (interactiveScript && interactiveScript.readyState === 'interactive') {
+            return interactiveScript;
+        }
+
+        eachReverse(scripts(), function (script) {
+            if (script.readyState === 'interactive') {
+                return (interactiveScript = script);
+            }
+        });
+        return interactiveScript;
+    }
+
+    //Look for a data-main script attribute, which could also adjust the baseUrl.
+    if (isBrowser && !cfg.skipDataMain) {
+        //Figure out baseUrl. Get it from the script tag with require.js in it.
+        eachReverse(scripts(), function (script) {
+            //Set the 'head' where we can append children by
+            //using the script's parent.
+            if (!head) {
+                head = script.parentNode;
+            }
+
+            //Look for a data-main attribute to set main script for the page
+            //to load. If it is there, the path to data main becomes the
+            //baseUrl, if it is not already set.
+            dataMain = script.getAttribute('data-main');
+            if (dataMain) {
+                //Preserve dataMain in case it is a path (i.e. contains '?')
+                mainScript = dataMain;
+
+                //Set final baseUrl if there is not already an explicit one,
+                //but only do so if the data-main value is not a loader plugin
+                //module ID.
+                if (!cfg.baseUrl && mainScript.indexOf('!') === -1) {
+                    //Pull off the directory of data-main for use as the
+                    //baseUrl.
+                    src = mainScript.split('/');
+                    mainScript = src.pop();
+                    subPath = src.length ? src.join('/')  + '/' : './';
+
+                    cfg.baseUrl = subPath;
+                }
+
+                //Strip off any trailing .js since mainScript is now
+                //like a module name.
+                mainScript = mainScript.replace(jsSuffixRegExp, '');
+
+                //If mainScript is still a path, fall back to dataMain
+                if (req.jsExtRegExp.test(mainScript)) {
+                    mainScript = dataMain;
+                }
+
+                //Put the data-main script in the files to load.
+                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];
+
+                return true;
+            }
+        });
+    }
+
+    /**
+     * The function that handles definitions of modules. Differs from
+     * require() in that a string for the module should be the first argument,
+     * and the function to execute after dependencies are loaded should
+     * return a value to define the module corresponding to the first argument's
+     * name.
+     */
+    define = function (name, deps, callback) {
+        var node, context;
+
+        //Allow for anonymous modules
+        if (typeof name !== 'string') {
+            //Adjust args appropriately
+            callback = deps;
+            deps = name;
+            name = null;
+        }
+
+        //This module may not have dependencies
+        if (!isArray(deps)) {
+            callback = deps;
+            deps = null;
+        }
+
+        //If no name, and callback is a function, then figure out if it a
+        //CommonJS thing with dependencies.
+        if (!deps && isFunction(callback)) {
+            deps = [];
+            //Remove comments from the callback string,
+            //look for require calls, and pull them into the dependencies,
+            //but only if there are function args.
+            if (callback.length) {
+                callback
+                    .toString()
+                    .replace(commentRegExp, commentReplace)
+                    .replace(cjsRequireRegExp, function (match, dep) {
+                        deps.push(dep);
+                    });
+
+                //May be a CommonJS thing even without require calls, but still
+                //could use exports, and module. Avoid doing exports and module
+                //work though if it just needs require.
+                //REQUIRES the function to expect the CommonJS variables in the
+                //order listed below.
+                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);
+            }
+        }
+
+        //If in IE 6-8 and hit an anonymous define() call, do the interactive
+        //work.
+        if (useInteractive) {
+            node = currentlyAddingScript || getInteractiveScript();
+            if (node) {
+                if (!name) {
+                    name = node.getAttribute('data-requiremodule');
+                }
+                context = contexts[node.getAttribute('data-requirecontext')];
+            }
+        }
+
+        //Always save off evaluating the def call until the script onload handler.
+        //This allows multiple modules to be in a file without prematurely
+        //tracing dependencies, and allows for anonymous module support,
+        //where the module name is not known until the script onload event
+        //occurs. If no context, use the global queue, and get it processed
+        //in the onscript load callback.
+        if (context) {
+            context.defQueue.push([name, deps, callback]);
+            context.defQueueMap[name] = true;
+        } else {
+            globalDefQueue.push([name, deps, callback]);
+        }
+    };
+
+    define.amd = {
+        jQuery: true
+    };
+
+    /**
+     * Executes the text. Normally just uses eval, but can be modified
+     * to use a better, environment-specific call. Only used for transpiling
+     * loader plugins, not for plain JS modules.
+     * @param {String} text the text to execute/evaluate.
+     */
+    req.exec = function (text) {
+        /*jslint evil: true */
+        return eval(text);
+    };
+
+    //Set up with config info.
+    req(cfg);
+}(typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this, (typeof setTimeout === 'undefined' ? undefined : setTimeout)));`;
+export default requirejsCode;
+//# sourceMappingURL=require.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js.map b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js.map
new file mode 100644
index 0000000..a1e5263
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/jupyter/ipywidgets/vendor/require.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"require.js","sourceRoot":"","sources":["../../../../src/jupyter/ipywidgets/vendor/require.ts"],"names":[],"mappings":"AAAA,iCAAiC;AACjC,MAAM,CAAC,MAAM,aAAa,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0JAimE6H,CAAC;AAC3J,eAAe,aAAa,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js b/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js
index 4a9d212..f033632 100644
--- a/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js
+++ b/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js
@@ -57,21 +57,24 @@ export function useJupyterReactStore(selector) {
 export function useJupyterReactStoreFromProps(props) {
     const { defaultKernelName = DEFAULT_KERNEL_NAME, initCode = '', jupyterServerToken = props.serviceManager?.serverSettings.token, jupyterServerUrl = props.serviceManager?.serverSettings.baseUrl, lite = false, serverless, serviceManager: propsServiceManager, startDefaultKernel = false, terminals = false, useRunningKernelId = props.useRunningKernelId, useRunningKernelIndex = props.useRunningKernelIndex || -1, } = props;
     const jupyterConfig = useMemo(() => {
-        const config = loadJupyterConfig({
+        return loadJupyterConfig({
             lite,
             jupyterServerUrl,
             jupyterServerToken,
             terminals,
         });
-        jupyterReactStore.getState().setJupyterConfig(config);
-        return config;
     }, []);
+    // Set config in store during effect phase (not render phase)
+    // This fixes React warning: "Cannot update a component while rendering a different component"
+    // Components must handle undefined config during first render (see useJupyter hook)
+    useEffect(() => {
+        jupyterReactStore.getState().setJupyterConfig(jupyterConfig);
+    }, [jupyterConfig]);
     const [serviceManager, setServiceManager] = useState(propsServiceManager);
     const [_, setKernel] = useState();
     const [__, setIsLoading] = useState(startDefaultKernel || useRunningKernelIndex > -1);
     useEffect(() => {
         if (propsServiceManager) {
-            console.log('Setting Service Manager from props', propsServiceManager);
             setServiceManager(propsServiceManager);
             jupyterReactStore.getState().setServiceManager(propsServiceManager);
         }
@@ -114,10 +117,8 @@ export function useJupyterReactStoreFromProps(props) {
     }, [lite, serverless, jupyterServerUrl]);
     // Setup a Kernel if needed.
     useEffect(() => {
-        console.log('Checking kernels for the new Service Manager:', serviceManager);
         serviceManager?.kernels.ready.then(async () => {
             const kernelManager = serviceManager.kernels;
-            console.log('Jupyter Kernel Manager is ready', kernelManager);
             if (useRunningKernelIndex > -1) {
                 await serviceManager.sessions.refreshRunning();
                 const runnings = Array.from(kernelManager.running());
@@ -170,7 +171,13 @@ export function useJupyterReactStoreFromProps(props) {
             }
         });
     }, [serviceManager]);
-    return useStore(jupyterReactStore);
+    // Return store state with locally computed jupyterConfig
+    // This ensures jupyterConfig is available even on first render
+    // (before useEffect sets it in the store)
+    return {
+        ...useStore(jupyterReactStore),
+        jupyterConfig, // Override with local computed value
+    };
 }
 export default useJupyterReactStore;
 //# sourceMappingURL=JupyterReactState.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js.map b/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js.map
index 52ff1eb..651d5bc 100644
--- a/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/state/JupyterReactState.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterReactState.js","sourceRoot":"","sources":["../../src/state/JupyterReactState.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"JupyterReactState.js","sourceRoot":"","sources":["../../src/state/JupyterReactState.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js b/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js
index bc0ed26..791c86d 100644
--- a/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js
+++ b/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js
@@ -52,11 +52,13 @@ export function JupyterLabCss(props) {
         let theme;
         switch (colormode) {
             case 'light': {
-                theme = import('@jupyterlab/theme-light-extension/style/variables.css?raw');
+                theme =
+                    import('@jupyterlab/theme-light-extension/style/variables.css?raw');
                 break;
             }
             case 'dark': {
-                theme = import('@jupyterlab/theme-dark-extension/style/variables.css?raw');
+                theme =
+                    import('@jupyterlab/theme-dark-extension/style/variables.css?raw');
                 break;
             }
         }
diff --git a/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js.map b/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js.map
index ff715a2..2d0cee4 100644
--- a/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js.map
+++ b/node_modules/@datalayer/jupyter-react/lib/theme/JupyterLabCss.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterLabCss.js","sourceRoot":"","sources":["../../src/theme/JupyterLabCss.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAClC,OAAO,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGtD,MAAM,qBAAqB,GAAG,uBAAuB,CAAC;AAEtD,MAAM,WAAW,GAAG,iBAAiB,CAAK;;;;;;CAMzC,CAAC;AAMF;;GAEG;AACH,IAAI,QAAQ,GAAG,KAAK,CAAC;AAErB;;GAEG;AACH,MAAM,UAAU,aAAa,CAAC,KAAyB;IACrD,MAAM,EAAE,SAAS,GAAG,OAAO,EAAE,GAAG,KAAK,CAAC;IACtC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,QAAQ,EAAE,CAAC;YACb,QAAQ;YACR,OAAO;QACT,CAAC;QACD,QAAQ,GAAG,IAAI,CAAC;QAChB,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,kCAAkC,CAAC,CAAC;QAC3C,MAAM,CAAC,2CAA2C,CAAC,CAAC;QACpD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,oCAAoC,CAAC,CAAC;QAC7C,MAAM,CAAC,sCAAsC,CAAC,CAAC;QAC/C,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,kCAAkC,CAAC,CAAC;QAC3C,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,wCAAwC,CAAC,CAAC;QACjD,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,0CAA0C,CAAC,CAAC;QACnD,cAAc;QACd,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,gDAAgD,CAAC,CAAC;IAC3D,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,KAAK,CAAC;QACV,QAAQ,SAAS,EAAE,CAAC;YAClB,KAAK,OAAO,CAAC,CAAC,CAAC;gBACb,KAAK,GAAG,MAAM,CACZ,2DAA2D,CAC5D,CAAC;gBACF,MAAM;YACR,CAAC;YACD,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,KAAK,GAAG,MAAM,CACZ,0DAA0D,CAC3D,CAAC;gBACF,MAAM;YACR,CAAC;QACH,CAAC;QAED,gEAAgE;QAChE,6IAA6I;QAC7I,2FAA2F;QAC3F,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;YACnB,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACnB,QAAQ,CAAC,IAAI;qBACV,aAAa,CAAC,SAAS,qBAAqB,GAAG,CAAC;oBACjD,EAAE,MAAM,EAAE,CAAC;gBACb,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAC9B,YAAY,EACZ,UAAU,qBAAqB,KAAK,SAAS;EACrD,MAAM,CAAC,OAAO;SACP,CACA,CAAC;YACJ,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAChB,OAAO,CACL,cAAK,EAAE,EAAC,sBAAsB,YAC5B,KAAC,WAAW,KAAG,GACX,CACP,CAAC;AACJ,CAAC;AAED,eAAe,aAAa,CAAC"}
\ No newline at end of file
+{"version":3,"file":"JupyterLabCss.js","sourceRoot":"","sources":["../../src/theme/JupyterLabCss.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAClC,OAAO,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGtD,MAAM,qBAAqB,GAAG,uBAAuB,CAAC;AAEtD,MAAM,WAAW,GAAG,iBAAiB,CAAK;;;;;;CAMzC,CAAC;AAMF;;GAEG;AACH,IAAI,QAAQ,GAAG,KAAK,CAAC;AAErB;;GAEG;AACH,MAAM,UAAU,aAAa,CAAC,KAAyB;IACrD,MAAM,EAAE,SAAS,GAAG,OAAO,EAAE,GAAG,KAAK,CAAC;IACtC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,QAAQ,EAAE,CAAC;YACb,QAAQ;YACR,OAAO;QACT,CAAC;QACD,QAAQ,GAAG,IAAI,CAAC;QAChB,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,kCAAkC,CAAC,CAAC;QAC3C,MAAM,CAAC,2CAA2C,CAAC,CAAC;QACpD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,oCAAoC,CAAC,CAAC;QAC7C,MAAM,CAAC,sCAAsC,CAAC,CAAC;QAC/C,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,uCAAuC,CAAC,CAAC;QAChD,MAAM,CAAC,kCAAkC,CAAC,CAAC;QAC3C,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,wCAAwC,CAAC,CAAC;QACjD,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,0CAA0C,CAAC,CAAC;QACnD,cAAc;QACd,MAAM,CAAC,qCAAqC,CAAC,CAAC;QAC9C,MAAM,CAAC,gDAAgD,CAAC,CAAC;IAC3D,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,KAAK,CAAC;QACV,QAAQ,SAAS,EAAE,CAAC;YAClB,KAAK,OAAO,CAAC,CAAC,CAAC;gBACb,KAAK;oBACH,MAAM,CAAC,2DAA2D,CAAC,CAAC;gBACtE,MAAM;YACR,CAAC;YACD,KAAK,MAAM,CAAC,CAAC,CAAC;gBACZ,KAAK;oBACH,MAAM,CAAC,0DAA0D,CAAC,CAAC;gBACrE,MAAM;YACR,CAAC;QACH,CAAC;QAED,gEAAgE;QAChE,6IAA6I;QAC7I,2FAA2F;QAC3F,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;YACnB,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACnB,QAAQ,CAAC,IAAI;qBACV,aAAa,CAAC,SAAS,qBAAqB,GAAG,CAAC;oBACjD,EAAE,MAAM,EAAE,CAAC;gBACb,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAC9B,YAAY,EACZ,UAAU,qBAAqB,KAAK,SAAS;EACrD,MAAM,CAAC,OAAO;SACP,CACA,CAAC;YACJ,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAChB,OAAO,CACL,cAAK,EAAE,EAAC,sBAAsB,YAC5B,KAAC,WAAW,KAAG,GACX,CACP,CAAC;AACJ,CAAC;AAED,eAAe,aAAa,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-react/lib/tools/USAGE.md b/node_modules/@datalayer/jupyter-react/lib/tools/USAGE.md
new file mode 100644
index 0000000..c77b730
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-react/lib/tools/USAGE.md
@@ -0,0 +1,383 @@
+# Tool Operations with OperationRunner - Usage Guide
+
+## Architecture Overview
+
+The tool system now follows a clean separation of concerns:
+
+```
+
+                    LLM / User Code                       
+
+                     
+                     
+
+              OperationRunner.execute()                   
+  - Coordinates execution                                 
+  - Applies formatting based on context.format            
+
+                     
+                     
+
+            Operation.execute() [pure logic]              
+  - insertCellOperation                                   
+  - deleteCellOperation                                   
+  - updateCellOperation                                   
+  - readCellOperation                                     
+  - readAllCellsOperation                                 
+  - runCellOperation                                      
+  - runAllCellsOperation                                  
+  - executeCodeOperation                                  
+  - insertCellsOperation                                  
+  Returns: Pure typed data (ReadAllCellsResult, etc.)     
+
+                     
+                     
+
+                Executor.execute()                        
+  - DefaultExecutor (React/JupyterLab)                    
+  - BridgeExecutor (VSCode)                               
+  - Platform-specific implementations                     
+
+```
+
+## Key Principles
+
+1. **Operations return pure typed data** - No formatting logic
+2. **Runner handles formatting** - Based on `context.format`
+3. **Type-safe results** - `Promise<TResult | string>`
+4. **Format options**:
+   - `format: 'json'`  Returns structured `TResult` (token-efficient for LLMs)
+   - `format: 'toon'`  Returns TOON-encoded string (default, human-readable)
+
+## Usage Examples
+
+### Basic Usage
+
+```typescript
+import { OperationRunner } from '@datalayer/jupyter-ui-react/tools';
+import { readAllCellsOperation } from '@datalayer/jupyter-ui-react/tools';
+import type { ToolExecutionContext } from '@datalayer/jupyter-ui-react/tools';
+
+// Create runner instance
+const runner = new OperationRunner();
+
+// Setup execution context
+const context: ToolExecutionContext = {
+  executor: myExecutor, // DefaultExecutor or BridgeExecutor
+  notebookId: 'notebook-123',
+  format: 'json', // or 'toon' (default)
+};
+
+// Execute operation
+const result = await runner.execute(
+  readAllCellsOperation,
+  {}, // params
+  context
+);
+
+// With format='json', result is ReadAllCellsResult:
+// { success: true, cells: [...], cellCount: 2 }
+
+// With format='toon', result is string:
+// "success: true\ncells: [\n  { type: \"code\", ... }\n]\ncellCount: 2"
+```
+
+### For LLMs (JSON format - token efficient)
+
+```typescript
+const runner = new OperationRunner();
+
+// LLMs benefit from structured data
+const result = await runner.execute(
+  readAllCellsOperation,
+  {},
+  {
+    executor: myExecutor,
+    notebookId: 'notebook-123',
+    format: 'json', // Returns structured object
+  }
+);
+
+// Type-safe access to result properties
+if (typeof result === 'object') {
+  console.log(`Found ${result.cellCount} cells`);
+  result.cells.forEach(cell => {
+    console.log(`Cell ${cell.index}: ${cell.type}`);
+  });
+}
+```
+
+### For Humans (TOON format - readable)
+
+```typescript
+const runner = new OperationRunner();
+
+// Default format is TOON (human/LLM readable string)
+const result = await runner.execute(
+  executeCodeOperation,
+  { code: 'import numpy as np\nprint(np.__version__)' },
+  {
+    executor: myExecutor,
+    notebookId: 'notebook-123',
+    // format defaults to 'toon'
+  }
+);
+
+// Result is a TOON-encoded string:
+// success: true
+// outputs:
+//   - type: stream
+//     content:
+//       name: stdout
+//       text: "1.24.3"
+// executionCount: 1
+```
+
+### All Operations Examples
+
+#### 1. Insert Cell
+
+```typescript
+await runner.execute(
+  insertCellOperation,
+  {
+    type: 'code',
+    source: 'print("Hello, World!")',
+    index: 0, // optional, defaults to end
+  },
+  context
+);
+// Returns: { success: true, index: 0, message: "Cell inserted at index 0" }
+```
+
+#### 2. Insert Multiple Cells
+
+```typescript
+await runner.execute(
+  insertCellsOperation,
+  {
+    cells: [
+      { type: 'markdown', source: '# Title' },
+      { type: 'code', source: 'x = 42' },
+    ],
+    index: 1,
+  },
+  context
+);
+// Returns: { success: true, insertedCount: 2, startIndex: 1, message: "..." }
+```
+
+#### 3. Delete Cell
+
+```typescript
+await runner.execute(deleteCellOperation, { index: 2 }, context);
+// Returns: { success: true, index: 2, message: "Cell at index 2 has been deleted..." }
+```
+
+#### 4. Update Cell
+
+```typescript
+await runner.execute(
+  updateCellOperation,
+  {
+    index: 1,
+    source: 'y = x * 2\nprint(y)',
+  },
+  context
+);
+// Returns: { success: true, index: 1, message: " Cell at index 1 updated..." }
+```
+
+#### 5. Read Cell
+
+```typescript
+await runner.execute(readCellOperation, { index: 0 }, context);
+// Returns: { success: true, type: 'code', source: '...', index: 0, ... }
+```
+
+#### 6. Read All Cells
+
+```typescript
+await runner.execute(readAllCellsOperation, {}, context);
+// Returns: { success: true, cells: [...], cellCount: 5 }
+```
+
+#### 7. Run Cell
+
+```typescript
+await runner.execute(runCellOperation, { index: 1 }, context);
+// Returns: { success: true, index: 1, message: "Cell executed successfully" }
+```
+
+#### 8. Run All Cells
+
+```typescript
+await runner.execute(runAllCellsOperation, {}, context);
+// Returns: { success: true, message: "All cells executed" }
+```
+
+#### 9. Execute Code (Direct Kernel Execution)
+
+```typescript
+await runner.execute(
+  executeCodeOperation,
+  {
+    code: 'import sys\nsys.version',
+    storeHistory: false, // optional
+    silent: false, // optional
+    stopOnError: true, // optional
+  },
+  context
+);
+// Returns: { success: true, outputs: [...], executionCount: 1 }
+```
+
+## Type Safety
+
+### Before ( Type Safety Issue)
+
+```typescript
+// Operations claimed to return typed objects but actually returned string | object
+const result = await readAllCellsOperation.execute({}, context);
+// TypeScript type: ReadAllCellsResult
+// Runtime value: string (if format='toon')  Type mismatch!
+```
+
+### Now ( Type Safe)
+
+```typescript
+// Runner has correct return type: TResult | string
+const result = await runner.execute(readAllCellsOperation, {}, context);
+// TypeScript type: ReadAllCellsResult | string 
+// Runtime value matches TypeScript type 
+```
+
+## Integration with Existing Code
+
+### In React Components
+
+```typescript
+import { OperationRunner, insertCellOperation } from '@datalayer/jupyter-ui-react/tools';
+import { useExecutor } from './hooks/useExecutor';
+
+function NotebookToolbar() {
+  const executor = useExecutor();
+  const runner = new OperationRunner();
+
+  const handleAddCell = async () => {
+    const result = await runner.execute(
+      insertCellOperation,
+      { type: 'code', source: '' },
+      {
+        executor,
+        notebookId: currentNotebookId,
+        format: 'json',
+      }
+    );
+
+    if (typeof result === 'object' && result.success) {
+      console.log(`Inserted cell at index ${result.index}`);
+    }
+  };
+
+  return <button onClick={handleAddCell}>Add Cell</button>;
+}
+```
+
+### In VSCode Extension
+
+```typescript
+import {
+  OperationRunner,
+  readAllCellsOperation,
+} from '@datalayer/jupyter-ui-react/tools';
+import { BridgeExecutor } from './executors/BridgeExecutor';
+
+async function getAllCells(notebookUri: string) {
+  const runner = new OperationRunner();
+  const executor = new BridgeExecutor(notebookUri);
+
+  const result = await runner.execute(
+    readAllCellsOperation,
+    {},
+    {
+      executor,
+      notebookId: notebookUri,
+      format: 'json', // Get structured data
+    }
+  );
+
+  if (typeof result === 'object') {
+    return result.cells;
+  }
+  throw new Error('Expected JSON format');
+}
+```
+
+## Error Handling
+
+```typescript
+try {
+  const result = await runner.execute(
+    insertCellOperation,
+    { type: 'code', source: 'print("test")' },
+    context
+  );
+
+  if (typeof result === 'object' && result.success) {
+    console.log('Success!');
+  }
+} catch (error) {
+  // Errors are thrown for:
+  // - Invalid parameters
+  // - Missing notebookId
+  // - Missing executor
+  // - Execution failures
+  console.error('Operation failed:', error.message);
+}
+```
+
+## Migration Guide
+
+### Old Pattern (Don't Use)
+
+```typescript
+//  Don't call operations directly anymore
+const result = await readAllCellsOperation.execute({}, context);
+// Type mismatch between declared type and runtime value
+```
+
+### New Pattern (Use This)
+
+```typescript
+//  Use OperationRunner
+const runner = new OperationRunner();
+const result = await runner.execute(readAllCellsOperation, {}, context);
+// Correct types: TResult | string
+```
+
+## Benefits
+
+1. **Type Safety** - No more hidden type mismatches
+2. **Separation of Concerns** - Operations focus on logic, runner handles formatting
+3. **Token Efficiency** - LLMs get structured `format='json'` data
+4. **Flexibility** - Easy to add pre/post execution hooks later
+5. **Testability** - Operations return predictable typed data
+6. **DRY** - Formatting logic in one place (OperationRunner)
+
+## Future Extensibility
+
+The runner pattern allows easy addition of:
+
+- Pre-execution validation hooks
+- Post-execution logging/analytics
+- Result caching
+- Permission checks
+- Rate limiting
+- Retry logic
+
+All without modifying individual operations!
+
+## Testing
+
+See [operationRunner.test.ts](../../__tests__/operationRunner.test.ts) for comprehensive test examples covering all 9 operations.
